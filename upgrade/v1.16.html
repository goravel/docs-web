<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="alternate" hreflang="zh-cn" href="https://goravel.dev/zh/upgrade/v1.16.html"><meta property="og:url" content="https://goravel.dev/upgrade/v1.16.html"><meta property="og:site_name" content="Goravel"><meta property="og:title" content="/upgrade/v1.16.html"><meta property="og:description" content="Upgrading To v1.16 From v1.15 Exciting New Features ðŸŽ‰ Add facades.DB() Add facades.Http() Reconstruct facades.Queue() facades.Auth() supports custom driver make:* commands supp..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Upgrading To v1.16 From v1.15","image":[""],"dateModified":null,"author":[]}</script><script crossorigin="anonymous" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4978322804450032"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HJQNEG5H69"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HJQNEG5H69');</script><title>Upgrading To v1.16 From v1.15 | Goravel</title><meta name="description" content="Upgrading To v1.16 From v1.15 Exciting New Features ðŸŽ‰ Add facades.DB() Add facades.Http() Reconstruct facades.Queue() facades.Auth() supports custom driver make:* commands supp...">
    <link rel="preload" href="/assets/style-CJRhg5TK.css" as="style"><link rel="stylesheet" href="/assets/style-CJRhg5TK.css">
    <link rel="modulepreload" href="/assets/app-DmrjGHX8.js"><link rel="modulepreload" href="/assets/v1.16.html-DiYoKlWG.js">
    <link rel="prefetch" href="/assets/index.html-DpkkFMmM.js" as="script"><link rel="prefetch" href="/assets/index.html-Cdz2iHPr.js" as="script"><link rel="prefetch" href="/assets/facades.html-D-6jENGf.js" as="script"><link rel="prefetch" href="/assets/request-lifecycle.html-CQJ5Diel.js" as="script"><link rel="prefetch" href="/assets/service-container.html-CZUfPLD4.js" as="script"><link rel="prefetch" href="/assets/service-providers.html-FFnVyBTo.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-J7goaRAQ.js" as="script"><link rel="prefetch" href="/assets/migrations.html-BuaMgtOS.js" as="script"><link rel="prefetch" href="/assets/queries.html-D-7imABM.js" as="script"><link rel="prefetch" href="/assets/seeding.html-BEajBDAb.js" as="script"><link rel="prefetch" href="/assets/index.html-CuD4Yy3J.js" as="script"><link rel="prefetch" href="/assets/artisan-console.html-DMEPLVeM.js" as="script"><link rel="prefetch" href="/assets/cache.html-DS_cSH0P.js" as="script"><link rel="prefetch" href="/assets/color.html-0pDC6WSA.js" as="script"><link rel="prefetch" href="/assets/event.html-zgFuslSH.js" as="script"><link rel="prefetch" href="/assets/filesystem.html-DpBfuplE.js" as="script"><link rel="prefetch" href="/assets/helpers.html-EbaOFm4E.js" as="script"><link rel="prefetch" href="/assets/http-client.html-C4ALglCO.js" as="script"><link rel="prefetch" href="/assets/localization.html-pwlPMJbc.js" as="script"><link rel="prefetch" href="/assets/mail.html-CNMVO-Zx.js" as="script"><link rel="prefetch" href="/assets/package-development.html-DhEcPMXg.js" as="script"><link rel="prefetch" href="/assets/queues.html-B-VHrI7J.js" as="script"><link rel="prefetch" href="/assets/strings.html-cmuRO6xC.js" as="script"><link rel="prefetch" href="/assets/task-scheduling.html-CkRhTpzt.js" as="script"><link rel="prefetch" href="/assets/index.html-ufQmTZNq.js" as="script"><link rel="prefetch" href="/assets/compile.html-D8hxWrmH.js" as="script"><link rel="prefetch" href="/assets/configuration.html-CrMtgnMo.js" as="script"><link rel="prefetch" href="/assets/directory-structure.html-DTiOQj0R.js" as="script"><link rel="prefetch" href="/assets/installation.html-BctlhsbG.js" as="script"><link rel="prefetch" href="/assets/index.html-DyvEIvdh.js" as="script"><link rel="prefetch" href="/assets/factories.html-DTjJW-uj.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-DR8F_nTG.js" as="script"><link rel="prefetch" href="/assets/relationships.html-yC9Thrnq.js" as="script"><link rel="prefetch" href="/assets/contributions.html-BczCzqrZ.js" as="script"><link rel="prefetch" href="/assets/packages.html-DJfV8t1y.js" as="script"><link rel="prefetch" href="/assets/privacy-policy.html-DELztCay.js" as="script"><link rel="prefetch" href="/assets/authentication.html-BeZsWaCU.js" as="script"><link rel="prefetch" href="/assets/authorization.html-CRBNu6du.js" as="script"><link rel="prefetch" href="/assets/encryption.html-BsRw1MSI.js" as="script"><link rel="prefetch" href="/assets/hashing.html-B9FS3tGu.js" as="script"><link rel="prefetch" href="/assets/index.html-DlxDXfav.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-DSfFRV_T.js" as="script"><link rel="prefetch" href="/assets/http-tests.html-DPkNJzKv.js" as="script"><link rel="prefetch" href="/assets/mock.html-B6lx_qVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DxtrPgCE.js" as="script"><link rel="prefetch" href="/assets/controllers.html-B0Sy8DwO.js" as="script"><link rel="prefetch" href="/assets/grpc.html-CF8M737Z.js" as="script"><link rel="prefetch" href="/assets/logging.html-DaQ4RChm.js" as="script"><link rel="prefetch" href="/assets/middleware.html-CX-RKzfp.js" as="script"><link rel="prefetch" href="/assets/request.html-ByI_0XUv.js" as="script"><link rel="prefetch" href="/assets/response.html-Q7OjLlHm.js" as="script"><link rel="prefetch" href="/assets/routing.html-Z46MAwx4.js" as="script"><link rel="prefetch" href="/assets/session.html-Bd6jQz5c.js" as="script"><link rel="prefetch" href="/assets/validation.html-CXF0deDX.js" as="script"><link rel="prefetch" href="/assets/views.html-BIFr2O8f.js" as="script"><link rel="prefetch" href="/assets/history.html-C6Dj3NbH.js" as="script"><link rel="prefetch" href="/assets/v1.1.html-_PrAMq8I.js" as="script"><link rel="prefetch" href="/assets/v1.10.html-Delcf6nG.js" as="script"><link rel="prefetch" href="/assets/v1.11.html-BNs8RNVJ.js" as="script"><link rel="prefetch" href="/assets/v1.12.html-Dh_f4vH5.js" as="script"><link rel="prefetch" href="/assets/v1.13.html-BNUF_1RI.js" as="script"><link rel="prefetch" href="/assets/v1.14.html-tHqnxmOh.js" as="script"><link rel="prefetch" href="/assets/v1.15.html-CAv3ndim.js" as="script"><link rel="prefetch" href="/assets/v1.2.html-DFmYGVRF.js" as="script"><link rel="prefetch" href="/assets/v1.3.html-CaUoXrxv.js" as="script"><link rel="prefetch" href="/assets/v1.4.html-DcfYbDvA.js" as="script"><link rel="prefetch" href="/assets/v1.5.html-t48HZpqv.js" as="script"><link rel="prefetch" href="/assets/v1.6.html-N42w8s0L.js" as="script"><link rel="prefetch" href="/assets/v1.7.html-DgtCQ8vQ.js" as="script"><link rel="prefetch" href="/assets/v1.8.html-CVWc--44.js" as="script"><link rel="prefetch" href="/assets/v1.9.html-CY9tLasi.js" as="script"><link rel="prefetch" href="/assets/index.html-DqkV1LFC.js" as="script"><link rel="prefetch" href="/assets/index.html-eUqPjZpR.js" as="script"><link rel="prefetch" href="/assets/facades.html-V5plEm7Y.js" as="script"><link rel="prefetch" href="/assets/request-lifecycle.html-BjB9HZ1W.js" as="script"><link rel="prefetch" href="/assets/service-container.html-CIOXfjIq.js" as="script"><link rel="prefetch" href="/assets/service-providers.html-BWQG6aDg.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-C0YIdtQv.js" as="script"><link rel="prefetch" href="/assets/migrations.html-DEeG3jtZ.js" as="script"><link rel="prefetch" href="/assets/queries.html-BK6i0UwG.js" as="script"><link rel="prefetch" href="/assets/seeding.html-DSyO0LmB.js" as="script"><link rel="prefetch" href="/assets/index.html-ylrk16wW.js" as="script"><link rel="prefetch" href="/assets/artisan-console.html-CY6eUAt9.js" as="script"><link rel="prefetch" href="/assets/cache.html-qj8S08dr.js" as="script"><link rel="prefetch" href="/assets/color.html-BnyYqSWq.js" as="script"><link rel="prefetch" href="/assets/event.html-D69MMkqZ.js" as="script"><link rel="prefetch" href="/assets/filesystem.html-DhPaey5_.js" as="script"><link rel="prefetch" href="/assets/helpers.html-CDzqGS_X.js" as="script"><link rel="prefetch" href="/assets/http-client.html-Bx7BO5V5.js" as="script"><link rel="prefetch" href="/assets/localization.html-CB9lCyy2.js" as="script"><link rel="prefetch" href="/assets/mail.html-DgdZsHoE.js" as="script"><link rel="prefetch" href="/assets/package-development.html-CkalHSVt.js" as="script"><link rel="prefetch" href="/assets/queues.html-CEMBZhwF.js" as="script"><link rel="prefetch" href="/assets/strings.html-CgZArJ3a.js" as="script"><link rel="prefetch" href="/assets/task-scheduling.html-BWWiTJpq.js" as="script"><link rel="prefetch" href="/assets/index.html-X5364u1E.js" as="script"><link rel="prefetch" href="/assets/compile.html-DEa3w7vl.js" as="script"><link rel="prefetch" href="/assets/configuration.html-D50OQk8D.js" as="script"><link rel="prefetch" href="/assets/directory-structure.html-Co-0CLwA.js" as="script"><link rel="prefetch" href="/assets/installation.html-WqtQw8KE.js" as="script"><link rel="prefetch" href="/assets/index.html-DtqCpXtX.js" as="script"><link rel="prefetch" href="/assets/factories.html-Bs9-2Pcj.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-DhkbFkbb.js" as="script"><link rel="prefetch" href="/assets/relationships.html-MBcMxOui.js" as="script"><link rel="prefetch" href="/assets/contributions.html-Cia7AywH.js" as="script"><link rel="prefetch" href="/assets/packages.html-Boeidn_a.js" as="script"><link rel="prefetch" href="/assets/authentication.html-BH1Bfrr6.js" as="script"><link rel="prefetch" href="/assets/authorization.html-BIR367um.js" as="script"><link rel="prefetch" href="/assets/encryption.html-FS4mq2rA.js" as="script"><link rel="prefetch" href="/assets/hashing.html-B-m80eMX.js" as="script"><link rel="prefetch" href="/assets/index.html-DQQ497S2.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-DQkxxShr.js" as="script"><link rel="prefetch" href="/assets/http-tests.html-u27bj_vJ.js" as="script"><link rel="prefetch" href="/assets/mock.html-d5Whzlv5.js" as="script"><link rel="prefetch" href="/assets/index.html-CaCXaJ42.js" as="script"><link rel="prefetch" href="/assets/controllers.html-DjlIgp6v.js" as="script"><link rel="prefetch" href="/assets/grpc.html-DZlBkpmz.js" as="script"><link rel="prefetch" href="/assets/logging.html-CHVjR73c.js" as="script"><link rel="prefetch" href="/assets/middleware.html-Diy2x0Lc.js" as="script"><link rel="prefetch" href="/assets/request.html-DK0s723t.js" as="script"><link rel="prefetch" href="/assets/response.html-BmVZAiK5.js" as="script"><link rel="prefetch" href="/assets/routing.html-DS-g23hB.js" as="script"><link rel="prefetch" href="/assets/session.html-B-254T_g.js" as="script"><link rel="prefetch" href="/assets/validation.html-Bv2u4d90.js" as="script"><link rel="prefetch" href="/assets/views.html-gXcLab8S.js" as="script"><link rel="prefetch" href="/assets/history.html-yLXohEZo.js" as="script"><link rel="prefetch" href="/assets/v1.1.html-CNOGpVmV.js" as="script"><link rel="prefetch" href="/assets/v1.10.html-D-QjZkui.js" as="script"><link rel="prefetch" href="/assets/v1.11.html-CkF9-8EQ.js" as="script"><link rel="prefetch" href="/assets/v1.12.html-DopjZA-J.js" as="script"><link rel="prefetch" href="/assets/v1.13.html-CswOJJ3e.js" as="script"><link rel="prefetch" href="/assets/v1.14.html-Dm3jb_Zs.js" as="script"><link rel="prefetch" href="/assets/v1.15.html-3DlOm5sD.js" as="script"><link rel="prefetch" href="/assets/v1.16.html-C5k7e7Gr.js" as="script"><link rel="prefetch" href="/assets/v1.2.html-CwkzXqSe.js" as="script"><link rel="prefetch" href="/assets/v1.3.html-BXJMV16H.js" as="script"><link rel="prefetch" href="/assets/v1.4.html-xU3Dvv7K.js" as="script"><link rel="prefetch" href="/assets/v1.5.html-Dcp3Z_AJ.js" as="script"><link rel="prefetch" href="/assets/v1.6.html-BYYzS6Qs.js" as="script"><link rel="prefetch" href="/assets/v1.7.html-CpNvBtvy.js" as="script"><link rel="prefetch" href="/assets/v1.8.html-CV3J_T2z.js" as="script"><link rel="prefetch" href="/assets/v1.9.html-DZ5uBL_K.js" as="script"><link rel="prefetch" href="/assets/404.html-DcT6eOuE.js" as="script"><link rel="prefetch" href="/assets/SidebarTop-BdwQ197D.js" as="script"><link rel="prefetch" href="/assets/index-DuqNHZ2Z.js" as="script"><link rel="prefetch" href="/assets/giscus--_FS5kYt.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-byGs0A1n.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/logo-mini.png" alt="Goravel"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Goravel</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.youtube.com/playlist?list=PL40Xne4u-oXJ0Z5uFiPWHqIMvzZaG_BDf" aria-label="Video" rel="noopener noreferrer" target="_blank"><!---->Video<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/upgrade/v1.16.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/zh/upgrade/v1.16.html" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/goravel/goravel" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.youtube.com/playlist?list=PL40Xne4u-oXJ0Z5uFiPWHqIMvzZaG_BDf" aria-label="Video" rel="noopener noreferrer" target="_blank"><!---->Video<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/upgrade/v1.16.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/zh/upgrade/v1.16.html" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/goravel/goravel" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Prologue <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item active">Upgrade Guide <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/upgrade/v1.16.html" aria-label="Upgrading To v1.16 From v1.15"><!---->Upgrading To v1.16 From v1.15<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/upgrade/v1.15.html" aria-label="Upgrading To v1.15 From v1.14"><!---->Upgrading To v1.15 From v1.14<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/upgrade/history.html" aria-label="History Upgrade"><!---->History Upgrade<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/prologue/contributions.html" aria-label="Contribution Guide"><!---->Contribution Guide<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/prologue/packages.html" aria-label="Excellent Extend Packages"><!---->Excellent Extend Packages<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Getting Started <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/installation.html" aria-label="Installation"><!---->Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/directory-structure.html" aria-label="Directory Structure"><!---->Directory Structure<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/compile.html" aria-label="Compile"><!---->Compile<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Architecture Concepts <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/architecture-concepts/request-lifecycle.html" aria-label="Request Lifecycle"><!---->Request Lifecycle<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/architecture-concepts/service-container.html" aria-label="Service Container"><!---->Service Container<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/architecture-concepts/service-providers.html" aria-label="Service Providers"><!---->Service Providers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/architecture-concepts/facades.html" aria-label="Facades"><!---->Facades<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">The Basics <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/routing.html" aria-label="Routing"><!---->Routing<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/middleware.html" aria-label="HTTP Middleware"><!---->HTTP Middleware<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/controllers.html" aria-label="Controllers"><!---->Controllers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/request.html" aria-label="Requests"><!---->Requests<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/response.html" aria-label="Responses"><!---->Responses<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/views.html" aria-label="Views"><!---->Views<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/grpc.html" aria-label="Grpc"><!---->Grpc<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/session.html" aria-label="Session"><!---->Session<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/validation.html" aria-label="Validation"><!---->Validation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/the-basics/logging.html" aria-label="Logging"><!---->Logging<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Digging Deeper <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/artisan-console.html" aria-label="Artisan Console"><!---->Artisan Console<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/cache.html" aria-label="Cache"><!---->Cache<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/event.html" aria-label="Events"><!---->Events<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/filesystem.html" aria-label="File Storage"><!---->File Storage<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/mail.html" aria-label="Mail"><!---->Mail<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/queues.html" aria-label="Queues"><!---->Queues<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/task-scheduling.html" aria-label="Task Scheduling"><!---->Task Scheduling<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/localization.html" aria-label="Localization"><!---->Localization<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/package-development.html" aria-label="Package Development"><!---->Package Development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/color.html" aria-label="Color"><!---->Color<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/strings.html" aria-label="Strings"><!---->Strings<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/digging-deeper/helpers.html" aria-label="Helpers"><!---->Helpers<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Security <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/security/authentication.html" aria-label="Authentication"><!---->Authentication<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/security/authorization.html" aria-label="Authorization"><!---->Authorization<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/security/encryption.html" aria-label="Encryption"><!---->Encryption<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/security/hashing.html" aria-label="Hashing"><!---->Hashing<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Database <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/database/getting-started.html" aria-label="Getting Started"><!---->Getting Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/database/migrations.html" aria-label="Migrations"><!---->Migrations<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/database/seeding.html" aria-label="Seeding"><!---->Seeding<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">ORM <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/orm/getting-started.html" aria-label="Getting Started"><!---->Getting Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/orm/relationships.html" aria-label="Relationships"><!---->Relationships<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/orm/factories.html" aria-label="Factories"><!---->Factories<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Testing <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/testing/getting-started.html" aria-label="Getting Started"><!---->Getting Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/testing/http-tests.html" aria-label="HTTP Tests"><!---->HTTP Tests<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/testing/mock.html" aria-label="Mock"><!---->Mock<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="upgrading-to-v1-16-from-v1-15" tabindex="-1"><a class="header-anchor" href="#upgrading-to-v1-16-from-v1-15"><span>Upgrading To v1.16 From v1.15</span></a></h1><h3 id="exciting-new-features-ðŸŽ‰" tabindex="-1"><a class="header-anchor" href="#exciting-new-features-ðŸŽ‰"><span>Exciting New Features ðŸŽ‰</span></a></h3><ul><li><a href="#add-facades-db">Add facades.DB()</a></li><li><a href="#add-facades-http">Add facades.Http()</a></li><li><a href="#reconstruct-facades-queue">Reconstruct facades.Queue()</a></li><li><a href="#facades-auth-supports-custom-driver">facades.Auth() supports custom driver</a></li><li><a href="#make-commands-support-automatic-registration">make:* commands support automatic registration</a></li><li><a href="#goravel-installer-supports-selecting-driver">Goravel Installer supports selecting driver</a></li></ul><h3 id="enhancements-ðŸš€" tabindex="-1"><a class="header-anchor" href="#enhancements-ðŸš€"><span>Enhancements ðŸš€</span></a></h3><ul><li><a href="#split-database-driver">Split Database Driver</a></li><li><a href="#orm-adds-features">Orm adds features</a></li><li><a href="#support-creating-model-based-on-data-table">Support creating Model based on data table</a></li><li><a href="#support-runtime-dynamic-sql-statement">Support runtime dynamic SQL statement</a></li><li><a href="#migration-adds-features">Migration adds features</a></li><li><a href="#grpc-adds-shutdown-method">Grpc adds Shutdown method</a></li><li><a href="#artisan-adds-disable-print-colors-option">Artisan adds disable print colors option</a></li><li><a href="#encrypt-and-decrypt-env-file">Encrypt and decrypt env file</a></li><li><a href="#send-email-supports-setting-header">Send email supports setting Header</a></li><li><a href="#installer-supports-self-upgrade">Installer supports self upgrade</a></li><li><a href="#localization-supports-embed-loading">Localization supports embed loading</a></li><li><a href="#task-scheduling-supports-setting-second-level-tasks">Task Scheduling supports setting second-level tasks</a></li><li><a href="#request-adds-features">Request adds features</a></li><li><a href="#route-adds-features">Route adds features</a></li><li><a href="#testing-supports-creating-cache-image">Testing supports creating Cache image</a></li><li><a href="#different-jwt-guard-supports-different-configurations">Different JWT Guard supports different configurations</a></li><li><a href="#serviceprovider-no-longer-depends-on-order">ServiceProvider no longer depends on order</a></li></ul><h3 id="breaking-changes-ðŸ› " tabindex="-1"><a class="header-anchor" href="#breaking-changes-ðŸ› "><span>Breaking Changes ðŸ› </span></a></h3><ul><li><a href="#remove-sql-migration">Remove SQL Migration</a></li><li><a href="#optimize-config-moudlue-methods-default-value-type">Optimize Config moudlue methods default value type</a></li><li><a href="#optimize-orm-methods">Optimize Orm methods</a></li><li><a href="#optimize-path-methods">Optimize Path methods</a></li><li><a href="#optimize-request-methods">Optimize Request methods</a></li><li><a href="#optimize-console-confirm-methods">Optimize console Confirm methods</a></li><li><a href="#optimize-session-custom-driver">Optimize Session custom driver</a></li><li><a href="#optimize-testing-request-methods">Optimize Testing.Request methods</a></li><li><a href="#optimize-carbon-methods">Optimize Carbon methods</a></li></ul><h2 id="upgrade-guide" tabindex="-1"><a class="header-anchor" href="#upgrade-guide"><span>Upgrade Guide</span></a></h2><p>As <a href="https://encdoflife.date/go" target="_blank" rel="noopener noreferrer">Golang v1.22 is no longer maintained</a>, the Golang version of Goravel supports has been upgraded from 1.22 to 1.23.</p><p>goravel/example project from v1.15 to v1.16 PR can be used as an upgrade reference: <a href="https://github.com/goravel/example/pull/68" target="_blank" rel="noopener noreferrer">goravel/example#68</a></p><h3 id="_1-update-dependencies" tabindex="-1"><a class="header-anchor" href="#_1-update-dependencies"><span>1. Update Dependencies</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go get github.com/goravel/framework@master</span>
<span class="line"></span>
<span class="line">// If using gin</span>
<span class="line">go get github.com/goravel/gin@master</span>
<span class="line"></span>
<span class="line">// If using fiber</span>
<span class="line">go get github.com/goravel/fiber@master</span>
<span class="line"></span>
<span class="line">// If using redis</span>
<span class="line">go get github.com/goravel/redis@master</span>
<span class="line"></span>
<span class="line">// If using S3</span>
<span class="line">go get github.com/goravel/s3@master</span>
<span class="line"></span>
<span class="line">// If using Oss</span>
<span class="line">go get github.com/goravel/oss@master</span>
<span class="line"></span>
<span class="line">// If using Cos</span>
<span class="line">go get github.com/goravel/cos@master</span>
<span class="line"></span>
<span class="line">// If using Minio</span>
<span class="line">go get github.com/goravel/minio@master</span>
<span class="line"></span>
<span class="line">// If using Cloudinary</span>
<span class="line">go get github.com/goravel/cloudinary@master</span>
<span class="line"></span>
<span class="line">go mod tidy</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-modify-database-configuration" tabindex="-1"><a class="header-anchor" href="#_2-modify-database-configuration"><span>2. Modify Database Configuration</span></a></h3><p>Delete the <code>connections</code> in the database configuration file <code>config/database.go</code> that you don&#39;t need, and install the database driver you need.</p><p>For example, Postgres:</p><ol><li>Install the driver package</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go get github.com/goravel/postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>Add <code>postgres.ServiceProvider</code> to the <code>config/app.go</code> file</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/app.go</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/postgres&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&quot;providers&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>foundation<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token operator">&amp;</span>postgres<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Modify the configuration in the <code>config/database.go</code> file</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/database.go</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/goravel/framework/contracts/database/driver&quot;</span></span>
<span class="line">	postgresfacades <span class="token string">&quot;github.com/goravel/postgres/facades&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&quot;connections&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>driver<span class="token punctuation">.</span>Driver<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>      <span class="token keyword">return</span> postgresfacades<span class="token punctuation">.</span><span class="token function">Postgres</span><span class="token punctuation">(</span><span class="token string">&quot;postgres&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-modify-auth-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_3-modify-auth-go-configuration-file"><span>3. Modify auth.go configuration file</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/auth.go</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Supported: &quot;jwt&quot;</span></span>
<span class="line"><span class="token string">&quot;guards&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;user&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>   <span class="token string">&quot;jwt&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;provider&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">++</span> <span class="token comment">// Supported: &quot;orm&quot;</span></span>
<span class="line"><span class="token operator">++</span> <span class="token string">&quot;providers&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;user&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>     <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;orm&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-modify-session-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_4-modify-session-go-configuration-file"><span>4. Modify session.go configuration file</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/session.go</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;SESSION_DRIVER&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">:</span> config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;SESSION_DRIVER&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token string">&quot;drivers&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;file&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>     <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-modify-queue-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_5-modify-queue-go-configuration-file"><span>5. Modify queue.go configuration file</span></a></h3><ul><li><p>If you are using the Redis driver of the Queue module, you need to modify accordingly: <a href="#optimize-queue-module-configuration">Optimize Queue module configuration</a>.</p></li><li><p>If you are not using it or want to use the database driver in the future, you need to modify the configuration in the <code>config/queue.go</code> file:</p></li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/queue.go</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token comment">// Drivers: &quot;sync&quot;, &quot;redis&quot;</span></span>
<span class="line"><span class="token operator">++</span> <span class="token comment">// Drivers: &quot;sync&quot;, &quot;database&quot;, &quot;custom&quot;</span></span>
<span class="line"><span class="token string">&quot;connections&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;sync&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;sync&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token string">&quot;redis&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">--</span>    <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">--</span>    <span class="token string">&quot;queue&quot;</span><span class="token punctuation">:</span>      config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;REDIS_QUEUE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token string">&quot;database&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;queue&quot;</span><span class="token punctuation">:</span>      <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;concurrent&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">++</span> <span class="token string">&quot;failed&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token string">&quot;database&quot;</span><span class="token punctuation">:</span> config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;DB_CONNECTION&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token string">&quot;table&quot;</span><span class="token punctuation">:</span>    <span class="token string">&quot;failed_jobs&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the migration file required for the database driver: <a href="https://github.com/goravel/goravel/blob/master/database/migrations/20210101000002_create_jobs_table.go" target="_blank" rel="noopener noreferrer">database/migrations/20210101000002_create_jobs_table.go</a>, and register the migration file in the <code>database/kernel.go</code> file.</p><h3 id="_6-if-you-need-to-use-http-client" tabindex="-1"><a class="header-anchor" href="#_6-if-you-need-to-use-http-client"><span>6. If you need to use HTTP Client</span></a></h3><p>Add the HTTP Client configuration item in the <code>config/http.go</code> file:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/http.go</span></span>
<span class="line"><span class="token operator">++</span> <span class="token string">&quot;client&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;base_url&quot;</span><span class="token punctuation">:</span>                config<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_BASE_URL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;timeout&quot;</span><span class="token punctuation">:</span>                 config<span class="token punctuation">.</span><span class="token function">GetDuration</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_TIMEOUT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;max_idle_conns&quot;</span><span class="token punctuation">:</span>          config<span class="token punctuation">.</span><span class="token function">GetInt</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_MAX_IDLE_CONNS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;max_idle_conns_per_host&quot;</span><span class="token punctuation">:</span> config<span class="token punctuation">.</span><span class="token function">GetInt</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_MAX_IDLE_CONNS_PER_HOST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;max_conns_per_host&quot;</span><span class="token punctuation">:</span>      config<span class="token punctuation">.</span><span class="token function">GetInt</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_MAX_CONN_PER_HOST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>   <span class="token string">&quot;idle_conn_timeout&quot;</span><span class="token punctuation">:</span>       config<span class="token punctuation">.</span><span class="token function">GetDuration</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_CLIENT_IDLE_CONN_TIMEOUT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-if-using-goravel-redis-driver" tabindex="-1"><a class="header-anchor" href="#_7-if-using-goravel-redis-driver"><span>7. If using goravel/redis driver</span></a></h3><p>Need to modify the configuration in the <code>config/cache.go</code> file:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/cache.go</span></span>
<span class="line"><span class="token string">&quot;redis&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span>Driver<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token keyword">return</span> redisfacades<span class="token punctuation">.</span><span class="token function">Redis</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token keyword">return</span> redisfacades<span class="token punctuation">.</span><span class="token function">Cache</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-if-using-carbon-datetime-etc-methods" tabindex="-1"><a class="header-anchor" href="#_8-if-using-carbon-datetime-etc-methods"><span>8. If using carbon.DateTime etc. methods</span></a></h3><p>Need to modify accordingly: <a href="#optimize-carbon-methods">Optimize Carbon methods</a></p><h3 id="_9-if-using-session-custom-driver" tabindex="-1"><a class="header-anchor" href="#_9-if-using-session-custom-driver"><span>9. If using session custom driver</span></a></h3><p>Need to modify accordingly: <a href="#optimize-session-custom-driver">Optimize Session custom driver</a></p><h3 id="_10-if-using-methods-of-facades-config" tabindex="-1"><a class="header-anchor" href="#_10-if-using-methods-of-facades-config"><span>10. If using methods of facades.Config()</span></a></h3><p>Need to modify accordingly: <a href="#modify-config-moudlue-methods-default-value-type">Modify Config Moudlue methods default value type</a></p><h3 id="_11-if-using-sql-migrations" tabindex="-1"><a class="header-anchor" href="#_11-if-using-sql-migrations"><span>11. If Using SQL Migrations</span></a></h3><p>Need to modify accordingly: <a href="#remove-sql-migration">Remove SQL Migration</a></p><h3 id="_12-if-using-orm" tabindex="-1"><a class="header-anchor" href="#_12-if-using-orm"><span>12. If Using Orm</span></a></h3><p>Need to modify accordingly: <a href="#optimize-orm-methods">Optimize Orm methods</a></p><h3 id="_13-if-using-path-method" tabindex="-1"><a class="header-anchor" href="#_13-if-using-path-method"><span>13. If Using Path Method</span></a></h3><p>The <code>path</code> method returns the absolute path, if you are using it, you need to check if you need to modify: <a href="#optimize-path-method">Optimize Path method</a></p><h3 id="_14-if-using-ctx-request-inputmap-method" tabindex="-1"><a class="header-anchor" href="#_14-if-using-ctx-request-inputmap-method"><span>14. If Using <code>ctx.Request().InputMap</code> Method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-request-method">Optimize Request method</a></p><h3 id="_15-if-using-console-confirm-method" tabindex="-1"><a class="header-anchor" href="#_15-if-using-console-confirm-method"><span>15. If Using <code>console.Confirm</code> Method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-console-confirm-method">Optimize console Confirm method</a></p><h3 id="_16-if-using-testing-request-method" tabindex="-1"><a class="header-anchor" href="#_16-if-using-testing-request-method"><span>16. If Using Testing.Request method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-testing-request-method">Optimize Testing.Request method</a></p><h2 id="feature-introduction" tabindex="-1"><a class="header-anchor" href="#feature-introduction"><span>Feature Introduction</span></a></h2><h3 id="add-facades-db" tabindex="-1"><a class="header-anchor" href="#add-facades-db"><span>Add facades.DB()</span></a></h3><p>Add the <code>facades.DB()</code> module, which is convenient for performing native database operations, faster than ORM.</p><p><a class="route-link" href="/database/getting-started.html">View Document</a></p><h3 id="add-facades-http" tabindex="-1"><a class="header-anchor" href="#add-facades-http"><span>Add facades.Http()</span></a></h3><p>Add the <code>facades.Http()</code> module, which is convenient for performing HTTP operations.</p><p><a class="route-link" href="/digging-deeper/http-client.html">View Document</a></p><h3 id="reconstruct-facades-queue" tabindex="-1"><a class="header-anchor" href="#reconstruct-facades-queue"><span>Reconstruct facades.Queue()</span></a></h3><ol><li>Before v1.15, Queue only supported sync and Redis drivers, starting from v1.16, it supports database and custom driver.</li><li>Add <code>jobs</code> and <code>failed_jobs</code> table, used to store tasks and failed tasks.</li><li>Add <code>queue:retry</code> command, used to retry failed tasks.</li><li>Add <code>queue:failed</code> command, used to view failed tasks.</li><li>Support setting the number of retries when starting the queue task.</li></ol><p><a class="route-link" href="/digging-deeper/queues.html">View Document</a></p><h3 id="facades-auth-supports-custom-driver" tabindex="-1"><a class="header-anchor" href="#facades-auth-supports-custom-driver"><span>facades.Auth() supports custom driver</span></a></h3><p>Before v1.15, Auth only supported JWT driver, starting from v1.16, it supports Session and custom driver, please <a class="route-link" href="/security/authentication.html#custom-driver">view document</a>.</p><h3 id="make-commands-support-automatic-registration" tabindex="-1"><a class="header-anchor" href="#make-commands-support-automatic-registration"><span>make:* commands support automatic registration</span></a></h3><p>The files<code>make:migration</code> and <code>make:seeder</code>, etc. commands generated files will be automatically registered to the framework after generation, no longer need to manually register like before.</p><h3 id="goravel-installer-supports-selecting-driver" tabindex="-1"><a class="header-anchor" href="#goravel-installer-supports-selecting-driver"><span>Goravel Installer supports selecting driver</span></a></h3><p>When installing a new project using Goravel Installer, you can select different drivers, such as: you can choose to install goravel/gin or goravel/fiber, etc.</p><h3 id="split-database-driver" tabindex="-1"><a class="header-anchor" href="#split-database-driver"><span>Split Database Driver</span></a></h3><p>Before multiple database drivers were integrated in the framework, which increased the software package size. Starting from v1.16, the database driver will be a separate package, so you only need to install the database driver you need.</p><table><thead><tr><th>Database Type</th><th>Driver Package</th></tr></thead><tbody><tr><td>Postgres</td><td><a href="https://github.com/goravel/postgres" target="_blank" rel="noopener noreferrer">github.com/goravel/postgres</a></td></tr><tr><td>MySQL</td><td><a href="https://github.com/goravel/mysql" target="_blank" rel="noopener noreferrer">github.com/goravel/mysql</a></td></tr><tr><td>Sqlserver</td><td><a href="https://github.com/goravel/sqlserver" target="_blank" rel="noopener noreferrer">github.com/goravel/sqlserver</a></td></tr><tr><td>SQLite</td><td><a href="https://github.com/goravel/sqlite" target="_blank" rel="noopener noreferrer">github.com/goravel/sqlite</a></td></tr></tbody></table><h3 id="orm-adds-features" tabindex="-1"><a class="header-anchor" href="#orm-adds-features"><span>Orm adds features</span></a></h3><ul><li><p>Support querying JSON fields, <a class="route-link" href="/orm/getting-started.html#where">view document</a>.</p></li><li><p>Support updating JSON fields, <a class="route-link" href="/orm/getting-started.html#update-json-fields">view document</a>.</p></li><li><p>Model supports setting the <code>GlobalScope</code> method, which restricts the scope of the query, update, and delete operations:</p></li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/contracts/orm&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">  orm<span class="token punctuation">.</span>Model</span>
<span class="line">  Name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token function">GlobalScopes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query<span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span><span class="token punctuation">(</span>query orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;goravel&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="support-creating-model-based-on-data-table" tabindex="-1"><a class="header-anchor" href="#support-creating-model-based-on-data-table"><span>Support creating Model based on data table</span></a></h3><p><code>make:model</code> command adds <code>--table</code> option, used to create Model based on data table:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./artisan make:model <span class="token parameter variable">--table</span><span class="token operator">=</span>users User</span>
<span class="line"></span>
<span class="line">// If the Model already exists, you can use the <span class="token parameter variable">-f</span> option to force overwrite</span>
<span class="line">./artisan make:model <span class="token parameter variable">--table</span><span class="token operator">=</span>users <span class="token parameter variable">-f</span> User</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="support-runtime-dynamic-sql-statement" tabindex="-1"><a class="header-anchor" href="#support-runtime-dynamic-sql-statement"><span>Support runtime dynamic SQL statement</span></a></h3><p>Add the <code>EnableQueryLog</code> method, which is used to enable query log:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">EnableQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Orm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Table</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">queryLogs <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">GetQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line">ctx <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">DisableQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="migration-adds-features" tabindex="-1"><a class="header-anchor" href="#migration-adds-features"><span>Migration adds features</span></a></h3><ul><li>Add the <code>Change</code> method to modify the table structure(Apply to Postgres, MySQL, Sqlserver):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>RenameColumn</code> method, for renaming the table column:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">RenameColumn</span><span class="token punctuation">(</span><span class="token string">&quot;old_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;new_name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Comment</code> method, for adding a comment to the table (Apply to Postgres, MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Comment</span><span class="token punctuation">(</span><span class="token string">&quot;user table&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>First</code> method, for setting the field as the first field of the table (Apply to MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>After</code> method, for setting the field as the last field of the table (Apply to MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Morphs</code>, <code>NullableMorphs</code>, <code>NumericMorphs</code>, <code>UuidMorphs</code>, <code>UlidMorphs</code> methods, used to create polymorphic association fields:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Morphs</span><span class="token punctuation">(</span><span class="token string">&quot;morphable&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// morphable_type, morphable_id</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add the <code>Uuid</code>, <code>Ulid</code> methods, used to create UUID and ULID fields:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Uuid</span><span class="token punctuation">(</span><span class="token string">&quot;uuid&quot;</span><span class="token punctuation">)</span></span>
<span class="line">table<span class="token punctuation">.</span><span class="token function">Ulid</span><span class="token punctuation">(</span><span class="token string">&quot;ulid&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="grpc-adds-shutdown-method" tabindex="-1"><a class="header-anchor" href="#grpc-adds-shutdown-method"><span>Grpc adds Shutdown method</span></a></h3><p>Add the <code>Shutdown</code> method to gracefully shut down Grpc, <a class="route-link" href="/the-basics/grpc.html#shutdown-grpc">View Document</a>.</p><h3 id="artisan-adds-disable-print-colors-option" tabindex="-1"><a class="header-anchor" href="#artisan-adds-disable-print-colors-option"><span>Artisan adds disable print colors option</span></a></h3><p>Some commands print colors by default, such as the <code>list</code> command. However, in some terminals or logs, the color values may be garbled. You can use the <code>--no-ansi</code> option to disable the print colors:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go run <span class="token builtin class-name">.</span> artisan list --no-ansi</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="encrypt-and-decrypt-env-file" tabindex="-1"><a class="header-anchor" href="#encrypt-and-decrypt-env-file"><span>Encrypt and decrypt env file</span></a></h3><p>You may want to add the production environment env file to version control, but you don&#39;t want to expose sensitive information, you can encrypt and decrypt the env file:</p><p><a class="route-link" href="/getting-started/installation.html#encrypt-and-decrypt-env-file">View Document</a></p><h3 id="send-email-supports-setting-header" tabindex="-1"><a class="header-anchor" href="#send-email-supports-setting-header"><span>Send email supports setting Header</span></a></h3><p>Add the <code>Headers</code> method, which is used to set the Header of the email.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Mail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Headers</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;X-Mailer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Goravel&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="installer-supports-self-upgrade" tabindex="-1"><a class="header-anchor" href="#installer-supports-self-upgrade"><span>Installer supports self upgrade</span></a></h3><p>goravel/installer adds <code>upgrade</code> command, which is used to upgrade the installer itself:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">goravel upgrade</span>
<span class="line">goravel upgrade v1.1.1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="localization-supports-embed-loading" tabindex="-1"><a class="header-anchor" href="#localization-supports-embed-loading"><span>Localization supports embed loading</span></a></h3><p>When using embed loading, the language files will be compiled into the binary file and no longer need to be deployed.</p><p><a class="route-link" href="/digging-deeper/localization.html#embed-loading">View Document</a></p><h3 id="task-scheduling-supports-setting-second-level-tasks" tabindex="-1"><a class="header-anchor" href="#task-scheduling-supports-setting-second-level-tasks"><span>Task Scheduling supports setting second-level tasks</span></a></h3><p>Add the <code>EverySecond</code> method, etc., please <a class="route-link" href="/digging-deeper/task-scheduling.html#schedule-frequency-options">view document</a>.</p><h3 id="request-adds-features" tabindex="-1"><a class="header-anchor" href="#request-adds-features"><span>Request adds features</span></a></h3><ul><li>Before v1.15, the following <code>Request</code> binding will report an error, starting from v1.16, it supports binding multiple files:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> StoreMediaRequest <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Files <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>multipart<span class="token punctuation">.</span>FileHeader <span class="token string">`form:&quot;files&quot; json:&quot;files&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add the <code>OriginPath</code> method, which is used to get the original route path:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OriginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>When the <code>http.request_timeout</code> configuration item is set to <code>0</code>, the request will not timeout.</li></ul><h3 id="route-adds-features" tabindex="-1"><a class="header-anchor" href="#route-adds-features"><span>Route adds features</span></a></h3><ul><li>Add the <code>GetRoutes</code> method, which is used to get all routes:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">routes <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Name</code> method, which is used to set the route name:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> usersController<span class="token punctuation">.</span>Index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">&quot;users.index&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then you can use the <code>Info</code> method to get the route information:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">route <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">&quot;users.index&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>route:list</code> command, which is used to view all routes:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./artisan route:list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="testing-supports-creating-cache-image" tabindex="-1"><a class="header-anchor" href="#testing-supports-creating-cache-image"><span>Testing supports creating Cache image</span></a></h3><p>Add the <code>Cache</code> method, which is used to create Cache image:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">cache<span class="token punctuation">,</span> err <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Testing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Docker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="different-jwt-guard-supports-different-configurations" tabindex="-1"><a class="header-anchor" href="#different-jwt-guard-supports-different-configurations"><span>Different JWT Guard supports different configurations</span></a></h3><p>Before v1.15, the <code>ttl</code> and <code>secret</code> configuration items of the JWT Guard were global configurations, starting from v1.16, you can set different <code>ttl</code> and <code>secret</code> for different JWT Guards, <a class="route-link" href="/security/authentication.html#different-jwt-guard-supports-different-configurations">View Document</a>.</p><h3 id="serviceprovider-no-longer-depends-on-order" tabindex="-1"><a class="header-anchor" href="#serviceprovider-no-longer-depends-on-order"><span>ServiceProvider no longer depends on order</span></a></h3><p>ServiceProvider adds an optional method <code>Relationship() binding.Relationship</code>, used to declare the dependency relationship of the current ServicerProvider, the ServiceProvider that sets this method will not depend on the registration order, and the ServiceProvider that does not set it will be registered last, for example:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> ServiceProvider <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Relationship</span><span class="token punctuation">(</span><span class="token punctuation">)</span> binding<span class="token punctuation">.</span>Relationship <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> binding<span class="token punctuation">.</span>Relationship<span class="token punctuation">{</span></span>
<span class="line">		Bindings<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			BindingSession<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		Dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			binding<span class="token punctuation">.</span>Config<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		ProvideFor<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			binding<span class="token punctuation">.</span>Cache<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Register</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Boot</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="remove-sql-migration" tabindex="-1"><a class="header-anchor" href="#remove-sql-migration"><span>Remove SQL Migration</span></a></h3><p>SQL migrations have been completely removed, please use Go language migrations. Migration steps:</p><ol><li>Remove the <code>migrations.driver</code> key in <code>config/database.go</code>;</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/database.go</span></span>
<span class="line"><span class="token string">&quot;migrations&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;sql&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;table&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;migrations&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Convert the SQL migration files in the <code>database/migrations</code> directory to Go language migration files:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Up Run the migrations.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>M20241207095921CreateUsersTable<span class="token punctuation">)</span> <span class="token function">Up</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> facades<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Sql</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Original SQL<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Down Reverse the migrations.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>M20241207095921CreateUsersTable<span class="token punctuation">)</span> <span class="token function">Down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> facades<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Sql</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Original SQL<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Register the migration files in the <code>database/kernel.go</code> file;</li></ol><h3 id="optimize-config-moudlue-methods-default-value-type" tabindex="-1"><a class="header-anchor" href="#optimize-config-moudlue-methods-default-value-type"><span>Optimize Config moudlue methods default value type</span></a></h3><p>Before the <code>GetString</code>ã€<code>GetInt</code>ã€<code>GetBool</code> method of the <code>Config</code> module had a default value type of <code>any</code>, starting from v1.16, the default value type is <code>string</code>ã€<code>int</code>ã€<code>bool</code>, to ensure type safety.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token operator">--</span> <span class="token function">GetString</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span>any<span class="token punctuation">)</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">GetString</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">GetInt</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span>any<span class="token punctuation">)</span> <span class="token builtin">int</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">GetInt</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">GetBool</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span>any<span class="token punctuation">)</span> <span class="token builtin">bool</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">GetBool</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token builtin">bool</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-orm-methods" tabindex="-1"><a class="header-anchor" href="#optimize-orm-methods"><span>Optimize Orm methods</span></a></h3><ul><li>Optimize the return value of the <code>Count</code>, <code>Exists</code> method:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token operator">--</span> <span class="token function">Count</span><span class="token punctuation">(</span>count <span class="token operator">*</span><span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int64</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">Distinct</span><span class="token punctuation">(</span>args <span class="token operator">...</span>any<span class="token punctuation">)</span> Query</span>
<span class="line"><span class="token operator">++</span> <span class="token function">Distinct</span><span class="token punctuation">(</span>columns <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> Query</span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">Exists</span><span class="token punctuation">(</span>exists <span class="token operator">*</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">Exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">Select</span><span class="token punctuation">(</span>query any<span class="token punctuation">,</span> args <span class="token operator">...</span>any<span class="token punctuation">)</span> Query</span>
<span class="line"><span class="token operator">++</span> <span class="token function">Select</span><span class="token punctuation">(</span>columns <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> Query</span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">Sum</span><span class="token punctuation">(</span>column <span class="token builtin">string</span><span class="token punctuation">,</span> dest any<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">Sum</span><span class="token punctuation">(</span>column <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int64</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The <code>Where</code> method supports closures:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Orm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>query orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FindOrFail</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// SELECT * FROM users WHERE id = 100 AND (height = 180 AND age = 18);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-path-methods" tabindex="-1"><a class="header-anchor" href="#optimize-path-methods"><span>Optimize Path methods</span></a></h3><ul><li>Add the <code>Resource</code> method</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">path<span class="token punctuation">.</span><span class="token function">Resource</span><span class="token punctuation">(</span><span class="token string">&quot;views/welcome.tmpl&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>The <code>path</code> method returns the absolute path</li></ul><p>Before the <code>path</code> method returned the relative path of the root directory, for example, <code>path.Config(&quot;app.go&quot;) == config/app.go</code>. Starting from v1.16, the <code>path</code> method returns the absolute path, for example, <code>path.Config(&quot;app.go&quot;) == /Users/goravel/workspace/goravel/config/app.go</code>.</p><h3 id="optimize-request-methods" tabindex="-1"><a class="header-anchor" href="#optimize-request-methods"><span>Optimize Request methods</span></a></h3><ol><li>Modify the default value type of the <code>InputMap</code> method:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token operator">--</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputMap</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span></span>
<span class="line"><span class="token operator">++</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputMap</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Add the <code>InputMapArray</code> method, which is used to get the array type of Map:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputMapArray</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>Add the <code>Files</code> method, which is used to get multiple files:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Files</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>filesystem<span class="token punctuation">.</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="optimize-console-confirm-methods" tabindex="-1"><a class="header-anchor" href="#optimize-console-confirm-methods"><span>Optimize console Confirm methods</span></a></h3><p>Modify the return value of the <code>Confirm</code> method, simplifying the judgment logic:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token operator">--</span> <span class="token function">Confirm</span><span class="token punctuation">(</span>question <span class="token builtin">string</span><span class="token punctuation">,</span> option <span class="token operator">...</span>ConfirmOption<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">++</span> <span class="token function">Confirm</span><span class="token punctuation">(</span>question <span class="token builtin">string</span><span class="token punctuation">,</span> option <span class="token operator">...</span>ConfirmOption<span class="token punctuation">)</span> <span class="token builtin">bool</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-session-custom-driver" tabindex="-1"><a class="header-anchor" href="#optimize-session-custom-driver"><span>Optimize Session custom driver</span></a></h3><p>Before, you needed to register the driver through the <code>facades.Session().Extend</code> method. Starting from v1.16, you only need to add it to the <code>config/session.go</code> configuration file:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// app/providers/app_service_provider.go</span></span>
<span class="line"><span class="token operator">--</span> facades<span class="token punctuation">.</span><span class="token function">Session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Extend</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span>Driver <span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>   <span class="token keyword">return</span> <span class="token operator">&amp;</span>RedisDriver<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">--</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// config/session.go</span></span>
<span class="line"><span class="token string">&quot;drivers&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;redis&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>session<span class="token punctuation">.</span>Driver<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token operator">&amp;</span>RedisDriver<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a class="route-link" href="/the-basics/session.html#add-custom-session-driver">View Document</a></p><h3 id="optimize-testing-request-methods" tabindex="-1"><a class="header-anchor" href="#optimize-testing-request-methods"><span>Optimize Testing.Request methods</span></a></h3><p>Optimize the parameters of the <code>WithCookies</code> and <code>WithCookie</code> methods:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token operator">--</span> <span class="token function">WithCookies</span><span class="token punctuation">(</span>cookies <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> Request</span>
<span class="line"><span class="token operator">++</span> <span class="token function">WithCookies</span><span class="token punctuation">(</span>cookies <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>http<span class="token punctuation">.</span>Cookie<span class="token punctuation">)</span> Request</span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> <span class="token function">WithCookie</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> Request</span>
<span class="line"><span class="token operator">++</span> <span class="token function">WithCookie</span><span class="token punctuation">(</span>cookie <span class="token operator">*</span>http<span class="token punctuation">.</span>Cookie<span class="token punctuation">)</span> Request</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-carbon-methods" tabindex="-1"><a class="header-anchor" href="#optimize-carbon-methods"><span>Optimize Carbon methods</span></a></h3><p>Previously, the <code>carbon.NewDateTime</code>, etc. methods return a struct instance, starting from v1.16, it returns a pointer, if you define the <code>carbon.DateTime</code> type, etc., you need to modify it to <code>*carbon.DateTime</code> etc. pointer type.</p><h3 id="optimize-queue-module-configuration" tabindex="-1"><a class="header-anchor" href="#optimize-queue-module-configuration"><span>Optimize Queue module configuration</span></a></h3><p>Before v1.15, the Redis driver of the Queue module was implemented using <a href="https://github.com/RichardKnop/machinery" target="_blank" rel="noopener noreferrer">RichardKnop/machinery</a>. Starting from v1.16, the Redis driver is officially supported in <a href="https://github.com/goravel/redis" target="_blank" rel="noopener noreferrer">goravel/redis</a>.</p><p>You can still use the Machinery driver in v1.16, but it will be removed in v1.17, it is recommended to use the Redis driver. The following provides two upgrade methods:</p><h4 id="continue-using-machinery-driver" tabindex="-1"><a class="header-anchor" href="#continue-using-machinery-driver"><span>Continue using Machinery driver</span></a></h4><p>Modify the configuration in the <code>config/queue.go</code> file:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/queue.go</span></span>
<span class="line"><span class="token string">&quot;connections&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">...</span></span>
<span class="line">  <span class="token string">&quot;redis&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;machinery&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;queue&quot;</span><span class="token punctuation">:</span>      config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;REDIS_QUEUE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="use-redis-queue-driver" tabindex="-1"><a class="header-anchor" href="#use-redis-queue-driver"><span>Use Redis queue driver</span></a></h4><p>Modify the configuration in the <code>config/queue.go</code> file:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/queue.go</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/contracts/queue&quot;</span></span>
<span class="line">  redisfacades <span class="token string">&quot;github.com/goravel/redis/facades&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&quot;connections&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">...</span></span>
<span class="line">  <span class="token string">&quot;redis&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span>     <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;queue&quot;</span><span class="token punctuation">:</span>      config<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token string">&quot;REDIS_QUEUE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>Driver<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">++</span>    <span class="token keyword">return</span> redisfacades<span class="token punctuation">.</span><span class="token function">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span> <span class="token comment">// The ` + &quot;`redis`&quot; + ` value is the key of ` + &quot;`connections`&quot; + `</span></span>
<span class="line"><span class="token operator">++</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The new Redis queue driver and the original machinery queue driver tasks are stored in the same Redis, but use different queue names. Even if you switch to the new Redis queue driver, the framework will continue to read the original Machinery queue driver tasks until all tasks in Machinery are completed. At the same time, the new queue tasks are no longer written to the Machinery queue, but written to the new Redis queue, and consumed by the new Redis queue driver. To achieve seamless switching between two drivers.</p><p>You can check the data of the two drivers in Redis to see if they are correctly written and consumed:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">redis-cli</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Get all keys in Redis</span></span>
<span class="line">keys</span>
<span class="line"></span>
<span class="line"><span class="token comment"># View Machinery queue driver data (replace {} with the value)</span></span>
<span class="line">LRANGE <span class="token punctuation">{</span>app_name<span class="token punctuation">}</span>_queues:<span class="token punctuation">{</span>queue_name<span class="token punctuation">}</span> <span class="token number">0</span> <span class="token parameter variable">-1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># View Redis queue driver data (replace {} with the value)</span></span>
<span class="line">LRANGE <span class="token punctuation">{</span>app_name<span class="token punctuation">}</span>_queues:<span class="token punctuation">{</span>connection<span class="token punctuation">}</span>_<span class="token punctuation">{</span>queue<span class="token punctuation">}</span> <span class="token number">0</span> <span class="token parameter variable">-1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/goravel/goravel/edit/master/upgrade/v1.16.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/upgrade/v1.15.html" aria-label="Upgrading To v1.15 From v1.14"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Upgrading To v1.15 From v1.14</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DmrjGHX8.js" defer></script>
  </body>
</html>
