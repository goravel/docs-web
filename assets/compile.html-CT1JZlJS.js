import{_ as r,c as p,b as a,e as n,f as i,a as c,r as t,o as d,d as l}from"./app-DQ3rv3ev.js";const m={},u={class:"table-of-contents"};function h(v,e){const s=t("router-link"),o=t("CommentService");return d(),p("div",null,[e[9]||(e[9]=a("h1",{id:"compile",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#compile"},[a("span",null,"Compile")])],-1)),a("nav",u,[a("ul",null,[a("li",null,[n(s,{to:"#compile-command"},{default:i(()=>e[0]||(e[0]=[l("Compile command")])),_:1})]),a("li",null,[n(s,{to:"#manual-compilation"},{default:i(()=>e[1]||(e[1]=[l("Manual compilation")])),_:1}),a("ul",null,[a("li",null,[n(s,{to:"#regular-compilation"},{default:i(()=>e[2]||(e[2]=[l("Regular compilation")])),_:1})]),a("li",null,[n(s,{to:"#static-compilation"},{default:i(()=>e[3]||(e[3]=[l("Static compilation")])),_:1})]),a("li",null,[n(s,{to:"#cross-compile"},{default:i(()=>e[4]||(e[4]=[l("Cross compile")])),_:1})])])]),a("li",null,[n(s,{to:"#docker"},{default:i(()=>e[5]||(e[5]=[l("Docker")])),_:1}),a("ul",null,[a("li",null,[n(s,{to:"#docker-compose"},{default:i(()=>e[6]||(e[6]=[l("Docker Compose")])),_:1})])])]),a("li",null,[n(s,{to:"#set-timezone"},{default:i(()=>e[7]||(e[7]=[l("Set timezone")])),_:1})]),a("li",null,[n(s,{to:"#reduce-package-size"},{default:i(()=>e[8]||(e[8]=[l("Reduce package size")])),_:1})])])]),e[10]||(e[10]=c(`<h2 id="compile-command" tabindex="-1"><a class="header-anchor" href="#compile-command"><span>Compile command</span></a></h2><p>The Goravel project can be compiled with the following command:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">// Select the system to compile</span>
<span class="line">go run . artisan build</span>
<span class="line"></span>
<span class="line">// Specify the system to compile</span>
<span class="line">go run . artisan build --os=linux</span>
<span class="line">go run . artisan build -o=linux</span>
<span class="line"></span>
<span class="line">// Static compilation</span>
<span class="line">go run . artisan build --static</span>
<span class="line">go run . artisan build -s</span>
<span class="line"></span>
<span class="line">// Specify the output file name</span>
<span class="line">go run . artisan build --name=goravel</span>
<span class="line">go run . artisan build -n=goravel</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="manual-compilation" tabindex="-1"><a class="header-anchor" href="#manual-compilation"><span>Manual compilation</span></a></h2><h3 id="regular-compilation" tabindex="-1"><a class="header-anchor" href="#regular-compilation"><span>Regular compilation</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go build <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="deploy-server" tabindex="-1"><a class="header-anchor" href="#deploy-server"><span>Deploy Server</span></a></h4><p>The Following files and folders need to be uploaded to the server during deployment:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">./main // Compile the resulting binary file</span>
<span class="line">.env</span>
<span class="line">./public</span>
<span class="line">./storage</span>
<span class="line">./resources</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="static-compilation" tabindex="-1"><a class="header-anchor" href="#static-compilation"><span>Static compilation</span></a></h3><p>The package by regular compilation also needs to rely on the support of the deployment environment, the statically compiled files can be freely put to run on the specified platform without environment configuration.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go build <span class="token parameter variable">--ldflags</span> <span class="token string">&quot;-extldflags -static&quot;</span> <span class="token parameter variable">-o</span> main <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="cross-compile" tabindex="-1"><a class="header-anchor" href="#cross-compile"><span>Cross compile</span></a></h3><p>Compilation is differentiated by platform, you need to select a matching compilation method according to the deployment situation.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">// Compile Linux environment</span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line">// Compile Windows environment</span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line">// Compile Mac environment</span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h2><p>Goravel has a default <code>Dockerfile</code> and <code>docker-compose.yml</code> file, you can use it directly, note that <code>APP_HOST</code> should be <code>0.0.0.0</code> at this time.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> build <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose"><span>Docker Compose</span></a></h3><p>You can also quickly start the service with the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> build</span>
<span class="line"><span class="token function">docker-compose</span> up</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note: If you need external access, you need to change APP_HOST to 0.0.0.0</p></blockquote><h2 id="set-timezone" tabindex="-1"><a class="header-anchor" href="#set-timezone"><span>Set timezone</span></a></h2><p>When the <code>app.timezone</code> configuration is not <code>UTC</code>, you need to set the timezone to the application during compilation. You can choose any of the following three methods:</p><ol><li>Add timezone settings in Dockerfile</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">RUN apk add tzdata &amp;&amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>Set timezone during compilation</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go build -tags timetzdata .</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>Import timezone in <code>main.go</code></li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">import</span> <span class="token punctuation">(</span></span>
<span class="line">    _ <span class="token string">&quot;time/tzdata&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reduce-package-size" tabindex="-1"><a class="header-anchor" href="#reduce-package-size"><span>Reduce package size</span></a></h2><p>Commenting out the unused <code>ServiceProvider</code> in <code>config/app.go::providers</code> will effectively reduce the packaging volume.</p>`,32)),n(o)])}const b=r(m,[["render",h],["__file","compile.html.vue"]]),k=JSON.parse('{"path":"/getting-started/compile.html","title":"Compile","lang":"en-US","frontmatter":{"description":"Compile Compile command The Goravel project can be compiled with the following command: Manual compilation Regular compilation Deploy Server The Following files and folders need...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goravel.dev/zh/getting-started/compile.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/getting-started/compile.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/getting-started/compile.html"}],["meta",{"property":"og:description","content":"Compile Compile command The Goravel project can be compiled with the following command: Manual compilation Regular compilation Deploy Server The Following files and folders need..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Compile\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Compile command","slug":"compile-command","link":"#compile-command","children":[]},{"level":2,"title":"Manual compilation","slug":"manual-compilation","link":"#manual-compilation","children":[{"level":3,"title":"Regular compilation","slug":"regular-compilation","link":"#regular-compilation","children":[]},{"level":3,"title":"Static compilation","slug":"static-compilation","link":"#static-compilation","children":[]},{"level":3,"title":"Cross compile","slug":"cross-compile","link":"#cross-compile","children":[]}]},{"level":2,"title":"Docker","slug":"docker","link":"#docker","children":[{"level":3,"title":"Docker Compose","slug":"docker-compose","link":"#docker-compose","children":[]}]},{"level":2,"title":"Set timezone","slug":"set-timezone","link":"#set-timezone","children":[]},{"level":2,"title":"Reduce package size","slug":"reduce-package-size","link":"#reduce-package-size","children":[]}],"git":{},"filePathRelative":"getting-started/compile.md","autoDesc":true}');export{b as comp,k as data};
