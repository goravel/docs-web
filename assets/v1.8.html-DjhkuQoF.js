import{_ as p,c as u,b as n,e as s,f as t,a as o,d as a,r,o as m}from"./app-CkrpkKpR.js";const c={},g={class:"table-of-contents"};function h(v,e){const i=r("router-link"),l=r("RouteLink"),d=r("CommentService");return m(),u("div",null,[e[43]||(e[43]=n("h1",{id:"upgrading-to-v1-8-from-v1-7",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#upgrading-to-v1-8-from-v1-7"},[n("span",null,"Upgrading To v1.8 From v1.7")])],-1)),n("nav",g,[n("ul",null,[n("li",null,[s(i,{to:"#exciting-new-features-ğŸ‰"},{default:t(()=>e[0]||(e[0]=[a("Exciting New Features ğŸ‰")])),_:1})]),n("li",null,[s(i,{to:"#enhancements-ğŸš€"},{default:t(()=>e[1]||(e[1]=[a("Enhancements ğŸš€")])),_:1})]),n("li",null,[s(i,{to:"#breaking-changes-ğŸ› "},{default:t(()=>e[2]||(e[2]=[a("Breaking Changes ğŸ› ")])),_:1})]),n("li",null,[s(i,{to:"#bug-fixes-ğŸ›"},{default:t(()=>e[3]||(e[3]=[a("Bug Fixes ğŸ›")])),_:1})]),n("li",null,[s(i,{to:"#upgrade-guide"},{default:t(()=>e[4]||(e[4]=[a("Upgrade Guide")])),_:1}),n("ul",null,[n("li",null,[s(i,{to:"#updating-dependencies"},{default:t(()=>e[5]||(e[5]=[a("Updating Dependencies")])),_:1})]),n("li",null,[s(i,{to:"#add-model-association-for-orm"},{default:t(()=>e[6]||(e[6]=[a("Add model association for Orm")])),_:1})]),n("li",null,[s(i,{to:"#add-methods-for-request"},{default:t(()=>e[7]||(e[7]=[a("Add methods for Request")])),_:1})]),n("li",null,[s(i,{to:"#add-methods-for-response"},{default:t(()=>e[8]||(e[8]=[a("Add-methods-for-Response")])),_:1})]),n("li",null,[s(i,{to:"#optimize-import-order"},{default:t(()=>e[9]||(e[9]=[a("Optimize import order")])),_:1})]),n("li",null,[s(i,{to:"#optimize-database-migrate"},{default:t(()=>e[10]||(e[10]=[a("Optimize database migrate")])),_:1})]),n("li",null,[s(i,{to:"#mock-validator-change-name"},{default:t(()=>e[11]||(e[11]=[a("mock.Validator Change Name")])),_:1})]),n("li",null,[s(i,{to:"#support-mysql-change-name"},{default:t(()=>e[12]||(e[12]=[a("support.Mysql Change Name")])),_:1})]),n("li",null,[s(i,{to:"#database-newgorminstance-is-about-to-be-deprecated"},{default:t(()=>e[13]||(e[13]=[a("database.NewGormInstance is about to be deprecated")])),_:1})]),n("li",null,[s(i,{to:"#fix-orm-concurrency-safety-issue"},{default:t(()=>e[14]||(e[14]=[a("Fix Orm concurrency safety issue")])),_:1})]),n("li",null,[s(i,{to:"#fix-mail-module-can-t-send-mail-by-25-and-465-ports"},{default:t(()=>e[15]||(e[15]=[a("Fix Mail module can't send mail by 25 and 465 ports")])),_:1})]),n("li",null,[s(i,{to:"#route-supports-https"},{default:t(()=>e[16]||(e[16]=[a("Route supports HTTPS")])),_:1})])])])])]),e[44]||(e[44]=o(`<h2 id="exciting-new-features-ğŸ‰" tabindex="-1"><a class="header-anchor" href="#exciting-new-features-ğŸ‰"><span>Exciting New Features ğŸ‰</span></a></h2><ul><li><a href="#add-model-association-for-orm">Add model association for Orm(1.8.0)</a></li></ul><h2 id="enhancements-ğŸš€" tabindex="-1"><a class="header-anchor" href="#enhancements-ğŸš€"><span>Enhancements ğŸš€</span></a></h2><ul><li><a href="#add-methods-for-request">Add methods for Request(1.8.0)</a></li><li><a href="#add-methods-for-response">Add methods for Response(1.8.0)</a></li><li><a href="#optimize-database-migrate">Optimize database migrate(1.8.0)</a></li><li><a href="#route-supports-https">Route supports HTTPS(1.8.3)</a></li></ul><h2 id="breaking-changes-ğŸ› " tabindex="-1"><a class="header-anchor" href="#breaking-changes-ğŸ› "><span>Breaking Changes ğŸ› </span></a></h2><ul><li><a href="#optimize-import-order">Optimize import order(1.8.0)</a></li><li><a href="#mock-validator-change-Name">mock.Validator change name(1.8.0)</a></li><li><a href="#support-mysql-change-name">support.Mysql change name(1.8.0)</a></li><li><a href="#database-newgorminstance-is-about-to-be-deprecated">database.NewGormInstance is about to be deprecated(1.8.0)</a></li></ul><h2 id="bug-fixes-ğŸ›" tabindex="-1"><a class="header-anchor" href="#bug-fixes-ğŸ›"><span>Bug Fixes ğŸ›</span></a></h2><ul><li><a href="#fix-Orm-concurrency-safety-issue">Fix Orm concurrency safety issue(1.8.1)</a></li><li><a href="#fix-mail-module-can-t-send-mail-by-25-and-465-ports">Fix Mail module can&#39;t send mail by 25 and 465 ports(1.8.2)</a></li></ul><h2 id="upgrade-guide" tabindex="-1"><a class="header-anchor" href="#upgrade-guide"><span>Upgrade Guide</span></a></h2><p><strong>Estimated Upgrade Time: 1 Minutes</strong></p><h3 id="updating-dependencies" tabindex="-1"><a class="header-anchor" href="#updating-dependencies"><span>Updating Dependencies</span></a></h3><p>Update dependencies in the <code>go.mod</code> file:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go get -u github.com/goravel/framework@v1.8.3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="add-model-association-for-orm" tabindex="-1"><a class="header-anchor" href="#add-model-association-for-orm"><span>Add model association for Orm</span></a></h3><p>Version: v1.8.0</p><p>Add methods for Orm, to handle model association:</p>`,16)),n("table",null,[e[29]||(e[29]=n("thead",null,[n("tr",null,[n("th",null,"Method"),n("th",null,"Action")])],-1)),n("tbody",null,[n("tr",null,[e[18]||(e[18]=n("td",null,"Association",-1)),n("td",null,[s(l,{to:"/orm/relationships.html#querying-associations"},{default:t(()=>e[17]||(e[17]=[a("Association")])),_:1})])]),n("tr",null,[e[20]||(e[20]=n("td",null,"DB",-1)),n("td",null,[s(l,{to:"/orm/getting-started.html#generic-database-interface-sqldb"},{default:t(()=>e[19]||(e[19]=[a("Generic Database Interface sql.DB")])),_:1})])]),n("tr",null,[e[22]||(e[22]=n("td",null,"Load",-1)),n("td",null,[s(l,{to:"/orm/relationships.html#lazy-eager-loading"},{default:t(()=>e[21]||(e[21]=[a("Lazy Eager Loading")])),_:1})])]),n("tr",null,[e[24]||(e[24]=n("td",null,"LoadMissing",-1)),n("td",null,[s(l,{to:"/orm/relationships.html#lazy-eager-loading"},{default:t(()=>e[23]||(e[23]=[a("Lazy Eager Loading(not exist)")])),_:1})])]),n("tr",null,[e[26]||(e[26]=n("td",null,"Omit",-1)),n("td",null,[s(l,{to:"/orm/relationships.html#create-or-update-associations"},{default:t(()=>e[25]||(e[25]=[a("Omit associations")])),_:1})])]),n("tr",null,[e[28]||(e[28]=n("td",null,"With",-1)),n("td",null,[s(l,{to:"/orm/relationships.html#Eager-Loading"},{default:t(()=>e[27]||(e[27]=[a("Eager Loading")])),_:1})])])])]),e[45]||(e[45]=n("h3",{id:"add-methods-for-request",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#add-methods-for-request"},[n("span",null,"Add methods for Request")])],-1)),e[46]||(e[46]=n("p",null,"Version: v1.8.0",-1)),e[47]||(e[47]=n("p",null,[a("Add methods for "),n("code",null,"ctx.Request()"),a(", to enrich the format of "),n("code",null,"Query"),a(" parameters:")],-1)),n("table",null,[e[34]||(e[34]=n("thead",null,[n("tr",null,[n("th",null,"Method"),n("th",null,"Action")])],-1)),n("tbody",null,[n("tr",null,[e[31]||(e[31]=n("td",null,[n("code",null,"QueryArray")],-1)),n("td",null,[s(l,{to:"/the-basics/request.html#Retrieving-Input-From-The-Query-String"},{default:t(()=>e[30]||(e[30]=[a("Get the array parameters")])),_:1})])]),n("tr",null,[e[33]||(e[33]=n("td",null,[n("code",null,"QueryMap")],-1)),n("td",null,[s(l,{to:"/the-basics/request.html#Retrieving-Input-From-The-Query-String"},{default:t(()=>e[32]||(e[32]=[a("Get the map parameters")])),_:1})])])])]),e[48]||(e[48]=n("h3",{id:"add-methods-for-response",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#add-methods-for-response"},[n("span",null,"Add-methods-for-Response")])],-1)),e[49]||(e[49]=n("p",null,"Version: v1.8.0",-1)),e[50]||(e[50]=n("p",null,[a("Add "),n("code",null,"Origin"),a(" method to "),n("code",null,"ctx.Response()"),a(", you can get all information of "),n("code",null,"Response"),a(" in the HTTP middleware.")],-1)),n("p",null,[s(l,{to:"/the-basics/response.html#Get-Response"},{default:t(()=>e[35]||(e[35]=[a("Detail")])),_:1})]),e[51]||(e[51]=o(`<h3 id="optimize-import-order" tabindex="-1"><a class="header-anchor" href="#optimize-import-order"><span>Optimize import order</span></a></h3><p>Version: v1.8.0</p><p>The import order in the <code>bootstrap/app.go</code> file change to:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> bootstrap</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/foundation&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token string">&quot;goravel/config&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://github.com/goravel/goravel/blob/v1.8.0/bootstrap/app.go" target="_blank" rel="noopener noreferrer">The File</a></p><h3 id="optimize-database-migrate" tabindex="-1"><a class="header-anchor" href="#optimize-database-migrate"><span>Optimize database migrate</span></a></h3><p>Version: v1.8.0</p><p>Run the command that generate the migrate file: <code>go run . artisan make:migration create_users_table</code>, the corresponding migration file will be generated based on the default database driver currently in use(<code>facades.Config.GetString(&quot;database.default&quot;)</code>).</p><h3 id="mock-validator-change-name" tabindex="-1"><a class="header-anchor" href="#mock-validator-change-name"><span>mock.Validator Change Name</span></a></h3><p>Version: v1.8.0</p><p>If you use <code>mock.Validator</code> to write unit tests, the following modifications are required:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">import &quot;github.com/goravel/framework/testing/mock&quot;</span>
<span class="line"></span>
<span class="line">mock.Validator</span>
<span class="line"></span>
<span class="line">// Modify to</span>
<span class="line"></span>
<span class="line">import &quot;github.com/goravel/framework/testing/mock&quot;</span>
<span class="line"></span>
<span class="line">mock.Validation</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12)),n("p",null,[s(l,{to:"/testing/mock.html#Mock-facades.Validation"},{default:t(()=>e[36]||(e[36]=[a("Detail")])),_:1})]),e[52]||(e[52]=o(`<h3 id="support-mysql-change-name" tabindex="-1"><a class="header-anchor" href="#support-mysql-change-name"><span>support.Mysql Change Name</span></a></h3><p>Version: v1.8.0</p><p>If you use framework constants such as <code>support.Mysql</code> to judge the database driver, you need to make the following modifications:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/database/support&quot;</span></span>
<span class="line"></span>
<span class="line">support<span class="token punctuation">.</span>Mysql</span>
<span class="line">support<span class="token punctuation">.</span>Postgresql</span>
<span class="line">support<span class="token punctuation">.</span>Sqlite</span>
<span class="line">support<span class="token punctuation">.</span>Sqlserver</span>
<span class="line"></span>
<span class="line"><span class="token comment">// Modify to</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/contracts/database/orm&quot;</span></span>
<span class="line"></span>
<span class="line">orm<span class="token punctuation">.</span>Mysql</span>
<span class="line">orm<span class="token punctuation">.</span>Postgresql</span>
<span class="line">orm<span class="token punctuation">.</span>Sqlite</span>
<span class="line">orm<span class="token punctuation">.</span>Sqlserver</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The new constants such as <code>orm.Mysql</code> are of type <code>orm.Driver</code> and can be converted to a string type using the <code>orm.Mysql.String()</code> method.</p><h3 id="database-newgorminstance-is-about-to-be-deprecated" tabindex="-1"><a class="header-anchor" href="#database-newgorminstance-is-about-to-be-deprecated"><span>database.NewGormInstance is about to be deprecated</span></a></h3><p>Version: v1.8.0</p><p>The <code>database.NewGormInstance</code> method will be deprecated in v1.9.0 version, it can be used in current version, if you use the method to get the <code>gorm</code> instance, the following modifications are required:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/database&quot;</span></span>
<span class="line"></span>
<span class="line">gorm<span class="token punctuation">,</span> err <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">NewGormInstance</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Modify to</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/database/gorm&quot;</span></span>
<span class="line"></span>
<span class="line">gorm<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fix-orm-concurrency-safety-issue" tabindex="-1"><a class="header-anchor" href="#fix-orm-concurrency-safety-issue"><span>Fix Orm concurrency safety issue</span></a></h3><p>Version: v1.8.1</p><p>When high concurrent access, reading <code>facades.Orm</code> for the first time may return nil.</p><h3 id="fix-mail-module-can-t-send-mail-by-25-and-465-ports" tabindex="-1"><a class="header-anchor" href="#fix-mail-module-can-t-send-mail-by-25-and-465-ports"><span>Fix Mail module can&#39;t send mail by 25 and 465 ports</span></a></h3><p>Version: v1.8.2</p><p>You can send mail by 25, 465, 587 ports now.</p><h3 id="route-supports-https" tabindex="-1"><a class="header-anchor" href="#route-supports-https"><span>Route supports HTTPS</span></a></h3><p>Version: v1.8.3</p>`,17)),n("p",null,[e[38]||(e[38]=n("code",null,"facades.Route",-1)),e[39]||(e[39]=a(" Add ")),e[40]||(e[40]=n("code",null,"RunTLS",-1)),e[41]||(e[41]=a(" methodï¼Œsupport start HTTPS server, ")),s(l,{to:"/the-basics/routing.html#start-https-server"},{default:t(()=>e[37]||(e[37]=[a("For Detail")])),_:1}),e[42]||(e[42]=a("."))]),s(d)])}const b=p(c,[["render",h],["__file","v1.8.html.vue"]]),k=JSON.parse(`{"path":"/upgrade/v1.8.html","title":"Upgrading To v1.8 From v1.7","lang":"en-US","frontmatter":{"description":"Upgrading To v1.8 From v1.7 Exciting New Features ğŸ‰ Add model association for Orm(1.8.0) Enhancements ğŸš€ Add methods for Request(1.8.0) Add methods for Response(1.8.0) Optimize...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goravel.dev/zh/upgrade/v1.8.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/upgrade/v1.8.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/upgrade/v1.8.html"}],["meta",{"property":"og:description","content":"Upgrading To v1.8 From v1.7 Exciting New Features ğŸ‰ Add model association for Orm(1.8.0) Enhancements ğŸš€ Add methods for Request(1.8.0) Add methods for Response(1.8.0) Optimize..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Upgrading To v1.8 From v1.7\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Exciting New Features ğŸ‰","slug":"exciting-new-features-ğŸ‰","link":"#exciting-new-features-ğŸ‰","children":[]},{"level":2,"title":"Enhancements ğŸš€","slug":"enhancements-ğŸš€","link":"#enhancements-ğŸš€","children":[]},{"level":2,"title":"Breaking Changes ğŸ› ","slug":"breaking-changes-ğŸ› ","link":"#breaking-changes-ğŸ› ","children":[]},{"level":2,"title":"Bug Fixes ğŸ›","slug":"bug-fixes-ğŸ›","link":"#bug-fixes-ğŸ›","children":[]},{"level":2,"title":"Upgrade Guide","slug":"upgrade-guide","link":"#upgrade-guide","children":[{"level":3,"title":"Updating Dependencies","slug":"updating-dependencies","link":"#updating-dependencies","children":[]},{"level":3,"title":"Add model association for Orm","slug":"add-model-association-for-orm","link":"#add-model-association-for-orm","children":[]},{"level":3,"title":"Add methods for Request","slug":"add-methods-for-request","link":"#add-methods-for-request","children":[]},{"level":3,"title":"Add-methods-for-Response","slug":"add-methods-for-response","link":"#add-methods-for-response","children":[]},{"level":3,"title":"Optimize import order","slug":"optimize-import-order","link":"#optimize-import-order","children":[]},{"level":3,"title":"Optimize database migrate","slug":"optimize-database-migrate","link":"#optimize-database-migrate","children":[]},{"level":3,"title":"mock.Validator Change Name","slug":"mock-validator-change-name","link":"#mock-validator-change-name","children":[]},{"level":3,"title":"support.Mysql Change Name","slug":"support-mysql-change-name","link":"#support-mysql-change-name","children":[]},{"level":3,"title":"database.NewGormInstance is about to be deprecated","slug":"database-newgorminstance-is-about-to-be-deprecated","link":"#database-newgorminstance-is-about-to-be-deprecated","children":[]},{"level":3,"title":"Fix Orm concurrency safety issue","slug":"fix-orm-concurrency-safety-issue","link":"#fix-orm-concurrency-safety-issue","children":[]},{"level":3,"title":"Fix Mail module can't send mail by 25 and 465 ports","slug":"fix-mail-module-can-t-send-mail-by-25-and-465-ports","link":"#fix-mail-module-can-t-send-mail-by-25-and-465-ports","children":[]},{"level":3,"title":"Route supports HTTPS","slug":"route-supports-https","link":"#route-supports-https","children":[]}]}],"git":{},"filePathRelative":"upgrade/v1.8.md","autoDesc":true}`);export{b as comp,k as data};
