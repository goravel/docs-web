import{_ as c,r as o,o as l,c as p,a as n,b as a,w as e,e as u,d as t}from"./app-ClnRftAW.js";const d={},r=n("h1",{id:"artisan-console",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#artisan-console"},[n("span",null,"Artisan Console")])],-1),m={class:"table-of-contents"},k=u(`<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><p>Artisan is the CLI tool that comes with Goravel for interacting with the command line. You can access it using <code>facades.Artisan()</code>. This tool has several useful commands that can assist you in the development of your application. Utilize the following command to view all available commands.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go run <span class="token builtin class-name">.</span> artisan list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Each command also has a &quot;help&quot; feature that shows and explains the arguments and options associated with the command. To see the help screen, just add &quot;help&quot; before the command name.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go run <span class="token builtin class-name">.</span> artisan <span class="token builtin class-name">help</span> migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Instead of repeating <code>go run . artisan ...</code> command, you may want to add an alias to your shell configuration with the terminal command below:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span><span class="token entity" title="\\n">\\n</span>alias artisan=<span class="token entity" title="\\&quot;">\\&quot;</span>go run . artisan<span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span>~/.zshrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Then you can simply run your commands like this:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>artisan make:controller DemoController
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="generating-commands" tabindex="-1"><a class="header-anchor" href="#generating-commands"><span>Generating Commands</span></a></h3><p>You can use the <code>make:command</code> command to create a new command in the <code>app/console/commands</code> directory. Don&#39;t worry if this directory does not exist in your application, it will be created the first time you run the <code>make:command</code> command:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go run <span class="token builtin class-name">.</span> artisan make:command SendEmails
go run <span class="token builtin class-name">.</span> artisan make:command user/SendEmails
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="command-structure" tabindex="-1"><a class="header-anchor" href="#command-structure"><span>Command Structure</span></a></h3><p>After generating your command, assign suitable values to the signature and description properties of the struct. The <code>Handle</code> method will be called when your command is executed. You need to implement your logic in this method.</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> commands

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;github.com/goravel/framework/contracts/console&quot;</span>
  <span class="token string">&quot;github.com/goravel/framework/contracts/console/command&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> SendEmails <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// Signature The name and signature of the console command.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>SendEmails<span class="token punctuation">)</span> <span class="token function">Signature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;send:emails&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Description The console command description.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>SendEmails<span class="token punctuation">)</span> <span class="token function">Description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Send emails&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Extend The console command extend.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>SendEmails<span class="token punctuation">)</span> <span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> command<span class="token punctuation">.</span>Extend <span class="token punctuation">{</span>
  <span class="token keyword">return</span> command<span class="token punctuation">.</span>Extend<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Handle Execute the console command.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>SendEmails<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span>ctx console<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="defining-input-expectations" tabindex="-1"><a class="header-anchor" href="#defining-input-expectations"><span>Defining Input Expectations</span></a></h2><p>When you write console commands, it&#39;s typical to collect user input through arguments or options. With Goravel, it&#39;s extremely easy to retrieve the arguments and options that the user provides.</p><h3 id="arguments" tabindex="-1"><a class="header-anchor" href="#arguments"><span>Arguments</span></a></h3><p>Follow the arguments after the command:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go run <span class="token builtin class-name">.</span> artisan send:emails NAME EMAIL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Get arguments:</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>SendEmails<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span>ctx console<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
  name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Argument</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  email <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Argument</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  all <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Arguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>Options</span></a></h3><p>Options, like arguments, are another form of user input. Options are prefixed by two hyphens (--) when they are provided via the command line.</p><p>Definition：</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>ListCommand<span class="token punctuation">)</span> <span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> command<span class="token punctuation">.</span>Extend <span class="token punctuation">{</span>
  <span class="token keyword">return</span> command<span class="token punctuation">.</span>Extend<span class="token punctuation">{</span>
    Flags<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>command<span class="token punctuation">.</span>Flag<span class="token punctuation">{</span>
      <span class="token operator">&amp;</span>command<span class="token punctuation">.</span>StringFlag<span class="token punctuation">{</span>
        Name<span class="token punctuation">:</span>    <span class="token string">&quot;lang&quot;</span><span class="token punctuation">,</span>
        Value<span class="token punctuation">:</span>   <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        Aliases<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;l&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        Usage<span class="token punctuation">:</span>   <span class="token string">&quot;language for the greeting&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Get：</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>ListCommand<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span>ctx console<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
  lang <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Option</span><span class="token punctuation">(</span><span class="token string">&quot;lang&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Usage：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go run <span class="token builtin class-name">.</span> artisan emails <span class="token parameter variable">--lang</span> Chinese
go run <span class="token builtin class-name">.</span> artisan emails <span class="token parameter variable">-l</span> Chinese
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice: When using both arguments and options, define the options before the arguments. Example:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>// Right
go run <span class="token builtin class-name">.</span> artisan emails <span class="token parameter variable">--lang</span> Chinese name
// Wrong
go run <span class="token builtin class-name">.</span> artisan emails name <span class="token parameter variable">--lang</span> Chinese name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Except <code>command.StringFlag</code>, we can also use other type <code>Flag</code> and <code>Option*</code>: <code>StringSliceFlag</code>, <code>BoolFlag</code>, <code>Float64Flag</code>, <code>Float64SliceFlag</code>, <code>IntFlag</code>, <code>IntSliceFlag</code>, <code>Int64Flag</code>, <code>Int64SliceFlag</code>.</p><h3 id="category" tabindex="-1"><a class="header-anchor" href="#category"><span>Category</span></a></h3><p>You can set a set of commands to the same category, convenient in <code>go run . artisan list</code>:</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Extend The console command extend.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>ConsoleMakeCommand<span class="token punctuation">)</span> <span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> command<span class="token punctuation">.</span>Extend <span class="token punctuation">{</span>
  <span class="token keyword">return</span> command<span class="token punctuation">.</span>Extend<span class="token punctuation">{</span>
    Category<span class="token punctuation">:</span> <span class="token string">&quot;make&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="registering-commands" tabindex="-1"><a class="header-anchor" href="#registering-commands"><span>Registering Commands</span></a></h2><p>All of your console commands need to be registered within the <code>Commands</code> function in <code>app\\console\\kernel.go</code>.</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>kernel Kernel<span class="token punctuation">)</span> <span class="token function">Commands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span>Command <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span>Command<span class="token punctuation">{</span>
    <span class="token operator">&amp;</span>commands<span class="token punctuation">.</span>SendEmails<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="programmatically-executing-commands" tabindex="-1"><a class="header-anchor" href="#programmatically-executing-commands"><span>Programmatically Executing Commands</span></a></h2><p>Sometimes you may wish to execute an Artisan command outside of the CLI, you can use the <code>Call</code> method on the <code>facades.Artisan()</code> to operate this.</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code>facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  facades<span class="token punctuation">.</span><span class="token function">Artisan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Call</span><span class="token punctuation">(</span><span class="token string">&quot;emails&quot;</span><span class="token punctuation">)</span>
  facades<span class="token punctuation">.</span><span class="token function">Artisan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Call</span><span class="token punctuation">(</span><span class="token string">&quot;emails --lang Chinese name&quot;</span><span class="token punctuation">)</span> <span class="token comment">// With arguments and options</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,42);function g(v,h){const s=o("router-link"),i=o("CommentService");return l(),p("div",null,[r,n("nav",m,[n("ul",null,[n("li",null,[a(s,{to:"#introduction"},{default:e(()=>[t("Introduction")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#generating-commands"},{default:e(()=>[t("Generating Commands")]),_:1})]),n("li",null,[a(s,{to:"#command-structure"},{default:e(()=>[t("Command Structure")]),_:1})])])]),n("li",null,[a(s,{to:"#defining-input-expectations"},{default:e(()=>[t("Defining Input Expectations")]),_:1}),n("ul",null,[n("li",null,[a(s,{to:"#arguments"},{default:e(()=>[t("Arguments")]),_:1})]),n("li",null,[a(s,{to:"#options"},{default:e(()=>[t("Options")]),_:1})]),n("li",null,[a(s,{to:"#category"},{default:e(()=>[t("Category")]),_:1})])])]),n("li",null,[a(s,{to:"#registering-commands"},{default:e(()=>[t("Registering Commands")]),_:1})]),n("li",null,[a(s,{to:"#programmatically-executing-commands"},{default:e(()=>[t("Programmatically Executing Commands")]),_:1})])])]),k,a(i)])}const f=c(d,[["render",g],["__file","artisan-console.html.vue"]]),y=JSON.parse('{"path":"/digging-deeper/artisan-console.html","title":"Artisan Console","lang":"en-US","frontmatter":{"description":"Artisan Console Introduction Artisan is the CLI tool that comes with Goravel for interacting with the command line. You can access it using facades.Artisan(). This tool has seve...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goravel.dev/zh/digging-deeper/artisan-console.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/digging-deeper/artisan-console.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/digging-deeper/artisan-console.html"}],["meta",{"property":"og:description","content":"Artisan Console Introduction Artisan is the CLI tool that comes with Goravel for interacting with the command line. You can access it using facades.Artisan(). This tool has seve..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Artisan Console\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Introduction","slug":"introduction","link":"#introduction","children":[{"level":3,"title":"Generating Commands","slug":"generating-commands","link":"#generating-commands","children":[]},{"level":3,"title":"Command Structure","slug":"command-structure","link":"#command-structure","children":[]}]},{"level":2,"title":"Defining Input Expectations","slug":"defining-input-expectations","link":"#defining-input-expectations","children":[{"level":3,"title":"Arguments","slug":"arguments","link":"#arguments","children":[]},{"level":3,"title":"Options","slug":"options","link":"#options","children":[]},{"level":3,"title":"Category","slug":"category","link":"#category","children":[]}]},{"level":2,"title":"Registering Commands","slug":"registering-commands","link":"#registering-commands","children":[]},{"level":2,"title":"Programmatically Executing Commands","slug":"programmatically-executing-commands","link":"#programmatically-executing-commands","children":[]}],"git":{},"filePathRelative":"digging-deeper/artisan-console.md","autoDesc":true}');export{f as comp,y as data};
