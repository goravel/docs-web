import{_ as o,c as p,a as l,b as s,e as t,f as i,d as e,r as d,o as r}from"./app-BTZMJqSL.js";const c={};function u(m,n){const a=d("RouteLink");return r(),p("div",null,[n[39]||(n[39]=l(`<h1 id="upgrading-to-v1-16-from-v1-15" tabindex="-1"><a class="header-anchor" href="#upgrading-to-v1-16-from-v1-15"><span>Upgrading To v1.16 From v1.15</span></a></h1><h3 id="exciting-new-features-🎉" tabindex="-1"><a class="header-anchor" href="#exciting-new-features-🎉"><span>Exciting New Features 🎉</span></a></h3><ul><li><a href="#add-facades-db">Add facades.DB()</a></li><li><a href="#add-facades-http">Add facades.Http()</a></li><li><a href="#reconstruct-facades-queue">Reconstruct facades.Queue()</a></li><li><a href="#facades-auth-supports-custom-driver">facades.Auth() supports custom driver</a></li><li><a href="#make-commands-support-automatic-registration">make:* commands support automatic registration</a></li><li><a href="#goravel-installer-supports-selecting-driver">Goravel Installer supports selecting driver</a></li></ul><h3 id="enhancements-🚀" tabindex="-1"><a class="header-anchor" href="#enhancements-🚀"><span>Enhancements 🚀</span></a></h3><ul><li><a href="#split-database-driver">Split Database Driver</a></li><li><a href="#orm-adds-features">Orm adds features</a></li><li><a href="#support-creating-model-based-on-data-table">Support creating Model based on data table</a></li><li><a href="#support-runtime-dynamic-sql-statement">Support runtime dynamic SQL statement</a></li><li><a href="#migration-adds-features">Migration adds features</a></li><li><a href="#grpc-adds-shutdown-method">Grpc adds Shutdown method</a></li><li><a href="#artisan-adds-disable-print-colors-option">Artisan adds disable print colors option</a></li><li><a href="#encrypt-and-decrypt-env-file">Encrypt and decrypt env file</a></li><li><a href="#send-email-supports-setting-header">Send email supports setting Header</a></li><li><a href="#installer-supports-self-upgrade">Installer supports self upgrade</a></li><li><a href="#localization-supports-embed-loading">Localization supports embed loading</a></li><li><a href="#schedule-adds-features">Schedule adds features</a></li><li><a href="#request-adds-features">Request adds features</a></li><li><a href="#route-adds-features">Route adds features</a></li><li><a href="#testing-supports-creating-cache-image">Testing supports creating Cache image</a></li><li><a href="#different-jwt-guard-supports-different-configurations">Different JWT Guard supports different configurations</a></li><li><a href="#serviceprovider-no-longer-depends-on-order">ServiceProvider no longer depends on order</a></li></ul><h3 id="breaking-changes-🛠" tabindex="-1"><a class="header-anchor" href="#breaking-changes-🛠"><span>Breaking Changes 🛠</span></a></h3><ul><li><a href="#remove-sql-migration">Remove SQL Migration</a></li><li><a href="#optimize-config-moudlue-methods-default-value-type">Optimize Config moudlue methods default value type</a></li><li><a href="#optimize-orm-methods">Optimize Orm methods</a></li><li><a href="#optimize-path-methods">Optimize Path methods</a></li><li><a href="#optimize-request-methods">Optimize Request methods</a></li><li><a href="#optimize-console-confirm-methods">Optimize console Confirm methods</a></li><li><a href="#optimize-session-custom-driver">Optimize Session custom driver</a></li><li><a href="#optimize-testing-request-methods">Optimize Testing.Request methods</a></li><li><a href="#optimize-carbon-methods">Optimize Carbon methods</a></li><li><a href="#optimize-str-snake-methods">Optimize str.Snake methods</a></li><li><a href="#goravelcloudinary-is-no-longer-maintained">goravel/cloudinary is no longer maintained</a></li></ul><h2 id="upgrade-guide" tabindex="-1"><a class="header-anchor" href="#upgrade-guide"><span>Upgrade Guide</span></a></h2><p>As <a href="https://encdoflife.date/go" target="_blank" rel="noopener noreferrer">Golang v1.22 is no longer maintained</a>, the Golang version of Goravel supports has been upgraded from 1.22 to 1.23.</p><p>goravel/example project from v1.15 to v1.16 PR can be used as an upgrade reference: <a href="https://github.com/goravel/example/pull/68" target="_blank" rel="noopener noreferrer">goravel/example#68</a></p><h3 id="_1-update-dependencies" tabindex="-1"><a class="header-anchor" href="#_1-update-dependencies"><span>1. Update Dependencies</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go get github.com/goravel/framework@master</span>
<span class="line"></span>
<span class="line">// If using gin</span>
<span class="line">go get github.com/goravel/gin@master</span>
<span class="line"></span>
<span class="line">// If using fiber</span>
<span class="line">go get github.com/goravel/fiber@master</span>
<span class="line"></span>
<span class="line">// If using redis</span>
<span class="line">go get github.com/goravel/redis@master</span>
<span class="line"></span>
<span class="line">// If using S3</span>
<span class="line">go get github.com/goravel/s3@master</span>
<span class="line"></span>
<span class="line">// If using Oss</span>
<span class="line">go get github.com/goravel/oss@master</span>
<span class="line"></span>
<span class="line">// If using Cos</span>
<span class="line">go get github.com/goravel/cos@master</span>
<span class="line"></span>
<span class="line">// If using Minio</span>
<span class="line">go get github.com/goravel/minio@master</span>
<span class="line"></span>
<span class="line">// If using Cloudinary</span>
<span class="line">go get github.com/goravel/cloudinary@master</span>
<span class="line"></span>
<span class="line">go mod tidy</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-modify-database-configuration" tabindex="-1"><a class="header-anchor" href="#_2-modify-database-configuration"><span>2. Modify Database Configuration</span></a></h3><p>Delete the <code>connections</code> in the database configuration file <code>config/database.go</code> that you don&#39;t need, and install the database driver you need.</p><p>For example, Postgres:</p><ol><li>Install the driver package</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go get github.com/goravel/postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>Add <code>postgres.ServiceProvider</code> to the <code>config/app.go</code> file</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/app.go</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/postgres&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&quot;providers&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>foundation<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token operator">&amp;</span>postgres<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Modify the configuration in the <code>config/database.go</code> file</li></ol><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/database.go</span>
<span class="line">import (</span>
<span class="line">	&quot;github.com/goravel/framework/contracts/database/driver&quot;</span>
<span class="line">	postgresfacades &quot;github.com/goravel/postgres/facades&quot;</span>
<span class="line">)</span>
<span class="line"></span>
<span class="line">&quot;connections&quot;: map[string]any{</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;postgres&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   ...</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+    &quot;via&quot;: func() (driver.Driver, error) {</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+      return postgresfacades.Postgres(&quot;postgres&quot;)</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    },</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span>},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-modify-auth-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_3-modify-auth-go-configuration-file"><span>3. Modify auth.go configuration file</span></a></h3><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/auth.go</span>
<span class="line"></span>
<span class="line">// Supported: &quot;jwt&quot;</span>
<span class="line">&quot;guards&quot;: map[string]any{</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;user&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;driver&quot;:   &quot;jwt&quot;,</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+    &quot;provider&quot;: &quot;user&quot;,</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span>},</span>
<span class="line"></span>
<span class="line"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ // Supported: &quot;orm&quot;</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ &quot;providers&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;user&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+     &quot;driver&quot;: &quot;orm&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   },</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ },</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-modify-session-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_4-modify-session-go-configuration-file"><span>4. Modify session.go configuration file</span></a></h3><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/session.go</span>
<span class="line"></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- &quot;driver&quot;: config.Env(&quot;SESSION_DRIVER&quot;, &quot;file&quot;),</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ &quot;default&quot;: config.Env(&quot;SESSION_DRIVER&quot;, &quot;file&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ &quot;drivers&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;file&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+     &quot;driver&quot;: &quot;file&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   },</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ },</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-modify-queue-go-configuration-file" tabindex="-1"><a class="header-anchor" href="#_5-modify-queue-go-configuration-file"><span>5. Modify queue.go configuration file</span></a></h3><ul><li><p>If you are using the Redis driver of the Queue module, you need to modify accordingly: <a href="#optimize-queue-module-configuration">Optimize Queue module configuration</a>.</p></li><li><p>If you are not using it or want to use the database driver in the future, you need to modify the configuration in the <code>config/queue.go</code> file:</p></li></ul><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/queue.go</span>
<span class="line"></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- // Drivers: &quot;sync&quot;, &quot;redis&quot;</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ // Drivers: &quot;sync&quot;, &quot;database&quot;, &quot;custom&quot;</span>
<span class="line"></span></span>&quot;connections&quot;: map[string]any{</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;sync&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;driver&quot;: &quot;sync&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">-  &quot;redis&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">-    &quot;driver&quot;:     &quot;redis&quot;,</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">-    &quot;connection&quot;: &quot;default&quot;,</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">-    &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">-  },</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+  &quot;database&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    &quot;driver&quot;:     &quot;database&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    &quot;connection&quot;: &quot;postgres&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    &quot;queue&quot;:      &quot;default&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    &quot;concurrent&quot;: 1,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+  },</span>
<span class="line"></span></span>},</span>
<span class="line"></span>
<span class="line"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ &quot;failed&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+  &quot;database&quot;: config.Env(&quot;DB_CONNECTION&quot;, &quot;postgres&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+  &quot;table&quot;:    &quot;failed_jobs&quot;,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ },</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the migration file required for the database driver: <a href="https://github.com/goravel/goravel/blob/master/database/migrations/20210101000002_create_jobs_table.go" target="_blank" rel="noopener noreferrer">database/migrations/20210101000002_create_jobs_table.go</a>, and register the migration file in the <code>database/kernel.go</code> file.</p><h3 id="_6-if-you-need-to-use-http-client" tabindex="-1"><a class="header-anchor" href="#_6-if-you-need-to-use-http-client"><span>6. If you need to use HTTP Client</span></a></h3><p>Add the HTTP Client configuration item in the <code>config/http.go</code> file:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/http.go</span>
<span class="line"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ &quot;client&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;base_url&quot;:                config.GetString(&quot;HTTP_CLIENT_BASE_URL&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;timeout&quot;:                 config.GetDuration(&quot;HTTP_CLIENT_TIMEOUT&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;max_idle_conns&quot;:          config.GetInt(&quot;HTTP_CLIENT_MAX_IDLE_CONNS&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;max_idle_conns_per_host&quot;: config.GetInt(&quot;HTTP_CLIENT_MAX_IDLE_CONNS_PER_HOST&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;max_conns_per_host&quot;:      config.GetInt(&quot;HTTP_CLIENT_MAX_CONN_PER_HOST&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+   &quot;idle_conn_timeout&quot;:       config.GetDuration(&quot;HTTP_CLIENT_IDLE_CONN_TIMEOUT&quot;),</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+ },</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-if-using-goravel-redis-driver" tabindex="-1"><a class="header-anchor" href="#_7-if-using-goravel-redis-driver"><span>7. If using goravel/redis driver</span></a></h3><p>Need to modify the configuration in the <code>config/cache.go</code> file:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/cache.go</span>
<span class="line">&quot;redis&quot;: map[string]any{</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;driver&quot;:     &quot;custom&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> &quot;connection&quot;: &quot;default&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> &quot;via&quot;: func() (cache.Driver, error) {</span>
<span class="line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">-  return redisfacades.Redis(&quot;redis&quot;), nil</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+  return redisfacades.Cache(&quot;redis&quot;)</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span>},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-if-using-carbon-datetime-etc-methods" tabindex="-1"><a class="header-anchor" href="#_8-if-using-carbon-datetime-etc-methods"><span>8. If using carbon.DateTime etc. methods</span></a></h3><p>Need to modify accordingly: <a href="#optimize-carbon-methods">Optimize Carbon methods</a></p><h3 id="_9-if-using-session-custom-driver" tabindex="-1"><a class="header-anchor" href="#_9-if-using-session-custom-driver"><span>9. If using session custom driver</span></a></h3><p>Need to modify accordingly: <a href="#optimize-session-custom-driver">Optimize Session custom driver</a></p><h3 id="_10-if-using-methods-of-facades-config" tabindex="-1"><a class="header-anchor" href="#_10-if-using-methods-of-facades-config"><span>10. If using methods of facades.Config()</span></a></h3><p>Need to modify accordingly: <a href="#modify-config-moudlue-methods-default-value-type">Modify Config Moudlue methods default value type</a></p><h3 id="_11-if-using-sql-migrations" tabindex="-1"><a class="header-anchor" href="#_11-if-using-sql-migrations"><span>11. If Using SQL Migrations</span></a></h3><p>Need to modify accordingly: <a href="#remove-sql-migration">Remove SQL Migration</a></p><h3 id="_12-if-using-orm" tabindex="-1"><a class="header-anchor" href="#_12-if-using-orm"><span>12. If Using Orm</span></a></h3><p>Need to modify accordingly: <a href="#optimize-orm-methods">Optimize Orm methods</a></p><h3 id="_13-if-using-path-method" tabindex="-1"><a class="header-anchor" href="#_13-if-using-path-method"><span>13. If Using Path Method</span></a></h3><p>The <code>path</code> method returns the absolute path, if you are using it, you need to check if you need to modify: <a href="#optimize-path-method">Optimize Path method</a></p><h3 id="_14-if-using-ctx-request-inputmap-method" tabindex="-1"><a class="header-anchor" href="#_14-if-using-ctx-request-inputmap-method"><span>14. If Using <code>ctx.Request().InputMap</code> Method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-request-method">Optimize Request method</a></p><h3 id="_15-if-using-console-confirm-method" tabindex="-1"><a class="header-anchor" href="#_15-if-using-console-confirm-method"><span>15. If Using <code>console.Confirm</code> Method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-console-confirm-method">Optimize console Confirm method</a></p><h3 id="_16-if-using-testing-request-method" tabindex="-1"><a class="header-anchor" href="#_16-if-using-testing-request-method"><span>16. If Using Testing.Request method</span></a></h3><p>Need to modify accordingly: <a href="#optimize-testing-request-method">Optimize Testing.Request method</a></p><h2 id="feature-introduction" tabindex="-1"><a class="header-anchor" href="#feature-introduction"><span>Feature Introduction</span></a></h2><h3 id="add-facades-db" tabindex="-1"><a class="header-anchor" href="#add-facades-db"><span>Add facades.DB()</span></a></h3><p>Add the <code>facades.DB()</code> module, which is convenient for performing native database operations, faster than ORM.</p>`,56)),s("p",null,[t(a,{to:"/database/getting-started.html"},{default:i(()=>n[0]||(n[0]=[e("View Document")])),_:1})]),n[40]||(n[40]=s("h3",{id:"add-facades-http",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#add-facades-http"},[s("span",null,"Add facades.Http()")])],-1)),n[41]||(n[41]=s("p",null,[e("Add the "),s("code",null,"facades.Http()"),e(" module, which is convenient for performing HTTP operations.")],-1)),s("p",null,[t(a,{to:"/digging-deeper/http-client.html"},{default:i(()=>n[1]||(n[1]=[e("View Document")])),_:1})]),n[42]||(n[42]=l('<h3 id="reconstruct-facades-queue" tabindex="-1"><a class="header-anchor" href="#reconstruct-facades-queue"><span>Reconstruct facades.Queue()</span></a></h3><ul><li><p>Before v1.15, Queue only supported sync and Redis drivers, starting from v1.16, it supports database and custom driver.</p></li><li><p>Add <code>jobs</code> and <code>failed_jobs</code> table, used to store tasks and failed tasks.</p></li><li><p>Add <code>queue:retry</code> command, used to retry failed tasks.</p></li><li><p>Add <code>queue:failed</code> command, used to view failed tasks.</p></li><li><p>Support setting the number of retries when starting the queue task.</p></li></ul>',2)),s("p",null,[t(a,{to:"/digging-deeper/queues.html"},{default:i(()=>n[2]||(n[2]=[e("View Document")])),_:1})]),n[43]||(n[43]=s("h3",{id:"facades-auth-supports-custom-driver",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#facades-auth-supports-custom-driver"},[s("span",null,"facades.Auth() supports custom driver")])],-1)),s("p",null,[n[4]||(n[4]=e("Before v1.15, Auth only supported JWT driver, starting from v1.16, it supports Session and custom driver, please ")),t(a,{to:"/security/authentication.html#custom-driver"},{default:i(()=>n[3]||(n[3]=[e("view document")])),_:1}),n[5]||(n[5]=e("."))]),n[44]||(n[44]=l('<h3 id="make-commands-support-automatic-registration" tabindex="-1"><a class="header-anchor" href="#make-commands-support-automatic-registration"><span>make:* commands support automatic registration</span></a></h3><p>The files<code>make:migration</code> and <code>make:seeder</code>, etc. commands generated files will be automatically registered to the framework after generation, no longer need to manually register like before.</p><h3 id="goravel-installer-supports-selecting-driver" tabindex="-1"><a class="header-anchor" href="#goravel-installer-supports-selecting-driver"><span>Goravel Installer supports selecting driver</span></a></h3><p>When installing a new project using Goravel Installer, you can select different drivers, such as: you can choose to install goravel/gin or goravel/fiber, etc.</p><h3 id="split-database-driver" tabindex="-1"><a class="header-anchor" href="#split-database-driver"><span>Split Database Driver</span></a></h3><p>Before multiple database drivers were integrated in the framework, which increased the software package size. Starting from v1.16, the database driver will be a separate package, so you only need to install the database driver you need.</p><table><thead><tr><th>Database Type</th><th>Driver Package</th></tr></thead><tbody><tr><td>Postgres</td><td><a href="https://github.com/goravel/postgres" target="_blank" rel="noopener noreferrer">github.com/goravel/postgres</a></td></tr><tr><td>MySQL</td><td><a href="https://github.com/goravel/mysql" target="_blank" rel="noopener noreferrer">github.com/goravel/mysql</a></td></tr><tr><td>Sqlserver</td><td><a href="https://github.com/goravel/sqlserver" target="_blank" rel="noopener noreferrer">github.com/goravel/sqlserver</a></td></tr><tr><td>SQLite</td><td><a href="https://github.com/goravel/sqlite" target="_blank" rel="noopener noreferrer">github.com/goravel/sqlite</a></td></tr></tbody></table><h3 id="orm-adds-features" tabindex="-1"><a class="header-anchor" href="#orm-adds-features"><span>Orm adds features</span></a></h3>',8)),s("ul",null,[s("li",null,[s("p",null,[n[7]||(n[7]=e("Support querying JSON fields, ")),t(a,{to:"/orm/getting-started.html#where"},{default:i(()=>n[6]||(n[6]=[e("view document")])),_:1}),n[8]||(n[8]=e("."))])]),s("li",null,[s("p",null,[n[10]||(n[10]=e("Support updating JSON fields, ")),t(a,{to:"/orm/getting-started.html#update-json-fields"},{default:i(()=>n[9]||(n[9]=[e("view document")])),_:1}),n[11]||(n[11]=e("."))])]),n[12]||(n[12]=s("li",null,[s("p",null,[e("Model supports setting the "),s("code",null,"GlobalScope"),e(" method, which restricts the scope of the query, update, and delete operations:")])],-1))]),n[45]||(n[45]=l(`<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/contracts/orm&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">  orm<span class="token punctuation">.</span>Model</span>
<span class="line">  Name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token function">GlobalScopes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query<span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span><span class="token punctuation">(</span>query orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;goravel&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="support-creating-model-based-on-data-table" tabindex="-1"><a class="header-anchor" href="#support-creating-model-based-on-data-table"><span>Support creating Model based on data table</span></a></h3><p><code>make:model</code> command adds <code>--table</code> option, used to create Model based on data table:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./artisan make:model <span class="token parameter variable">--table</span><span class="token operator">=</span>users User</span>
<span class="line"></span>
<span class="line">// If the Model already exists, you can use the <span class="token parameter variable">-f</span> option to force overwrite</span>
<span class="line">./artisan make:model <span class="token parameter variable">--table</span><span class="token operator">=</span>users <span class="token parameter variable">-f</span> User</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="support-runtime-dynamic-sql-statement" tabindex="-1"><a class="header-anchor" href="#support-runtime-dynamic-sql-statement"><span>Support runtime dynamic SQL statement</span></a></h3><p>Add the <code>EnableQueryLog</code> method, which is used to enable query log:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">EnableQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Orm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Table</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">queryLogs <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">GetQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line">ctx <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">DisableQueryLog</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="migration-adds-features" tabindex="-1"><a class="header-anchor" href="#migration-adds-features"><span>Migration adds features</span></a></h3><ul><li>Add the <code>Change</code> method to modify the table structure(Apply to Postgres, MySQL, Sqlserver):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>RenameColumn</code> method, for renaming the table column:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">RenameColumn</span><span class="token punctuation">(</span><span class="token string">&quot;old_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;new_name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Comment</code> method, for adding a comment to the table (Apply to Postgres, MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Comment</span><span class="token punctuation">(</span><span class="token string">&quot;user table&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>First</code> method, for setting the field as the first field of the table (Apply to MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>After</code> method, for setting the field as the last field of the table (Apply to MySQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Morphs</code>, <code>NullableMorphs</code>, <code>NumericMorphs</code>, <code>UuidMorphs</code>, <code>UlidMorphs</code> methods, used to create polymorphic association fields:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Morphs</span><span class="token punctuation">(</span><span class="token string">&quot;morphable&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// morphable_type, morphable_id</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add the <code>Uuid</code>, <code>Ulid</code> methods, used to create UUID and ULID fields:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">Uuid</span><span class="token punctuation">(</span><span class="token string">&quot;uuid&quot;</span><span class="token punctuation">)</span></span>
<span class="line">table<span class="token punctuation">.</span><span class="token function">Ulid</span><span class="token punctuation">(</span><span class="token string">&quot;ulid&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add the <code>GeneratedAs</code> and <code>Always</code> methods, used to create generated columns (only PostgreSQL):</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">table<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GeneratedAs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Always</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="grpc-adds-shutdown-method" tabindex="-1"><a class="header-anchor" href="#grpc-adds-shutdown-method"><span>Grpc adds Shutdown method</span></a></h3>`,25)),s("p",null,[n[14]||(n[14]=e("Add the ")),n[15]||(n[15]=s("code",null,"Shutdown",-1)),n[16]||(n[16]=e(" method to gracefully shut down Grpc, ")),t(a,{to:"/the-basics/grpc.html#shutdown-grpc"},{default:i(()=>n[13]||(n[13]=[e("View Document")])),_:1}),n[17]||(n[17]=e("."))]),n[46]||(n[46]=l(`<h3 id="artisan-adds-disable-print-colors-option" tabindex="-1"><a class="header-anchor" href="#artisan-adds-disable-print-colors-option"><span>Artisan adds disable print colors option</span></a></h3><p>Some commands print colors by default, such as the <code>list</code> command. However, in some terminals or logs, the color values may be garbled. You can use the <code>--no-ansi</code> option to disable the print colors:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">go run <span class="token builtin class-name">.</span> artisan list --no-ansi</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="encrypt-and-decrypt-env-file" tabindex="-1"><a class="header-anchor" href="#encrypt-and-decrypt-env-file"><span>Encrypt and decrypt env file</span></a></h3><p>You may want to add the production environment env file to version control, but you don&#39;t want to expose sensitive information, you can encrypt and decrypt the env file:</p>`,5)),s("p",null,[t(a,{to:"/getting-started/installation.html#encrypt-and-decrypt-env-file"},{default:i(()=>n[18]||(n[18]=[e("View Document")])),_:1})]),n[47]||(n[47]=l(`<h3 id="send-email-supports-setting-header" tabindex="-1"><a class="header-anchor" href="#send-email-supports-setting-header"><span>Send email supports setting Header</span></a></h3><p>Add the <code>Headers</code> method, which is used to set the Header of the email.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Mail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Headers</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;X-Mailer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Goravel&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="installer-supports-self-upgrade" tabindex="-1"><a class="header-anchor" href="#installer-supports-self-upgrade"><span>Installer supports self upgrade</span></a></h3><p>goravel/installer adds <code>upgrade</code> command, which is used to upgrade the installer itself:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">goravel upgrade</span>
<span class="line">goravel upgrade v1.1.1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="localization-supports-embed-loading" tabindex="-1"><a class="header-anchor" href="#localization-supports-embed-loading"><span>Localization supports embed loading</span></a></h3><p>When using embed loading, the language files will be compiled into the binary file and no longer need to be deployed.</p>`,8)),s("p",null,[t(a,{to:"/digging-deeper/localization.html#embed-loading"},{default:i(()=>n[19]||(n[19]=[e("View Document")])),_:1})]),n[48]||(n[48]=s("h3",{id:"schedule-adds-features",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#schedule-adds-features"},[s("span",null,"Schedule adds features")])],-1)),s("ul",null,[s("li",null,[s("p",null,[n[21]||(n[21]=e("Add the ")),n[22]||(n[22]=s("code",null,"EverySecond",-1)),n[23]||(n[23]=e(" method, etc., please ")),t(a,{to:"/digging-deeper/task-scheduling.html#schedule-frequency-options"},{default:i(()=>n[20]||(n[20]=[e("view document")])),_:1}),n[24]||(n[24]=e("."))])]),n[25]||(n[25]=s("li",null,[s("p",null,[e("Add the "),s("code",null,"schedule:run"),e(" command, which is used to manually run tasks.")])],-1)),n[26]||(n[26]=s("li",null,[s("p",null,[e("Add the "),s("code",null,"schedule:list"),e(" method, which is used to view all tasks.")])],-1))]),n[49]||(n[49]=l(`<h3 id="request-adds-features" tabindex="-1"><a class="header-anchor" href="#request-adds-features"><span>Request adds features</span></a></h3><ul><li>Before v1.15, the following <code>Request</code> binding will report an error, starting from v1.16, it supports binding multiple files:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> StoreMediaRequest <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Files <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>multipart<span class="token punctuation">.</span>FileHeader <span class="token string">\`form:&quot;files&quot; json:&quot;files&quot;\`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add the <code>OriginPath</code> method, which is used to get the original route path:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OriginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Info</code> method, which is used to get the route information:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">info <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Name</code> method, which is used to get the route name:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>When the <code>http.request_timeout</code> configuration item is set to <code>0</code>, the request will not timeout.</li></ul><h3 id="route-adds-features" tabindex="-1"><a class="header-anchor" href="#route-adds-features"><span>Route adds features</span></a></h3><ul><li>Add the <code>GetRoutes</code> method, which is used to get all routes:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">routes <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>Name</code> method, which is used to set the route name:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> usersController<span class="token punctuation">.</span>Index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">&quot;users.index&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then you can use the <code>Info</code> method to get the route information:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">route <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">&quot;users.index&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add the <code>route:list</code> command, which is used to view all routes:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./artisan route:list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="testing-supports-creating-cache-image" tabindex="-1"><a class="header-anchor" href="#testing-supports-creating-cache-image"><span>Testing supports creating Cache image</span></a></h3><p>Add the <code>Cache</code> method, which is used to create Cache image:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">cache<span class="token punctuation">,</span> err <span class="token operator">:=</span> facades<span class="token punctuation">.</span><span class="token function">Testing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Docker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="different-jwt-guard-supports-different-configurations" tabindex="-1"><a class="header-anchor" href="#different-jwt-guard-supports-different-configurations"><span>Different JWT Guard supports different configurations</span></a></h3>`,23)),s("p",null,[n[28]||(n[28]=e("Before v1.15, the ")),n[29]||(n[29]=s("code",null,"ttl",-1)),n[30]||(n[30]=e(" and ")),n[31]||(n[31]=s("code",null,"secret",-1)),n[32]||(n[32]=e(" configuration items of the JWT Guard were global configurations, starting from v1.16, you can set different ")),n[33]||(n[33]=s("code",null,"ttl",-1)),n[34]||(n[34]=e(" and ")),n[35]||(n[35]=s("code",null,"secret",-1)),n[36]||(n[36]=e(" for different JWT Guards, ")),t(a,{to:"/security/authentication.html#different-jwt-guard-supports-different-configurations"},{default:i(()=>n[27]||(n[27]=[e("View Document")])),_:1}),n[37]||(n[37]=e("."))]),n[50]||(n[50]=l(`<h3 id="serviceprovider-no-longer-depends-on-order" tabindex="-1"><a class="header-anchor" href="#serviceprovider-no-longer-depends-on-order"><span>ServiceProvider no longer depends on order</span></a></h3><p>ServiceProvider adds an optional method <code>Relationship() binding.Relationship</code>, used to declare the dependency relationship of the current ServicerProvider, the ServiceProvider that sets this method will not depend on the registration order, and the ServiceProvider that does not set it will be registered last, for example:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> ServiceProvider <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Relationship</span><span class="token punctuation">(</span><span class="token punctuation">)</span> binding<span class="token punctuation">.</span>Relationship <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> binding<span class="token punctuation">.</span>Relationship<span class="token punctuation">{</span></span>
<span class="line">		Bindings<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			BindingSession<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		Dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			binding<span class="token punctuation">.</span>Config<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		ProvideFor<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">			binding<span class="token punctuation">.</span>Cache<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Register</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>ServiceProvider<span class="token punctuation">)</span> <span class="token function">Boot</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="remove-sql-migration" tabindex="-1"><a class="header-anchor" href="#remove-sql-migration"><span>Remove SQL Migration</span></a></h3><p>SQL migrations have been completely removed, please use Go language migrations. Migration steps:</p><ol><li>Remove the <code>migrations.driver</code> key in <code>config/database.go</code>;</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// config/database.go</span></span>
<span class="line"><span class="token string">&quot;migrations&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">--</span>  <span class="token string">&quot;driver&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;sql&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;table&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;migrations&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Convert the SQL migration files in the <code>database/migrations</code> directory to Go language migration files:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Up Run the migrations.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>M20241207095921CreateUsersTable<span class="token punctuation">)</span> <span class="token function">Up</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> facades<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Sql</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Original SQL<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Down Reverse the migrations.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>M20241207095921CreateUsersTable<span class="token punctuation">)</span> <span class="token function">Down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> facades<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Sql</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Original SQL<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Register the migration files in the <code>database/kernel.go</code> file;</li></ol><h3 id="optimize-config-moudlue-methods-default-value-type" tabindex="-1"><a class="header-anchor" href="#optimize-config-moudlue-methods-default-value-type"><span>Optimize Config moudlue methods default value type</span></a></h3><p>Before the <code>GetString</code>、<code>GetInt</code>、<code>GetBool</code> method of the <code>Config</code> module had a default value type of <code>any</code>, starting from v1.16, the default value type is <code>string</code>、<code>int</code>、<code>bool</code>, to ensure type safety.</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- GetString(path string, defaultValue ...any) string</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ GetString(path string, defaultValue ...string) string</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- GetInt(path string, defaultValue ...any) int</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ GetInt(path string, defaultValue ...int) int</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- GetBool(path string, defaultValue ...any) bool</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ GetBool(path string, defaultValue ...bool) bool</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-orm-methods" tabindex="-1"><a class="header-anchor" href="#optimize-orm-methods"><span>Optimize Orm methods</span></a></h3><ul><li>Optimize the return value of the <code>Count</code>, <code>Exists</code> method:</li></ul><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Count(count *int64) error</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Count() (int64, error)</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Distinct(args ...any) Query</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Distinct(columns ...string) Query</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Exists(exists *bool) error</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Exists() (bool, error)</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Select(query any, args ...any) Query</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Select(columns ...string) Query</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Sum(column string, dest any) error</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Sum(column string) (int64, error)</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The <code>Where</code> method supports closures:</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">facades<span class="token punctuation">.</span><span class="token function">Orm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>query orm<span class="token punctuation">.</span>Query<span class="token punctuation">)</span> orm<span class="token punctuation">.</span>Query <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FindOrFail</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// SELECT * FROM users WHERE id = 100 AND (height = 180 AND age = 18);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-path-methods" tabindex="-1"><a class="header-anchor" href="#optimize-path-methods"><span>Optimize Path methods</span></a></h3><ul><li>Add the <code>Resource</code> method</li></ul><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">path<span class="token punctuation">.</span><span class="token function">Resource</span><span class="token punctuation">(</span><span class="token string">&quot;views/welcome.tmpl&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>The <code>path</code> method returns the absolute path</li></ul><p>Before the <code>path</code> method returned the relative path of the root directory, for example, <code>path.Config(&quot;app.go&quot;) == config/app.go</code>. Starting from v1.16, the <code>path</code> method returns the absolute path, for example, <code>path.Config(&quot;app.go&quot;) == /Users/goravel/workspace/goravel/config/app.go</code>.</p><h3 id="optimize-request-methods" tabindex="-1"><a class="header-anchor" href="#optimize-request-methods"><span>Optimize Request methods</span></a></h3><ol><li>Modify the default value type of the <code>InputMap</code> method:</li></ol><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- ctx.Request().InputMap(key string, defaultValue ...map[string]string) map[string]string</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ ctx.Request().InputMap(key string, defaultValue ...map[string]any) map[string]any</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Add the <code>InputMapArray</code> method, which is used to get the array type of Map:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputMapArray</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue <span class="token operator">...</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>Add the <code>Files</code> method, which is used to get multiple files:</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Files</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>filesystem<span class="token punctuation">.</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="optimize-console-confirm-methods" tabindex="-1"><a class="header-anchor" href="#optimize-console-confirm-methods"><span>Optimize console Confirm methods</span></a></h3><p>Modify the return value of the <code>Confirm</code> method, simplifying the judgment logic:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- Confirm(question string, option ...ConfirmOption) (bool, error)</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ Confirm(question string, option ...ConfirmOption) bool</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-session-custom-driver" tabindex="-1"><a class="header-anchor" href="#optimize-session-custom-driver"><span>Optimize Session custom driver</span></a></h3><p>Before, you needed to register the driver through the <code>facades.Session().Extend</code> method. Starting from v1.16, you only need to add it to the <code>config/session.go</code> configuration file:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// app/providers/app_service_provider.go</span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- facades.Session().Extend(&quot;redis&quot;, func() session.Driver {</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">-   return &amp;RedisDriver{}</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">- })</span>
<span class="line"></span></span></span>
<span class="line">// config/session.go</span>
<span class="line">&quot;drivers&quot;: map[string]any{</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;redis&quot;: map[string]any{</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;driver&quot;: &quot;custom&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;via&quot;: func() (session.Driver, error) {</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">     return &amp;RedisDriver{}, nil</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   },</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> }</span>
<span class="line"></span></span>},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,36)),s("p",null,[t(a,{to:"/the-basics/session.html#add-custom-session-driver"},{default:i(()=>n[38]||(n[38]=[e("View Document")])),_:1})]),n[51]||(n[51]=l(`<h3 id="optimize-testing-request-methods" tabindex="-1"><a class="header-anchor" href="#optimize-testing-request-methods"><span>Optimize Testing.Request methods</span></a></h3><p>Optimize the parameters of the <code>WithCookies</code> and <code>WithCookie</code> methods:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- WithCookies(cookies map[string]string) Request</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ WithCookies(cookies []*http.Cookie) Request</span>
<span class="line"></span></span></span>
<span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">- WithCookie(key, value string) Request</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+ WithCookie(cookie *http.Cookie) Request</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optimize-carbon-methods" tabindex="-1"><a class="header-anchor" href="#optimize-carbon-methods"><span>Optimize Carbon methods</span></a></h3><p>Previously, the <code>carbon.NewDateTime</code>, etc. methods return a struct instance, starting from v1.16, it returns a pointer, if you define the <code>carbon.DateTime</code> type, etc., you need to modify it to <code>*carbon.DateTime</code> etc. pointer type.</p><h3 id="optimize-str-snake-methods" tabindex="-1"><a class="header-anchor" href="#optimize-str-snake-methods"><span>Optimize str.Snake methods</span></a></h3><p>The <code>str.Snake</code> method previously converted <code>userID</code> to <code>user_i_d</code>, starting from v1.16, it will be converted to <code>user_id</code>.</p><h3 id="goravel-cloudinary-is-no-longer-maintained" tabindex="-1"><a class="header-anchor" href="#goravel-cloudinary-is-no-longer-maintained"><span>goravel/cloudinary is no longer maintained</span></a></h3><p><a href="https://github.com/goravel/cloudinary" target="_blank" rel="noopener noreferrer">goravel/cloudinary</a> is no longer maintained, please use <a href="https://github.com/goravel/s3" target="_blank" rel="noopener noreferrer">goravel/s3</a> or other drivers instead.</p><h3 id="optimize-queue-module-configuration" tabindex="-1"><a class="header-anchor" href="#optimize-queue-module-configuration"><span>Optimize Queue module configuration</span></a></h3><p>Before v1.15, the Redis driver of the Queue module was implemented using <a href="https://github.com/RichardKnop/machinery" target="_blank" rel="noopener noreferrer">RichardKnop/machinery</a>. Starting from v1.16, the Redis driver is officially supported in <a href="https://github.com/goravel/redis" target="_blank" rel="noopener noreferrer">goravel/redis</a>.</p><p>You can still use the Machinery driver in v1.16, but it will be removed in v1.17, it is recommended to use the Redis driver. The following provides two upgrade methods:</p><h4 id="continue-using-machinery-driver" tabindex="-1"><a class="header-anchor" href="#continue-using-machinery-driver"><span>Continue using Machinery driver</span></a></h4><p>Modify the configuration in the <code>config/queue.go</code> file:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/queue.go</span>
<span class="line">&quot;connections&quot;: map[string]any{</span>
<span class="line">...</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;redis&quot;: map[string]any{</span>
<span class="line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">-    &quot;driver&quot;:     &quot;redis&quot;,</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+    &quot;driver&quot;:     &quot;machinery&quot;,</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &quot;connection&quot;: &quot;default&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span>},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="use-redis-queue-driver" tabindex="-1"><a class="header-anchor" href="#use-redis-queue-driver"><span>Use Redis queue driver</span></a></h4><p>Modify the configuration in the <code>config/queue.go</code> file:</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff" data-title="diff"><pre><code><span class="line">// config/queue.go</span>
<span class="line">import (</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;github.com/goravel/framework/contracts/queue&quot;</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line"> redisfacades &quot;github.com/goravel/redis/facades&quot;</span>
<span class="line"></span></span>)</span>
<span class="line"></span>
<span class="line">&quot;connections&quot;: map[string]any{</span>
<span class="line">...</span>
<span class="line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;redis&quot;: map[string]any{</span>
<span class="line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">-  &quot;driver&quot;:     &quot;redis&quot;,</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+  &quot;driver&quot;:     &quot;custom&quot;,</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &quot;connection&quot;: &quot;default&quot;,</span>
<span class="line"></span><span class="token prefix unchanged"> </span><span class="token line">   &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">+  &quot;via&quot;: func() (queue.Driver, error) {</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+    return redisfacades.Queue(&quot;redis&quot;) // The \` + &quot;\`redis\`&quot; + \` value is the key of \` + &quot;\`connections\`&quot; + \`</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">+  },</span>
<span class="line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },</span>
<span class="line"></span></span>},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The new Redis queue driver and the original machinery queue driver tasks are stored in the same Redis, but use different queue names. Even if you switch to the new Redis queue driver, the framework will continue to read the original Machinery queue driver tasks until all tasks in Machinery are completed. At the same time, the new queue tasks are no longer written to the Machinery queue, but written to the new Redis queue, and consumed by the new Redis queue driver. To achieve seamless switching between two drivers.</p><p>You can check the data of the two drivers in Redis to see if they are correctly written and consumed:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">redis-cli</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Get all keys in Redis</span></span>
<span class="line">keys</span>
<span class="line"></span>
<span class="line"><span class="token comment"># View Machinery queue driver data (replace {} with the value)</span></span>
<span class="line">LRANGE <span class="token punctuation">{</span>app_name<span class="token punctuation">}</span>_queues:<span class="token punctuation">{</span>queue_name<span class="token punctuation">}</span> <span class="token number">0</span> <span class="token parameter variable">-1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># View Redis queue driver data (replace {} with the value)</span></span>
<span class="line">LRANGE <span class="token punctuation">{</span>app_name<span class="token punctuation">}</span>_queues:<span class="token punctuation">{</span>connection<span class="token punctuation">}</span>_<span class="token punctuation">{</span>queue<span class="token punctuation">}</span> <span class="token number">0</span> <span class="token parameter variable">-1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21))])}const h=o(c,[["render",u],["__file","v1.16.html.vue"]]),v=JSON.parse('{"path":"/upgrade/v1.16.html","title":"Upgrading To v1.16 From v1.15","lang":"en-US","frontmatter":{"description":"Upgrading To v1.16 From v1.15 Exciting New Features 🎉 Add facades.DB() Add facades.Http() Reconstruct facades.Queue() facades.Auth() supports custom driver make:* commands supp...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goravel.dev/zh/upgrade/v1.16.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/upgrade/v1.16.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/upgrade/v1.16.html"}],["meta",{"property":"og:description","content":"Upgrading To v1.16 From v1.15 Exciting New Features 🎉 Add facades.DB() Add facades.Http() Reconstruct facades.Queue() facades.Auth() supports custom driver make:* commands supp..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Upgrading To v1.16 From v1.15\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":3,"title":"Exciting New Features 🎉","slug":"exciting-new-features-🎉","link":"#exciting-new-features-🎉","children":[]},{"level":3,"title":"Enhancements 🚀","slug":"enhancements-🚀","link":"#enhancements-🚀","children":[]},{"level":3,"title":"Breaking Changes 🛠","slug":"breaking-changes-🛠","link":"#breaking-changes-🛠","children":[]},{"level":2,"title":"Upgrade Guide","slug":"upgrade-guide","link":"#upgrade-guide","children":[{"level":3,"title":"1. Update Dependencies","slug":"_1-update-dependencies","link":"#_1-update-dependencies","children":[]},{"level":3,"title":"2. Modify Database Configuration","slug":"_2-modify-database-configuration","link":"#_2-modify-database-configuration","children":[]},{"level":3,"title":"3. Modify auth.go configuration file","slug":"_3-modify-auth-go-configuration-file","link":"#_3-modify-auth-go-configuration-file","children":[]},{"level":3,"title":"4. Modify session.go configuration file","slug":"_4-modify-session-go-configuration-file","link":"#_4-modify-session-go-configuration-file","children":[]},{"level":3,"title":"5. Modify queue.go configuration file","slug":"_5-modify-queue-go-configuration-file","link":"#_5-modify-queue-go-configuration-file","children":[]},{"level":3,"title":"6. If you need to use HTTP Client","slug":"_6-if-you-need-to-use-http-client","link":"#_6-if-you-need-to-use-http-client","children":[]},{"level":3,"title":"7. If using goravel/redis driver","slug":"_7-if-using-goravel-redis-driver","link":"#_7-if-using-goravel-redis-driver","children":[]},{"level":3,"title":"8. If using carbon.DateTime etc. methods","slug":"_8-if-using-carbon-datetime-etc-methods","link":"#_8-if-using-carbon-datetime-etc-methods","children":[]},{"level":3,"title":"9. If using session custom driver","slug":"_9-if-using-session-custom-driver","link":"#_9-if-using-session-custom-driver","children":[]},{"level":3,"title":"10. If using methods of facades.Config()","slug":"_10-if-using-methods-of-facades-config","link":"#_10-if-using-methods-of-facades-config","children":[]},{"level":3,"title":"11. If Using SQL Migrations","slug":"_11-if-using-sql-migrations","link":"#_11-if-using-sql-migrations","children":[]},{"level":3,"title":"12. If Using Orm","slug":"_12-if-using-orm","link":"#_12-if-using-orm","children":[]},{"level":3,"title":"13. If Using Path Method","slug":"_13-if-using-path-method","link":"#_13-if-using-path-method","children":[]},{"level":3,"title":"14. If Using ctx.Request().InputMap Method","slug":"_14-if-using-ctx-request-inputmap-method","link":"#_14-if-using-ctx-request-inputmap-method","children":[]},{"level":3,"title":"15. If Using console.Confirm Method","slug":"_15-if-using-console-confirm-method","link":"#_15-if-using-console-confirm-method","children":[]},{"level":3,"title":"16. If Using Testing.Request method","slug":"_16-if-using-testing-request-method","link":"#_16-if-using-testing-request-method","children":[]}]},{"level":2,"title":"Feature Introduction","slug":"feature-introduction","link":"#feature-introduction","children":[{"level":3,"title":"Add facades.DB()","slug":"add-facades-db","link":"#add-facades-db","children":[]},{"level":3,"title":"Add facades.Http()","slug":"add-facades-http","link":"#add-facades-http","children":[]},{"level":3,"title":"Reconstruct facades.Queue()","slug":"reconstruct-facades-queue","link":"#reconstruct-facades-queue","children":[]},{"level":3,"title":"facades.Auth() supports custom driver","slug":"facades-auth-supports-custom-driver","link":"#facades-auth-supports-custom-driver","children":[]},{"level":3,"title":"make:* commands support automatic registration","slug":"make-commands-support-automatic-registration","link":"#make-commands-support-automatic-registration","children":[]},{"level":3,"title":"Goravel Installer supports selecting driver","slug":"goravel-installer-supports-selecting-driver","link":"#goravel-installer-supports-selecting-driver","children":[]},{"level":3,"title":"Split Database Driver","slug":"split-database-driver","link":"#split-database-driver","children":[]},{"level":3,"title":"Orm adds features","slug":"orm-adds-features","link":"#orm-adds-features","children":[]},{"level":3,"title":"Support creating Model based on data table","slug":"support-creating-model-based-on-data-table","link":"#support-creating-model-based-on-data-table","children":[]},{"level":3,"title":"Support runtime dynamic SQL statement","slug":"support-runtime-dynamic-sql-statement","link":"#support-runtime-dynamic-sql-statement","children":[]},{"level":3,"title":"Migration adds features","slug":"migration-adds-features","link":"#migration-adds-features","children":[]},{"level":3,"title":"Grpc adds Shutdown method","slug":"grpc-adds-shutdown-method","link":"#grpc-adds-shutdown-method","children":[]},{"level":3,"title":"Artisan adds disable print colors option","slug":"artisan-adds-disable-print-colors-option","link":"#artisan-adds-disable-print-colors-option","children":[]},{"level":3,"title":"Encrypt and decrypt env file","slug":"encrypt-and-decrypt-env-file","link":"#encrypt-and-decrypt-env-file","children":[]},{"level":3,"title":"Send email supports setting Header","slug":"send-email-supports-setting-header","link":"#send-email-supports-setting-header","children":[]},{"level":3,"title":"Installer supports self upgrade","slug":"installer-supports-self-upgrade","link":"#installer-supports-self-upgrade","children":[]},{"level":3,"title":"Localization supports embed loading","slug":"localization-supports-embed-loading","link":"#localization-supports-embed-loading","children":[]},{"level":3,"title":"Schedule adds features","slug":"schedule-adds-features","link":"#schedule-adds-features","children":[]},{"level":3,"title":"Request adds features","slug":"request-adds-features","link":"#request-adds-features","children":[]},{"level":3,"title":"Route adds features","slug":"route-adds-features","link":"#route-adds-features","children":[]},{"level":3,"title":"Testing supports creating Cache image","slug":"testing-supports-creating-cache-image","link":"#testing-supports-creating-cache-image","children":[]},{"level":3,"title":"Different JWT Guard supports different configurations","slug":"different-jwt-guard-supports-different-configurations","link":"#different-jwt-guard-supports-different-configurations","children":[]},{"level":3,"title":"ServiceProvider no longer depends on order","slug":"serviceprovider-no-longer-depends-on-order","link":"#serviceprovider-no-longer-depends-on-order","children":[]},{"level":3,"title":"Remove SQL Migration","slug":"remove-sql-migration","link":"#remove-sql-migration","children":[]},{"level":3,"title":"Optimize Config moudlue methods default value type","slug":"optimize-config-moudlue-methods-default-value-type","link":"#optimize-config-moudlue-methods-default-value-type","children":[]},{"level":3,"title":"Optimize Orm methods","slug":"optimize-orm-methods","link":"#optimize-orm-methods","children":[]},{"level":3,"title":"Optimize Path methods","slug":"optimize-path-methods","link":"#optimize-path-methods","children":[]},{"level":3,"title":"Optimize Request methods","slug":"optimize-request-methods","link":"#optimize-request-methods","children":[]},{"level":3,"title":"Optimize console Confirm methods","slug":"optimize-console-confirm-methods","link":"#optimize-console-confirm-methods","children":[]},{"level":3,"title":"Optimize Session custom driver","slug":"optimize-session-custom-driver","link":"#optimize-session-custom-driver","children":[]},{"level":3,"title":"Optimize Testing.Request methods","slug":"optimize-testing-request-methods","link":"#optimize-testing-request-methods","children":[]},{"level":3,"title":"Optimize Carbon methods","slug":"optimize-carbon-methods","link":"#optimize-carbon-methods","children":[]},{"level":3,"title":"Optimize str.Snake methods","slug":"optimize-str-snake-methods","link":"#optimize-str-snake-methods","children":[]},{"level":3,"title":"goravel/cloudinary is no longer maintained","slug":"goravel-cloudinary-is-no-longer-maintained","link":"#goravel-cloudinary-is-no-longer-maintained","children":[]},{"level":3,"title":"Optimize Queue module configuration","slug":"optimize-queue-module-configuration","link":"#optimize-queue-module-configuration","children":[]}]}],"git":{},"filePathRelative":"upgrade/v1.16.md","autoDesc":true}');export{h as comp,v as data};
