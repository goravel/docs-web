import{_ as i,c,b as s,e as a,f as e,a as u,r as o,o as r,d as p}from"./app-Jnelnv2S.js";const d={},k={class:"table-of-contents"};function v(m,n){const t=o("router-link"),l=o("CommentService");return r(),c("div",null,[n[26]||(n[26]=s("h1",{id:"请求",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#请求"},[s("span",null,"请求")])],-1)),s("nav",k,[s("ul",null,[s("li",null,[a(t,{to:"#简介"},{default:e(()=>n[0]||(n[0]=[p("简介")])),_:1})]),s("li",null,[a(t,{to:"#与请求交互"},{default:e(()=>n[1]||(n[1]=[p("与请求交互")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#获取请求路径"},{default:e(()=>n[2]||(n[2]=[p("获取请求路径")])),_:1})]),s("li",null,[a(t,{to:"#获取请求-url"},{default:e(()=>n[3]||(n[3]=[p("获取请求 URL")])),_:1})]),s("li",null,[a(t,{to:"#获取请求-host"},{default:e(()=>n[4]||(n[4]=[p("获取请求 HOST")])),_:1})]),s("li",null,[a(t,{to:"#获取完整-url"},{default:e(()=>n[5]||(n[5]=[p("获取完整 URL")])),_:1})]),s("li",null,[a(t,{to:"#获取请求方法"},{default:e(()=>n[6]||(n[6]=[p("获取请求方法")])),_:1})]),s("li",null,[a(t,{to:"#获取请求头"},{default:e(()=>n[7]||(n[7]=[p("获取请求头")])),_:1})]),s("li",null,[a(t,{to:"#获取-ip-地址"},{default:e(()=>n[8]||(n[8]=[p("获取 IP 地址")])),_:1})])])]),s("li",null,[a(t,{to:"#输入"},{default:e(()=>n[9]||(n[9]=[p("输入")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#获取所有输入数据"},{default:e(()=>n[10]||(n[10]=[p("获取所有输入数据")])),_:1})]),s("li",null,[a(t,{to:"#获取路由中的参数"},{default:e(()=>n[11]||(n[11]=[p("获取路由中的参数")])),_:1})]),s("li",null,[a(t,{to:"#获取路由传入的参数"},{default:e(()=>n[12]||(n[12]=[p("获取路由传入的参数")])),_:1})]),s("li",null,[a(t,{to:"#检索一个输入值"},{default:e(()=>n[13]||(n[13]=[p("检索一个输入值")])),_:1})]),s("li",null,[a(t,{to:"#绑定-json-form"},{default:e(()=>n[14]||(n[14]=[p("绑定 json/form")])),_:1})]),s("li",null,[a(t,{to:"#绑定-query"},{default:e(()=>n[15]||(n[15]=[p("绑定 Query")])),_:1})])])]),s("li",null,[a(t,{to:"#cookie"},{default:e(()=>n[16]||(n[16]=[p("Cookie")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#获取-cookie"},{default:e(()=>n[17]||(n[17]=[p("获取 Cookie")])),_:1})])])]),s("li",null,[a(t,{to:"#文件"},{default:e(()=>n[18]||(n[18]=[p("文件")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#获取上传的文件"},{default:e(()=>n[19]||(n[19]=[p("获取上传的文件")])),_:1})]),s("li",null,[a(t,{to:"#储存上传的文件"},{default:e(()=>n[20]||(n[20]=[p("储存上传的文件")])),_:1})]),s("li",null,[a(t,{to:"#获取原始-request"},{default:e(()=>n[21]||(n[21]=[p("获取原始 Request")])),_:1})]),s("li",null,[a(t,{to:"#附加数据"},{default:e(()=>n[22]||(n[22]=[p("附加数据")])),_:1})]),s("li",null,[a(t,{to:"#获取数据"},{default:e(()=>n[23]||(n[23]=[p("获取数据")])),_:1})]),s("li",null,[a(t,{to:"#获取-context"},{default:e(()=>n[24]||(n[24]=[p("获取 Context")])),_:1})])])]),s("li",null,[a(t,{to:"#自定义-recovery"},{default:e(()=>n[25]||(n[25]=[p("自定义 Recovery")])),_:1})])])]),n[27]||(n[27]=u(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Goravel 的 <code>contracts/http/Request</code> 方法可以与应用程序处理的当前 HTTP 请求进行交互，以及检索与请求一起提交的输入内容和文件。</p><h2 id="与请求交互" tabindex="-1"><a class="header-anchor" href="#与请求交互"><span>与请求交互</span></a></h2><p><code>http.Context</code> 实例被自动注入到控制器中：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/contracts/http&quot;</span></span>
<span class="line"></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx http<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取请求路径" tabindex="-1"><a class="header-anchor" href="#获取请求路径"><span>获取请求路径</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">path <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// /users</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取请求-url" tabindex="-1"><a class="header-anchor" href="#获取请求-url"><span>获取请求 URL</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">url <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Url</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// /users?name=Goravel</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取请求-host" tabindex="-1"><a class="header-anchor" href="#获取请求-host"><span>获取请求 HOST</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">url <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Host</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取完整-url" tabindex="-1"><a class="header-anchor" href="#获取完整-url"><span>获取完整 URL</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">url <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// http://**/users?name=Goravel</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取请求方法" tabindex="-1"><a class="header-anchor" href="#获取请求方法"><span>获取请求方法</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">method <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Method</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取请求头" tabindex="-1"><a class="header-anchor" href="#获取请求头"><span>获取请求头</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">header <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token string">&quot;X-Header-Name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span></span>
<span class="line">headers <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取-ip-地址" tabindex="-1"><a class="header-anchor" href="#获取-ip-地址"><span>获取 IP 地址</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ip <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="输入" tabindex="-1"><a class="header-anchor" href="#输入"><span>输入</span></a></h2><h3 id="获取所有输入数据" tabindex="-1"><a class="header-anchor" href="#获取所有输入数据"><span>获取所有输入数据</span></a></h3><p>可以使用 <code>All</code> 方法以 <code>map[string]any</code> 的形式检索所有传入请求的输入数据，是 <code>json</code>， <code>form</code> 和 <code>query</code> 的合集（优先级由前到后）。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">data <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">All</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取路由中的参数" tabindex="-1"><a class="header-anchor" href="#获取路由中的参数"><span>获取路由中的参数</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// /users/{id}</span></span>
<span class="line">id <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">id <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RouteInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">id <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RouteInt64</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取路由传入的参数" tabindex="-1"><a class="header-anchor" href="#获取路由传入的参数"><span>获取路由传入的参数</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// /users?name=goravel</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// /users?id=1</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">QueryInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">QueryInt64</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">QueryBool</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// /users?names=goravel1&amp;names=goravel2</span></span>
<span class="line">names <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">QueryArray</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// /users?names[a]=goravel1&amp;names[b]=goravel2</span></span>
<span class="line">names <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">QueryMap</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">queries <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Queries</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检索一个输入值" tabindex="-1"><a class="header-anchor" href="#检索一个输入值"><span>检索一个输入值</span></a></h3><p>获取所有的用户输入数据，而不用在意用户使用的是哪种 HTTP 动词，不管是什么 HTTP 动词。检索顺序为：<code>json</code>, <code>form</code>。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;goravel&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputInt</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputInt64</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputBool</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputArray</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">name <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InputMap</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绑定-json-form" tabindex="-1"><a class="header-anchor" href="#绑定-json-form"><span>绑定 json/form</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">  Name <span class="token builtin">string</span> <span class="token string">\`form:&quot;code&quot; json:&quot;code&quot;\`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> user User</span>
<span class="line">err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">var</span> user <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any</span>
<span class="line">err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绑定-query" tabindex="-1"><a class="header-anchor" href="#绑定-query"><span>绑定 Query</span></a></h3><p>仅支持绑定 Query 到 struct：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">type</span> Test <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">  ID <span class="token builtin">string</span> <span class="token string">\`form:&quot;id&quot;\`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> test Test</span>
<span class="line">err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">BindQuery</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>test<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie"><span>Cookie</span></a></h2><h3 id="获取-cookie" tabindex="-1"><a class="header-anchor" href="#获取-cookie"><span>获取 Cookie</span></a></h3><p>Goravel 提供了一种简单的方法来处理 <code>cookie</code>。使用 <code>Request</code> 实例上的 <code>Cookie</code> 方法获取 <code>cookie</code> 的值，如果 <code>cookie</code> 不存在，则返回空字符串。也可以在第二个参数上定义一个默认值。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">value <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">value <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="文件" tabindex="-1"><a class="header-anchor" href="#文件"><span>文件</span></a></h2><h3 id="获取上传的文件" tabindex="-1"><a class="header-anchor" href="#获取上传的文件"><span>获取上传的文件</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">file<span class="token punctuation">,</span> err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="储存上传的文件" tabindex="-1"><a class="header-anchor" href="#储存上传的文件"><span>储存上传的文件</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">file<span class="token punctuation">,</span> err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">file<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">&quot;./public/test.png&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取原始-request" tabindex="-1"><a class="header-anchor" href="#获取原始-request"><span>获取原始 Request</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">request <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Origin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="附加数据" tabindex="-1"><a class="header-anchor" href="#附加数据"><span>附加数据</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">WithValue</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Goravel&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取数据" tabindex="-1"><a class="header-anchor" href="#获取数据"><span>获取数据</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">user <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="获取-context" tabindex="-1"><a class="header-anchor" href="#获取-context"><span>获取 Context</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="自定义-recovery" tabindex="-1"><a class="header-anchor" href="#自定义-recovery"><span>自定义 Recovery</span></a></h2><p>可以通过在 <code>app/providers/route_service_provider.go</code> 文件中调用 <code>Recover</code> 方法 设置自定义 <code>recovery</code>。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// app/providers/route_service_provider.go</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>RouteServiceProvider<span class="token punctuation">)</span> <span class="token function">Boot</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Add HTTP middleware</span></span>
<span class="line">  facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GlobalMiddleware</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>Kernel<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line">  facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Recover</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>ctx http<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// or</span></span>
<span class="line">    <span class="token comment">// ctx.Response().String(500, &quot;Internal Server Error&quot;).Abort()</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,56)),a(l)])}const h=i(d,[["render",v],["__file","request.html.vue"]]),b=JSON.parse('{"path":"/zh/the-basics/request.html","title":"请求","lang":"zh-CN","frontmatter":{"description":"请求 简介 Goravel 的 contracts/http/Request 方法可以与应用程序处理的当前 HTTP 请求进行交互，以及检索与请求一起提交的输入内容和文件。 与请求交互 http.Context 实例被自动注入到控制器中： 获取请求路径 获取请求 URL 获取请求 HOST 获取完整 URL 获取请求方法 获取请求头 获取 IP 地址 ...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://goravel.dev/the-basics/request.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/zh/the-basics/request.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/the-basics/request.html"}],["meta",{"property":"og:description","content":"请求 简介 Goravel 的 contracts/http/Request 方法可以与应用程序处理的当前 HTTP 请求进行交互，以及检索与请求一起提交的输入内容和文件。 与请求交互 http.Context 实例被自动注入到控制器中： 获取请求路径 获取请求 URL 获取请求 HOST 获取完整 URL 获取请求方法 获取请求头 获取 IP 地址 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"请求\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"与请求交互","slug":"与请求交互","link":"#与请求交互","children":[{"level":3,"title":"获取请求路径","slug":"获取请求路径","link":"#获取请求路径","children":[]},{"level":3,"title":"获取请求 URL","slug":"获取请求-url","link":"#获取请求-url","children":[]},{"level":3,"title":"获取请求 HOST","slug":"获取请求-host","link":"#获取请求-host","children":[]},{"level":3,"title":"获取完整 URL","slug":"获取完整-url","link":"#获取完整-url","children":[]},{"level":3,"title":"获取请求方法","slug":"获取请求方法","link":"#获取请求方法","children":[]},{"level":3,"title":"获取请求头","slug":"获取请求头","link":"#获取请求头","children":[]},{"level":3,"title":"获取 IP 地址","slug":"获取-ip-地址","link":"#获取-ip-地址","children":[]}]},{"level":2,"title":"输入","slug":"输入","link":"#输入","children":[{"level":3,"title":"获取所有输入数据","slug":"获取所有输入数据","link":"#获取所有输入数据","children":[]},{"level":3,"title":"获取路由中的参数","slug":"获取路由中的参数","link":"#获取路由中的参数","children":[]},{"level":3,"title":"获取路由传入的参数","slug":"获取路由传入的参数","link":"#获取路由传入的参数","children":[]},{"level":3,"title":"检索一个输入值","slug":"检索一个输入值","link":"#检索一个输入值","children":[]},{"level":3,"title":"绑定 json/form","slug":"绑定-json-form","link":"#绑定-json-form","children":[]},{"level":3,"title":"绑定 Query","slug":"绑定-query","link":"#绑定-query","children":[]}]},{"level":2,"title":"Cookie","slug":"cookie","link":"#cookie","children":[{"level":3,"title":"获取 Cookie","slug":"获取-cookie","link":"#获取-cookie","children":[]}]},{"level":2,"title":"文件","slug":"文件","link":"#文件","children":[{"level":3,"title":"获取上传的文件","slug":"获取上传的文件","link":"#获取上传的文件","children":[]},{"level":3,"title":"储存上传的文件","slug":"储存上传的文件","link":"#储存上传的文件","children":[]},{"level":3,"title":"获取原始 Request","slug":"获取原始-request","link":"#获取原始-request","children":[]},{"level":3,"title":"附加数据","slug":"附加数据","link":"#附加数据","children":[]},{"level":3,"title":"获取数据","slug":"获取数据","link":"#获取数据","children":[]},{"level":3,"title":"获取 Context","slug":"获取-context","link":"#获取-context","children":[]}]},{"level":2,"title":"自定义 Recovery","slug":"自定义-recovery","link":"#自定义-recovery","children":[]}],"git":{},"filePathRelative":"zh/the-basics/request.md","autoDesc":true}');export{h as comp,b as data};
