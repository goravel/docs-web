import{_ as o,c,b as a,e as s,f as t,a as r,r as l,o as d,d as i}from"./app-BrxiOMhs.js";const u={},m={class:"table-of-contents"};function k(v,n){const e=l("router-link"),p=l("CommentService");return d(),c("div",null,[n[7]||(n[7]=a("h1",{id:"middleware",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#middleware"},[a("span",null,"Middleware")])],-1)),a("nav",m,[a("ul",null,[a("li",null,[s(e,{to:"#introduction"},{default:t(()=>n[0]||(n[0]=[i("Introduction")])),_:1})]),a("li",null,[s(e,{to:"#define-middleware"},{default:t(()=>n[1]||(n[1]=[i("Define Middleware")])),_:1}),a("ul",null,[a("li",null,[s(e,{to:"#create-middleware-by-command"},{default:t(()=>n[2]||(n[2]=[i("Create Middleware By Command")])),_:1})])])]),a("li",null,[s(e,{to:"#register-middleware"},{default:t(()=>n[3]||(n[3]=[i("Register Middleware")])),_:1}),a("ul",null,[a("li",null,[s(e,{to:"#global-middleware"},{default:t(()=>n[4]||(n[4]=[i("Global Middleware")])),_:1})]),a("li",null,[s(e,{to:"#assign-middleware-for-routing"},{default:t(()=>n[5]||(n[5]=[i("Assign Middleware for Routing")])),_:1})])])]),a("li",null,[s(e,{to:"#abort-request"},{default:t(()=>n[6]||(n[6]=[i("Abort Request")])),_:1})])])]),n[8]||(n[8]=r(`<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><p>Middleware provide a convenient mechanism for inspecting and filtering HTTP requests entering your application.</p><h2 id="define-middleware" tabindex="-1"><a class="header-anchor" href="#define-middleware"><span>Define Middleware</span></a></h2><p>You can create your own middleware in the <code>app/http/middleware</code> directory, the structure is as follows.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> middleware</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/contracts/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> http<span class="token punctuation">.</span>Middleware <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx http<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="create-middleware-by-command" tabindex="-1"><a class="header-anchor" href="#create-middleware-by-command"><span>Create Middleware By Command</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go run . artisan make:middleware Auth</span>
<span class="line"></span>
<span class="line">// Support nested folders</span>
<span class="line">go run . artisan make:middleware user/Auth</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="register-middleware" tabindex="-1"><a class="header-anchor" href="#register-middleware"><span>Register Middleware</span></a></h2><h3 id="global-middleware" tabindex="-1"><a class="header-anchor" href="#global-middleware"><span>Global Middleware</span></a></h3><p>If you want to apply middleware for every HTTP request of your application, you only need to register the middleware in the <code>Middleware</code> in the <code>app/http/kernel.go</code> file.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// app/http/kernel.go</span></span>
<span class="line"><span class="token keyword">package</span> http</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/contracts/http&quot;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token string">&quot;goravel/app/http/middleware&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Kernel <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>kernel <span class="token operator">*</span>Kernel<span class="token punctuation">)</span> <span class="token function">Middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>http<span class="token punctuation">.</span>Middleware <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>http<span class="token punctuation">.</span>Middleware<span class="token punctuation">{</span></span>
<span class="line">    middleware<span class="token punctuation">.</span><span class="token function">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="assign-middleware-for-routing" tabindex="-1"><a class="header-anchor" href="#assign-middleware-for-routing"><span>Assign Middleware for Routing</span></a></h3><p>You can register the middleware for some routing separately:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/http/middleware&quot;</span></span>
<span class="line"></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Middleware</span><span class="token punctuation">(</span>middleware<span class="token punctuation">.</span><span class="token function">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> userController<span class="token punctuation">.</span>Show<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="abort-request" tabindex="-1"><a class="header-anchor" href="#abort-request"><span>Abort Request</span></a></h2><p>In middleware, if you need to interrupt the request, you can use the <code>Abort</code> method.</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">,</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17)),s(p)])}const h=o(u,[["render",k],["__file","middleware.html.vue"]]),w=JSON.parse('{"path":"/the-basics/middleware.html","title":"Middleware","lang":"en-US","frontmatter":{"description":"Middleware Introduction Middleware provide a convenient mechanism for inspecting and filtering HTTP requests entering your application. Define Middleware You can create your own...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goravel.dev/zh/the-basics/middleware.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/the-basics/middleware.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/the-basics/middleware.html"}],["meta",{"property":"og:description","content":"Middleware Introduction Middleware provide a convenient mechanism for inspecting and filtering HTTP requests entering your application. Define Middleware You can create your own..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Middleware\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Introduction","slug":"introduction","link":"#introduction","children":[]},{"level":2,"title":"Define Middleware","slug":"define-middleware","link":"#define-middleware","children":[{"level":3,"title":"Create Middleware By Command","slug":"create-middleware-by-command","link":"#create-middleware-by-command","children":[]}]},{"level":2,"title":"Register Middleware","slug":"register-middleware","link":"#register-middleware","children":[{"level":3,"title":"Global Middleware","slug":"global-middleware","link":"#global-middleware","children":[]},{"level":3,"title":"Assign Middleware for Routing","slug":"assign-middleware-for-routing","link":"#assign-middleware-for-routing","children":[]}]},{"level":2,"title":"Abort Request","slug":"abort-request","link":"#abort-request","children":[]}],"git":{},"filePathRelative":"the-basics/middleware.md","autoDesc":true}');export{h as comp,w as data};
