import{_ as o,c as i,a as p,b as s,e,f as t,r,o as c,d as l}from"./app-ELDWQP0J.js";const u={};function d(h,n){const a=r("RouteLink");return c(),i("div",null,[n[11]||(n[11]=p(`<h1 id="从-v1-12-升级到-v1-13" tabindex="-1"><a class="header-anchor" href="#从-v1-12-升级到-v1-13"><span>从 v1.12 升级到 v1.13</span></a></h1><h3 id="令人兴奋的新功能-🎉" tabindex="-1"><a class="header-anchor" href="#令人兴奋的新功能-🎉"><span>令人兴奋的新功能 🎉</span></a></h3><ul><li><a href="#%E6%95%B0%E6%8D%AE%E5%A1%AB%E5%85%85">数据填充</a></li><li><a href="#%E6%A8%A1%E5%9E%8B%E5%B7%A5%E5%8E%82">模型工厂</a></li><li><a href="#%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95">集成测试</a></li><li><a href="#%E8%A7%86%E5%9B%BE">视图</a></li></ul><h3 id="功能增强-🚀" tabindex="-1"><a class="header-anchor" href="#功能增强-🚀"><span>功能增强 🚀</span></a></h3><ul><li><a href="#go-%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E4%B8%BA-1-20">Go 默认版本升级为 1.20</a></li><li><a href="#%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%94%AF%E6%8C%81%E6%A8%AA%E5%90%91%E4%BC%B8%E7%BC%A9">任务调度支持横向伸缩</a></li><li><a href="#%E6%96%B0%E5%A2%9E-debug-%E6%96%B9%E6%B3%95">新增 debug 方法</a></li><li><a href="#make-controller-%E5%91%BD%E4%BB%A4%E6%96%B0%E5%A2%9E%E5%8F%82%E6%95%B0">make:controller 命令新增参数</a></li><li><a href="#response-%E6%96%B0%E5%A2%9E-status-%E6%96%B9%E6%B3%95">Response 新增 Status 方法</a></li><li><a href="#orm-%E6%96%B0%E5%A2%9E-sum-%E5%92%8C-cursor-%E6%96%B9%E6%B3%95">Orm 新增 Sum 和 Cursor 方法</a></li><li><a href="#route-%E6%A8%A1%E5%9D%97%E6%94%AF%E6%8C%81%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8">Route 模块支持配置驱动</a></li><li><a href="#request-%E6%96%B0%E5%A2%9E-inputarray-%E5%92%8C-inputmap-%E6%96%B9%E6%B3%95">Request 新增 InputArray 和 InputMap 方法</a></li><li><a href="#orm-%E6%A8%A1%E5%9E%8B%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89%E9%93%BE%E6%8E%A5">Orm 模型支持自定义链接</a></li><li><a href="#filesystem-%E6%A8%A1%E5%9D%97%E6%96%B0%E5%A2%9E-cloudinary-%E9%A9%B1%E5%8A%A8">Filesystem 模块新增 Cloudinary 驱动</a></li><li><a href="#log-%E6%96%B0%E5%A2%9E%E9%93%BE%E5%BC%8F%E6%96%B9%E6%B3%95">Log 新增链式方法</a></li></ul><h4 id="v1-13-4" tabindex="-1"><a class="header-anchor" href="#v1-13-4"><span>v1.13.4</span></a></h4><ul><li><a href="#%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E6%94%AF%E6%8C%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">服务启动支持环境变量</a></li></ul><h3 id="破坏性变化-🛠" tabindex="-1"><a class="header-anchor" href="#破坏性变化-🛠"><span>破坏性变化 🛠</span></a></h3><ul><li><a href="#_5-%E7%A7%BB%E9%99%A4%E9%BB%98%E8%AE%A4%E5%8A%A0%E8%BD%BD%E7%9A%84-http-%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6">移除默认加载的 HTTP 全局中间件</a></li><li><a href="#_6-%E4%BC%98%E5%8C%96-controller-%E8%BF%94%E5%9B%9E">优化 Controller 返回</a></li><li><a href="#_7-%E4%BF%AE%E6%94%B9-facades-route-%E4%B8%AD-group-%E6%96%B9%E6%B3%95%E7%9A%84%E5%85%A5%E5%8F%82">修改 facades.Route() 中 Group 方法的入参</a></li><li><a href="#_8-%E4%BF%AE%E6%94%B9-facades-cache-%E4%B8%AD-remember-%E4%B8%8E-rememberforever-%E6%96%B9%E6%B3%95-%E5%A6%82%E6%9E%9C%E7%94%A8%E5%88%B0">优化 facades.Cache() 中 Remember 与 RememberForever 方法（如果用到）</a></li><li><a href="#_9-%E4%BF%AE%E6%94%B9-access-newallowresponse-%E4%B8%8E-access-newdenyresponse-%E5%8C%85%E5%90%8D-%E5%A6%82%E6%9E%9C%E7%94%A8%E5%88%B0">修改 access.NewAllowResponse 与 access.NewDenyResponse 包名（如果用到）</a></li><li><a href="#_10-%E7%A7%BB%E9%99%A4%E5%BA%9F%E5%BC%83%E6%96%B9%E6%B3%95-%E5%A6%82%E6%9E%9C%E7%94%A8%E5%88%B0">移除废弃方法（如果用到）</a></li></ul><h3 id="bug-修复-🐛" tabindex="-1"><a class="header-anchor" href="#bug-修复-🐛"><span>Bug 修复 🐛</span></a></h3><ul><li><a href="#%E4%BF%AE%E5%A4%8D-facades-auth-user-%E7%9A%84%E9%97%AE%E9%A2%98">修复 facades.Auth().User() 的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D%E8%87%AA%E5%AE%9A%E4%B9%89-env-%E8%B7%AF%E7%94%B1%E6%9F%90%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98">修复自定义 .env 路由某些情况下不生效的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-jwt-%E4%B8%AD%E8%AE%BE%E7%BD%AE-ttl-0-%E6%97%B6-token-%E7%AB%8B%E5%8D%B3%E8%BF%87%E6%9C%9F%E7%9A%84%E9%97%AE%E9%A2%98">修复 JWT 中设置 ttl == 0 时 token 立即过期的问题</a></li></ul><h4 id="v1-13-2" tabindex="-1"><a class="header-anchor" href="#v1-13-2"><span>v1.13.2</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D-facades-storage-url-%E5%9C%A8-windows-%E7%B3%BB%E7%BB%9F%E4%B8%8B%E8%B7%AF%E5%BE%84%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98">修复 facades.Storage().Url() 在 windows 系统下路径错误的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-postgres-%E5%AF%86%E7%A0%81%E4%B8%BA%E7%A9%BA%E6%97%B6%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%B8%B8%E7%9A%84%E9%97%AE%E9%A2%98">修复 Postgres 密码为空时连接异常的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D%E4%BD%BF%E7%94%A8-orm-cursor-%E6%96%B9%E6%B3%95%E6%97%B6-with-%E6%96%B9%E6%B3%95%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98">修复使用 Orm Cursor 方法时 With 方法无效的问题</a></li></ul><h4 id="v1-13-4-1" tabindex="-1"><a class="header-anchor" href="#v1-13-4-1"><span>v1.13.4</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D-validation-%E6%97%A0%E6%B3%95%E6%A0%A1%E9%AA%8C%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98">修复 validation 无法校验路由参数的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-fiber-%E9%A9%B1%E5%8A%A8%E6%97%A0%E6%B3%95%E8%BF%94%E5%9B%9E%E6%96%87%E4%BB%B6%E7%9A%84%E9%97%AE%E9%A2%98">修复 Fiber 驱动无法返回文件的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-fiber-%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6-panic-%E7%9A%84%E9%97%AE%E9%A2%98">修复 Fiber 驱动全局中间件 panic 的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-fiber-%E9%A9%B1%E5%8A%A8%E7%9A%84-contenttype-%E8%AE%BE%E7%BD%AE%E4%B8%8E-gin-%E9%A9%B1%E5%8A%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E9%97%AE%E9%A2%98">修复 Fiber 驱动的 ContentType 设置与 Gin 驱动不同的问题</a></li></ul><h4 id="v1-13-5" tabindex="-1"><a class="header-anchor" href="#v1-13-5"><span>v1.13.5</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D%E6%A8%A1%E5%9E%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E9%93%BE%E6%8E%A5%E4%B8%8D%E7%94%9F%E6%95%88">修复模型自定义链接不生效</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-mock-log-%E6%8A%A5%E9%94%99">修复 Mock Log 报错</a></li></ul><h4 id="v1-13-6-v1-13-7" tabindex="-1"><a class="header-anchor" href="#v1-13-6-v1-13-7"><span>v1.13.6 v1.13.7</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D%E9%98%9F%E5%88%97%E4%BB%BB%E5%8A%A1%E9%93%BE%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%89%A7%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98">修复队列任务链非线性执行的问题</a></li></ul><h4 id="v1-13-8" tabindex="-1"><a class="header-anchor" href="#v1-13-8"><span>v1.13.8</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C-guard-%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8-facades-auth-parse-%E6%95%B0%E6%8D%AE%E8%A2%AB%E8%A6%86%E7%9B%96%E7%9A%84%E9%97%AE%E9%A2%98">修复使用不同 Guard 多次调用 facades.Auth().Parse() 数据被覆盖的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D%E4%BD%BF%E7%94%A8-facades-orm-withcontext-%E8%AE%BE%E7%BD%AE-ctx-%E6%97%A0%E6%B3%95%E8%A2%AB%E6%AD%A3%E7%A1%AE%E4%BC%A0%E8%BE%BE%E5%88%B0-event-context-%E7%9A%84%E9%97%AE%E9%A2%98">修复使用 facades.Orm().WithContext() 设置 ctx 无法被正确传达到 event.Context() 的问题</a></li><li><a href="#%E4%BC%98%E5%8C%96%E9%98%9F%E5%88%97%E6%97%A5%E5%BF%97%E6%A0%B9%E6%8D%AE-app-debug-%E8%AE%BE%E7%BD%AE%E6%98%BE%E7%A4%BA">优化队列日志根据 APP_DEBUG 设置显示</a></li></ul><h4 id="v1-13-9" tabindex="-1"><a class="header-anchor" href="#v1-13-9"><span>v1.13.9</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D-log-%E6%8D%A2%E8%A1%8C%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98">修复 Log 换行错误的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-vendor-publish-%E5%91%BD%E4%BB%A4%E6%97%A0%E6%B3%95%E5%8F%91%E5%B8%83%E5%A4%9A%E5%B1%82%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E9%97%AE%E9%A2%98">修复 vendor:publish 命令无法发布多层文件夹的问题</a></li></ul><h4 id="v1-13-10" tabindex="-1"><a class="header-anchor" href="#v1-13-10"><span>v1.13.10</span></a></h4><ul><li><a href="#%E4%BF%AE%E5%A4%8D-log-%E4%B8%AD-traces-%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98">修复 Log 中 traces 错误的问题</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-orm-event-%E4%B8%AD-getattribute-%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98">修复 orm event 中 GetAttribute 方法返回数据错误的问题</a></li><li><a href="#orm-%E6%96%B0%E5%A2%9E-tosql-torawsql-%E6%96%B9%E6%B3%95">ORM 新增 ToSql, ToRawSql 方法</a></li></ul><h2 id="升级指南" tabindex="-1"><a class="header-anchor" href="#升级指南"><span>升级指南</span></a></h2><p>请根据本节内容，一步步进行框架升级。</p><p><strong>预计升级时间：10 分钟</strong></p><h3 id="_1-更新依赖" tabindex="-1"><a class="header-anchor" href="#_1-更新依赖"><span>1. 更新依赖</span></a></h3><p><code>go.mod</code> 中更新依赖：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go get -u github.com/goravel/framework@v1.13.9 &amp;&amp; go get -u github.com/goravel/gin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-新增文件" tabindex="-1"><a class="header-anchor" href="#_2-新增文件"><span>2. 新增文件</span></a></h3><p><a href="https://github.com/goravel/goravel/tree/v1.13.x/tests" target="_blank" rel="noopener noreferrer">tests</a></p><p><a href="https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go" target="_blank" rel="noopener noreferrer">database/seeders/database_seeder.go</a></p><p><a href="https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go" target="_blank" rel="noopener noreferrer">app/providers/database_service_provider.go</a></p><h3 id="_3-注册新的-provider" tabindex="-1"><a class="header-anchor" href="#_3-注册新的-provider"><span>3. 注册新的 Provider</span></a></h3><p>注意顺序：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/testing&quot;</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/gin&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// config/app.go</span></span>
<span class="line"><span class="token string">&quot;providers&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>foundation<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token operator">&amp;</span>validation<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// New</span></span>
<span class="line">  <span class="token operator">&amp;</span>testing<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token operator">&amp;</span>providers<span class="token punctuation">.</span>AppServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token operator">&amp;</span>providers<span class="token punctuation">.</span>ValidationServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// New</span></span>
<span class="line">  <span class="token operator">&amp;</span>providers<span class="token punctuation">.</span>DatabaseServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token comment">// New</span></span>
<span class="line">  <span class="token operator">&amp;</span>gin<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-新增配置" tabindex="-1"><a class="header-anchor" href="#_4-新增配置"><span>4. 新增配置</span></a></h3><p>修改 <a href="https://github.com/goravel/goravel/tree/v1.13.x/config/http.go" target="_blank" rel="noopener noreferrer">config/http.go</a></p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/contracts/route&quot;</span></span>
<span class="line">  <span class="token string">&quot;github.com/goravel/framework/facades&quot;</span></span>
<span class="line">  ginfacades <span class="token string">&quot;github.com/goravel/gin/facades&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">config<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// HTTP Driver</span></span>
<span class="line">  <span class="token string">&quot;default&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;gin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// HTTP Drivers</span></span>
<span class="line">  <span class="token string">&quot;drivers&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;gin&quot;</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;route&quot;</span><span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>Route<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> ginfacades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;gin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改 <a href="https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go" target="_blank" rel="noopener noreferrer">config/cors.go</a></p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">config<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;cors&quot;</span><span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token comment">// New</span></span>
<span class="line">  <span class="token string">&quot;paths&quot;</span><span class="token punctuation">:</span>                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token string">&quot;allowed_methods&quot;</span><span class="token punctuation">:</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-移除默认加载的-http-全局中间件" tabindex="-1"><a class="header-anchor" href="#_5-移除默认加载的-http-全局中间件"><span>5. 移除默认加载的 HTTP 全局中间件</span></a></h3><ol><li><p><code>tls</code> 与 <code>cors</code> 中间件已集成至默认 HTTP 驱动中，因此 <code>app/http/kernel.go</code> 文件中的 <code>middleware.Cors()</code> 与 <code>middleware.Tls()</code> 需被移除。</p></li><li><p><code>app/providers/route_service_provider.go</code> 文件中 <code>facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)</code> 方法从 <code>Register</code> 移动至 <code>Boot</code>:</p></li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> providers</span>
<span class="line"></span>
<span class="line"><span class="token operator">...</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> RouteServiceProvider <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>RouteServiceProvider<span class="token punctuation">)</span> <span class="token function">Register</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>RouteServiceProvider<span class="token punctuation">)</span> <span class="token function">Boot</span><span class="token punctuation">(</span>app foundation<span class="token punctuation">.</span>Application<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">//Add HTTP middleware</span></span>
<span class="line">  facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GlobalMiddleware</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>Kernel<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  receiver<span class="token punctuation">.</span><span class="token function">configureRateLimiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  routes<span class="token punctuation">.</span><span class="token function">Web</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>receiver <span class="token operator">*</span>RouteServiceProvider<span class="token punctuation">)</span> <span class="token function">configureRateLimiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-优化-controller-返回" tabindex="-1"><a class="header-anchor" href="#_6-优化-controller-返回"><span>6. 优化 Controller 返回</span></a></h3><p><code>Controller</code> 增加返回值 <code>http.Response</code>，<code>ctx.Response()</code> 可直接返回，不需要再单独 <code>return</code>，使逻辑更加流畅：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Before</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>UserController<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span>ctx http<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  ctx<span class="token punctuation">.</span><span class="token function">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Json</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>Json<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Goravel&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">return</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// After</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>UserController<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span>ctx http<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> http<span class="token punctuation">.</span>Response <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Json</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>Json<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Goravel&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-修改-facades-route-中-group-方法的入参" tabindex="-1"><a class="header-anchor" href="#_7-修改-facades-route-中-group-方法的入参"><span>7. 修改 facades.Route() 中 Group 方法的入参</span></a></h3><p><code>route.Route</code> 修改为 <code>route.Router</code>：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Before</span></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>route route<span class="token punctuation">.</span>Route<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// After</span></span>
<span class="line">facades<span class="token punctuation">.</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>route route<span class="token punctuation">.</span>Router<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-修改-facades-cache-中-remember-与-rememberforever-方法-如果用到" tabindex="-1"><a class="header-anchor" href="#_8-修改-facades-cache-中-remember-与-rememberforever-方法-如果用到"><span>8. 修改 facades.Cache() 中 Remember 与 RememberForever 方法（如果用到）</span></a></h3><p><code>callback</code> 类型由 <code>func() any</code> 修改为 <code>func() (any, error)</code>：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Before</span></span>
<span class="line"><span class="token function">Remember</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> ttl time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> callback <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any<span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">RememberForever</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> callback <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any<span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// After</span></span>
<span class="line"><span class="token function">Remember</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> ttl time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> callback <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">RememberForever</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> callback <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>any<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-修改-access-newallowresponse-与-access-newdenyresponse-包名-如果用到" tabindex="-1"><a class="header-anchor" href="#_9-修改-access-newallowresponse-与-access-newdenyresponse-包名-如果用到"><span>9. 修改 access.NewAllowResponse 与 access.NewDenyResponse 包名（如果用到）</span></a></h3><p>由 <code>/contracts/auth/access</code> 修改为 <code>/auth/access</code>:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Before</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/contracts/auth/access&quot;</span></span>
<span class="line"></span>
<span class="line">access<span class="token punctuation">.</span><span class="token function">NewAllowResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">access<span class="token punctuation">.</span><span class="token function">NewDenyResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// After</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/goravel/framework/auth/access&quot;</span></span>
<span class="line"></span>
<span class="line">access<span class="token punctuation">.</span><span class="token function">NewAllowResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">access<span class="token punctuation">.</span><span class="token function">NewDenyResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-移除废弃方法-如果用到" tabindex="-1"><a class="header-anchor" href="#_10-移除废弃方法-如果用到"><span>10. 移除废弃方法（如果用到）</span></a></h3><ol><li><p>移除 <code>ctx.Request().Form()</code> 和 <code>ctx.Request().Json()</code> 方法，使用 <code>ctx.Request().Input()</code> 方法替代；</p></li><li><p>移除 <code>Log</code> 自定义驱动的 <code>GetLevel</code>, <code>GetTime</code>, <code>GetMessage</code> 方法，使用 <code>Level</code>, <code>Time</code>, <code>Message</code> 方法替代；</p></li><li><p>移除 <code>gorm.New</code> 方法，该方法用于直接获取 <code>gorm</code> 实例，已不推荐使用，如有必要，请使用 <code>gorm.NewGormImpl</code> 方法替代；</p></li></ol><h2 id="功能介绍" tabindex="-1"><a class="header-anchor" href="#功能介绍"><span>功能介绍</span></a></h2><h3 id="数据填充" tabindex="-1"><a class="header-anchor" href="#数据填充"><span>数据填充</span></a></h3><p>Version: v1.13.1</p>`,63)),s("p",null,[e(a,{to:"/zh/orm/seeding.html"},{default:t(()=>n[0]||(n[0]=[l("查看文档")])),_:1})]),n[12]||(n[12]=s("h3",{id:"模型工厂",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#模型工厂"},[s("span",null,"模型工厂")])],-1)),n[13]||(n[13]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/orm/factories.html"},{default:t(()=>n[1]||(n[1]=[l("查看文档")])),_:1})]),n[14]||(n[14]=s("h3",{id:"集成测试",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#集成测试"},[s("span",null,"集成测试")])],-1)),n[15]||(n[15]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/testing/getting-started.html"},{default:t(()=>n[2]||(n[2]=[l("查看文档")])),_:1})]),n[16]||(n[16]=s("h3",{id:"视图",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#视图"},[s("span",null,"视图")])],-1)),n[17]||(n[17]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/the-basics/views.html"},{default:t(()=>n[3]||(n[3]=[l("查看文档")])),_:1})]),n[18]||(n[18]=p('<h3 id="go-默认版本升级为-1-20" tabindex="-1"><a class="header-anchor" href="#go-默认版本升级为-1-20"><span>Go 默认版本升级为 1.20</span></a></h3><p>Version: v1.13.1</p><p>go 1.18 和 1.19 已停止维护，框架相应升级到 1.20，<a href="https://endoflife.date/go" target="_blank" rel="noopener noreferrer">查看详情</a>。如果想继续使用 1.18 和 1.19 版本，修改 <code>go.mod</code> 中的版本号即可，目前它们功能完全兼容。</p><h3 id="任务调度支持横向伸缩" tabindex="-1"><a class="header-anchor" href="#任务调度支持横向伸缩"><span>任务调度支持横向伸缩</span></a></h3><p>Version: v1.13.1</p>',5)),s("p",null,[e(a,{to:"/zh/digging-deeper/task-scheduling.html#%E4%BB%BB%E5%8A%A1%E5%8F%AA%E8%BF%90%E8%A1%8C%E5%9C%A8%E4%B8%80%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A"},{default:t(()=>n[4]||(n[4]=[l("查看文档")])),_:1})]),n[19]||(n[19]=s("h3",{id:"新增-debug-方法",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#新增-debug-方法"},[s("span",null,"新增 debug 方法")])],-1)),n[20]||(n[20]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/digging-deeper/helpers.html#debug"},{default:t(()=>n[5]||(n[5]=[l("查看文档")])),_:1})]),n[21]||(n[21]=p(`<h3 id="make-controller-命令新增参数" tabindex="-1"><a class="header-anchor" href="#make-controller-命令新增参数"><span>make:controller 命令新增参数</span></a></h3><p>Version: v1.13.1</p><p><code>make:controller</code> 命令新增 <code>--resource</code> 参数，可以便捷的生成 CURD struct：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go run . artisan make:controller --resource UserController</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="response-新增-status-方法" tabindex="-1"><a class="header-anchor" href="#response-新增-status-方法"><span>Response 新增 Status 方法</span></a></h3><p>Version: v1.13.1</p>`,6)),s("p",null,[e(a,{to:"/zh/the-basics/response.html#%E8%87%AA%E5%AE%9A%E4%B9%89-code"},{default:t(()=>n[6]||(n[6]=[l("查看文档")])),_:1})]),n[22]||(n[22]=s("h3",{id:"orm-新增-sum-和-cursor-方法",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#orm-新增-sum-和-cursor-方法"},[s("span",null,"Orm 新增 Sum 和 Cursor 方法")])],-1)),n[23]||(n[23]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/orm/getting-started.html#facades-orm-query-facades-orm-transaction-%E5%8F%AF%E7%94%A8%E6%96%B9%E6%B3%95"},{default:t(()=>n[7]||(n[7]=[l("查看文档")])),_:1})]),n[24]||(n[24]=p('<h3 id="route-模块支持配置驱动" tabindex="-1"><a class="header-anchor" href="#route-模块支持配置驱动"><span>Route 模块支持配置驱动</span></a></h3><p>Version: v1.13.1</p><p>将 Route 模块原默认驱动 Gin 独立成包，通过配置的方式注入到 Goravel 中。本次优化后，为其他 HTTP 包注入到 Goravel 提供了便捷的通道，目前官方支持两个 HTTP 包：</p><table><thead><tr><th>驱动</th><th>地址</th></tr></thead><tbody><tr><td>Gin</td><td><a href="https://github.com/goravel/gin" target="_blank" rel="noopener noreferrer">https://github.com/goravel/gin</a></td></tr><tr><td>Fiber</td><td><a href="https://github.com/goravel/fiber" target="_blank" rel="noopener noreferrer">https://github.com/goravel/fiber</a></td></tr></tbody></table><h3 id="request-新增-inputarray-和-inputmap-方法" tabindex="-1"><a class="header-anchor" href="#request-新增-inputarray-和-inputmap-方法"><span>Request 新增 InputArray 和 InputMap 方法</span></a></h3><p>Version: v1.13.1</p>',6)),s("p",null,[e(a,{to:"/zh/the-basics/request.html#%E6%A3%80%E7%B4%A2%E4%B8%80%E4%B8%AA%E8%BE%93%E5%85%A5%E5%80%BC"},{default:t(()=>n[8]||(n[8]=[l("查看文档")])),_:1})]),n[25]||(n[25]=s("h3",{id:"orm-模型支持自定义链接",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#orm-模型支持自定义链接"},[s("span",null,"Orm 模型支持自定义链接")])],-1)),n[26]||(n[26]=s("p",null,"Version: v1.13.1",-1)),s("p",null,[e(a,{to:"/zh/orm/getting-started.html#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"},{default:t(()=>n[9]||(n[9]=[l("查看文档")])),_:1})]),n[27]||(n[27]=p('<h3 id="filesystem-模块新增-cloudinary-驱动" tabindex="-1"><a class="header-anchor" href="#filesystem-模块新增-cloudinary-驱动"><span>Filesystem 模块新增 Cloudinary 驱动</span></a></h3><p>Version: v1.13.1</p><p><a href="https://github.com/goravel/cloudinary" target="_blank" rel="noopener noreferrer">查看文档</a></p><h3 id="log-新增链式方法" tabindex="-1"><a class="header-anchor" href="#log-新增链式方法"><span>Log 新增链式方法</span></a></h3><p>Version: v1.13.1</p>',5)),s("p",null,[e(a,{to:"/zh/the-basics/logging.html#%E9%93%BE%E5%BC%8F%E6%96%B9%E6%B3%95"},{default:t(()=>n[10]||(n[10]=[l("查看文档")])),_:1})]),n[28]||(n[28]=p('<h3 id="修复-facades-auth-user-的问题" tabindex="-1"><a class="header-anchor" href="#修复-facades-auth-user-的问题"><span>修复 facades.Auth().User() 的问题</span></a></h3><p>Version: v1.13.1</p><ol><li><p>修复使用 <code>facades.Auth().User(ctx, &amp;user)</code> 方法时，如果 <code>user</code> 不存在不抛出错误的问题。</p></li><li><p>修复当主键非 <code>int</code> 类型时，无法找到 <code>user</code> 的问题；</p></li></ol><h3 id="修复自定义-env-路由某些情况下不生效的问题" tabindex="-1"><a class="header-anchor" href="#修复自定义-env-路由某些情况下不生效的问题"><span>修复自定义 .env 路由某些情况下不生效的问题</span></a></h3><p>Version: v1.13.1</p><h3 id="修复-jwt-中设置-ttl-0-时-token-立即过期的问题" tabindex="-1"><a class="header-anchor" href="#修复-jwt-中设置-ttl-0-时-token-立即过期的问题"><span>修复 JWT 中设置 ttl == 0 时 token 立即过期的问题</span></a></h3><p>Version: v1.13.1</p><p>预期当 <code>ttl == 0</code> 时，token 永不过期。</p><h3 id="修复-facades-storage-url-在-windows-系统下路径错误的问题" tabindex="-1"><a class="header-anchor" href="#修复-facades-storage-url-在-windows-系统下路径错误的问题"><span>修复 facades.Storage().Url() 在 windows 系统下路径错误的问题</span></a></h3><p>Version: v1.13.2</p><p><a href="https://github.com/goravel/goravel/issues/263" target="_blank" rel="noopener noreferrer">Issue #263</a></p><h3 id="修复-postgres-密码为空时连接异常的问题" tabindex="-1"><a class="header-anchor" href="#修复-postgres-密码为空时连接异常的问题"><span>修复 Postgres 密码为空时连接异常的问题</span></a></h3><p>Version: v1.13.2</p><p><a href="https://github.com/goravel/goravel/issues/270" target="_blank" rel="noopener noreferrer">Issue #270</a></p><h3 id="修复使用-orm-cursor-方法时-with-方法无效的问题" tabindex="-1"><a class="header-anchor" href="#修复使用-orm-cursor-方法时-with-方法无效的问题"><span>修复使用 Orm Cursor 方法时 With 方法无效的问题</span></a></h3><p>Version: v1.13.2</p><p><a href="https://github.com/goravel/goravel/issues/253" target="_blank" rel="noopener noreferrer">Issue #253</a></p><h3 id="服务启动支持环境变量" tabindex="-1"><a class="header-anchor" href="#服务启动支持环境变量"><span>服务启动支持环境变量</span></a></h3><p>Version: v1.13.4</p><p><a href="https://github.com/goravel/goravel/issues/265" target="_blank" rel="noopener noreferrer">Issue #265</a></p><h3 id="修复-validation-无法校验路由参数的问题" tabindex="-1"><a class="header-anchor" href="#修复-validation-无法校验路由参数的问题"><span>修复 validation 无法校验路由参数的问题</span></a></h3><p>goravel/gin: v1.1.6</p><p>goravel/fiber: v1.1.11</p><p><a href="https://github.com/goravel/goravel/issues/294" target="_blank" rel="noopener noreferrer">Issue #294</a></p><h3 id="修复-fiber-驱动无法返回文件的问题" tabindex="-1"><a class="header-anchor" href="#修复-fiber-驱动无法返回文件的问题"><span>修复 Fiber 驱动无法返回文件的问题</span></a></h3><p>goravel/fiber: v1.1.11</p><p><a href="https://github.com/goravel/goravel/issues/299" target="_blank" rel="noopener noreferrer">Issue #299</a></p><h3 id="修复-fiber-驱动全局中间件-panic-的问题" tabindex="-1"><a class="header-anchor" href="#修复-fiber-驱动全局中间件-panic-的问题"><span>修复 Fiber 驱动全局中间件 panic 的问题</span></a></h3><p>goravel/fiber: v1.1.11</p><p><a href="https://github.com/goravel/goravel/issues/300" target="_blank" rel="noopener noreferrer">Issue #300</a></p><h3 id="修复-fiber-驱动的-contenttype-设置与-gin-驱动不同的问题" tabindex="-1"><a class="header-anchor" href="#修复-fiber-驱动的-contenttype-设置与-gin-驱动不同的问题"><span>修复 Fiber 驱动的 ContentType 设置与 Gin 驱动不同的问题</span></a></h3><p>goravel/fiber: v1.1.11</p><p><a href="https://github.com/goravel/goravel/issues/296" target="_blank" rel="noopener noreferrer">Issue #296</a></p><h3 id="修复模型自定义链接不生效" tabindex="-1"><a class="header-anchor" href="#修复模型自定义链接不生效"><span>修复模型自定义链接不生效</span></a></h3><p>goravel/framework: v1.13.5</p><p><a href="https://github.com/goravel/goravel/issues/312" target="_blank" rel="noopener noreferrer">Issue #312</a></p><h3 id="修复-mock-log-报错" tabindex="-1"><a class="header-anchor" href="#修复-mock-log-报错"><span>修复 Mock Log 报错</span></a></h3><p>goravel/framework: v1.13.5</p><p><a href="https://github.com/goravel/goravel/issues/320" target="_blank" rel="noopener noreferrer">Issue #320</a></p><h3 id="修复队列任务链非线性执行的问题" tabindex="-1"><a class="header-anchor" href="#修复队列任务链非线性执行的问题"><span>修复队列任务链非线性执行的问题</span></a></h3><p>goravel/framework: v1.13.6 v1.13.7</p><p><a href="https://github.com/goravel/goravel/issues/341" target="_blank" rel="noopener noreferrer">Issue #341</a></p><h3 id="修复使用不同-guard-多次调用-facades-auth-parse-数据被覆盖的问题" tabindex="-1"><a class="header-anchor" href="#修复使用不同-guard-多次调用-facades-auth-parse-数据被覆盖的问题"><span>修复使用不同 Guard 多次调用 facades.Auth().Parse() 数据被覆盖的问题</span></a></h3><p>goravel/framework: v1.13.8</p><p><a href="https://github.com/goravel/goravel/issues/388" target="_blank" rel="noopener noreferrer">Issue #388</a></p><h3 id="修复使用-facades-orm-withcontext-设置-ctx-无法被正确传达到-event-context-的问题" tabindex="-1"><a class="header-anchor" href="#修复使用-facades-orm-withcontext-设置-ctx-无法被正确传达到-event-context-的问题"><span>修复使用 facades.Orm().WithContext() 设置 ctx 无法被正确传达到 event.Context() 的问题</span></a></h3><p>goravel/framework: v1.13.8</p><p><a href="https://github.com/goravel/goravel/issues/390" target="_blank" rel="noopener noreferrer">Issue #390</a></p><h3 id="优化队列日志根据-app-debug-设置显示" tabindex="-1"><a class="header-anchor" href="#优化队列日志根据-app-debug-设置显示"><span>优化队列日志根据 APP_DEBUG 设置显示</span></a></h3><p>goravel/framework: v1.13.8</p><p><code>Debug</code> 和 <code>Info</code> 级别日志在 <code>APP_DEBUG=false</code> 时将不会被打印。</p><p><a href="https://github.com/goravel/goravel/issues/389" target="_blank" rel="noopener noreferrer">Issue #389</a></p><h3 id="修复-log-换行错误的问题" tabindex="-1"><a class="header-anchor" href="#修复-log-换行错误的问题"><span>修复 Log 换行错误的问题</span></a></h3><p>goravel/framework: v1.13.9</p><p><a href="https://github.com/goravel/goravel/issues/395" target="_blank" rel="noopener noreferrer">Issue #395</a></p><h3 id="修复-vendor-publish-命令无法发布多层文件夹的问题" tabindex="-1"><a class="header-anchor" href="#修复-vendor-publish-命令无法发布多层文件夹的问题"><span>修复 vendor:publish 命令无法发布多层文件夹的问题</span></a></h3><p>goravel/framework: v1.13.9</p><p><a href="https://github.com/goravel/goravel/issues/345" target="_blank" rel="noopener noreferrer">Issue #345</a></p><h3 id="修复-log-中-traces-错误的问题" tabindex="-1"><a class="header-anchor" href="#修复-log-中-traces-错误的问题"><span>修复 Log 中 traces 错误的问题</span></a></h3><p>goravel/framework: v1.13.10</p><p><a href="https://github.com/goravel/goravel/issues/402" target="_blank" rel="noopener noreferrer">Issue #402</a></p><h3 id="修复-orm-event-中-getattribute-方法返回数据错误的问题" tabindex="-1"><a class="header-anchor" href="#修复-orm-event-中-getattribute-方法返回数据错误的问题"><span>修复 orm event 中 GetAttribute 方法返回数据错误的问题</span></a></h3><p>goravel/framework: v1.13.10</p><p><a href="https://github.com/goravel/goravel/issues/405" target="_blank" rel="noopener noreferrer">Issue #405</a></p><h3 id="orm-新增-tosql-torawsql-方法" tabindex="-1"><a class="header-anchor" href="#orm-新增-tosql-torawsql-方法"><span>ORM 新增 ToSql, ToRawSql 方法</span></a></h3><p>goravel/framework: v1.13.10</p><p><a href="https://github.com/goravel/goravel/issues/411" target="_blank" rel="noopener noreferrer">Issue #411</a></p>',67))])}const E=o(u,[["render",d],["__file","v1.13.html.vue"]]),k=JSON.parse('{"path":"/zh/upgrade/v1.13.html","title":"从 v1.12 升级到 v1.13","lang":"zh-CN","frontmatter":{"description":"从 v1.12 升级到 v1.13 令人兴奋的新功能 🎉 数据填充 模型工厂 集成测试 视图 功能增强 🚀 Go 默认版本升级为 1.20 任务调度支持横向伸缩 新增 debug 方法 make:controller 命令新增参数 Response 新增 Status 方法 Orm 新增 Sum 和 Cursor 方法 Route 模块支持配置驱动...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://goravel.dev/upgrade/v1.13.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/zh/upgrade/v1.13.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/upgrade/v1.13.html"}],["meta",{"property":"og:description","content":"从 v1.12 升级到 v1.13 令人兴奋的新功能 🎉 数据填充 模型工厂 集成测试 视图 功能增强 🚀 Go 默认版本升级为 1.20 任务调度支持横向伸缩 新增 debug 方法 make:controller 命令新增参数 Response 新增 Status 方法 Orm 新增 Sum 和 Cursor 方法 Route 模块支持配置驱动..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"从 v1.12 升级到 v1.13\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":3,"title":"令人兴奋的新功能 🎉","slug":"令人兴奋的新功能-🎉","link":"#令人兴奋的新功能-🎉","children":[]},{"level":3,"title":"功能增强 🚀","slug":"功能增强-🚀","link":"#功能增强-🚀","children":[]},{"level":3,"title":"破坏性变化 🛠","slug":"破坏性变化-🛠","link":"#破坏性变化-🛠","children":[]},{"level":3,"title":"Bug 修复 🐛","slug":"bug-修复-🐛","link":"#bug-修复-🐛","children":[]},{"level":2,"title":"升级指南","slug":"升级指南","link":"#升级指南","children":[{"level":3,"title":"1. 更新依赖","slug":"_1-更新依赖","link":"#_1-更新依赖","children":[]},{"level":3,"title":"2. 新增文件","slug":"_2-新增文件","link":"#_2-新增文件","children":[]},{"level":3,"title":"3. 注册新的 Provider","slug":"_3-注册新的-provider","link":"#_3-注册新的-provider","children":[]},{"level":3,"title":"4. 新增配置","slug":"_4-新增配置","link":"#_4-新增配置","children":[]},{"level":3,"title":"5. 移除默认加载的 HTTP 全局中间件","slug":"_5-移除默认加载的-http-全局中间件","link":"#_5-移除默认加载的-http-全局中间件","children":[]},{"level":3,"title":"6. 优化 Controller 返回","slug":"_6-优化-controller-返回","link":"#_6-优化-controller-返回","children":[]},{"level":3,"title":"7. 修改 facades.Route() 中 Group 方法的入参","slug":"_7-修改-facades-route-中-group-方法的入参","link":"#_7-修改-facades-route-中-group-方法的入参","children":[]},{"level":3,"title":"8. 修改 facades.Cache() 中 Remember 与 RememberForever 方法（如果用到）","slug":"_8-修改-facades-cache-中-remember-与-rememberforever-方法-如果用到","link":"#_8-修改-facades-cache-中-remember-与-rememberforever-方法-如果用到","children":[]},{"level":3,"title":"9. 修改 access.NewAllowResponse 与 access.NewDenyResponse 包名（如果用到）","slug":"_9-修改-access-newallowresponse-与-access-newdenyresponse-包名-如果用到","link":"#_9-修改-access-newallowresponse-与-access-newdenyresponse-包名-如果用到","children":[]},{"level":3,"title":"10. 移除废弃方法（如果用到）","slug":"_10-移除废弃方法-如果用到","link":"#_10-移除废弃方法-如果用到","children":[]}]},{"level":2,"title":"功能介绍","slug":"功能介绍","link":"#功能介绍","children":[{"level":3,"title":"数据填充","slug":"数据填充","link":"#数据填充","children":[]},{"level":3,"title":"模型工厂","slug":"模型工厂","link":"#模型工厂","children":[]},{"level":3,"title":"集成测试","slug":"集成测试","link":"#集成测试","children":[]},{"level":3,"title":"视图","slug":"视图","link":"#视图","children":[]},{"level":3,"title":"Go 默认版本升级为 1.20","slug":"go-默认版本升级为-1-20","link":"#go-默认版本升级为-1-20","children":[]},{"level":3,"title":"任务调度支持横向伸缩","slug":"任务调度支持横向伸缩","link":"#任务调度支持横向伸缩","children":[]},{"level":3,"title":"新增 debug 方法","slug":"新增-debug-方法","link":"#新增-debug-方法","children":[]},{"level":3,"title":"make:controller 命令新增参数","slug":"make-controller-命令新增参数","link":"#make-controller-命令新增参数","children":[]},{"level":3,"title":"Response 新增 Status 方法","slug":"response-新增-status-方法","link":"#response-新增-status-方法","children":[]},{"level":3,"title":"Orm 新增 Sum 和 Cursor 方法","slug":"orm-新增-sum-和-cursor-方法","link":"#orm-新增-sum-和-cursor-方法","children":[]},{"level":3,"title":"Route 模块支持配置驱动","slug":"route-模块支持配置驱动","link":"#route-模块支持配置驱动","children":[]},{"level":3,"title":"Request 新增 InputArray 和 InputMap 方法","slug":"request-新增-inputarray-和-inputmap-方法","link":"#request-新增-inputarray-和-inputmap-方法","children":[]},{"level":3,"title":"Orm 模型支持自定义链接","slug":"orm-模型支持自定义链接","link":"#orm-模型支持自定义链接","children":[]},{"level":3,"title":"Filesystem 模块新增 Cloudinary 驱动","slug":"filesystem-模块新增-cloudinary-驱动","link":"#filesystem-模块新增-cloudinary-驱动","children":[]},{"level":3,"title":"Log 新增链式方法","slug":"log-新增链式方法","link":"#log-新增链式方法","children":[]},{"level":3,"title":"修复 facades.Auth().User() 的问题","slug":"修复-facades-auth-user-的问题","link":"#修复-facades-auth-user-的问题","children":[]},{"level":3,"title":"修复自定义 .env 路由某些情况下不生效的问题","slug":"修复自定义-env-路由某些情况下不生效的问题","link":"#修复自定义-env-路由某些情况下不生效的问题","children":[]},{"level":3,"title":"修复 JWT 中设置 ttl == 0 时 token 立即过期的问题","slug":"修复-jwt-中设置-ttl-0-时-token-立即过期的问题","link":"#修复-jwt-中设置-ttl-0-时-token-立即过期的问题","children":[]},{"level":3,"title":"修复 facades.Storage().Url() 在 windows 系统下路径错误的问题","slug":"修复-facades-storage-url-在-windows-系统下路径错误的问题","link":"#修复-facades-storage-url-在-windows-系统下路径错误的问题","children":[]},{"level":3,"title":"修复 Postgres 密码为空时连接异常的问题","slug":"修复-postgres-密码为空时连接异常的问题","link":"#修复-postgres-密码为空时连接异常的问题","children":[]},{"level":3,"title":"修复使用 Orm Cursor 方法时 With 方法无效的问题","slug":"修复使用-orm-cursor-方法时-with-方法无效的问题","link":"#修复使用-orm-cursor-方法时-with-方法无效的问题","children":[]},{"level":3,"title":"服务启动支持环境变量","slug":"服务启动支持环境变量","link":"#服务启动支持环境变量","children":[]},{"level":3,"title":"修复 validation 无法校验路由参数的问题","slug":"修复-validation-无法校验路由参数的问题","link":"#修复-validation-无法校验路由参数的问题","children":[]},{"level":3,"title":"修复 Fiber 驱动无法返回文件的问题","slug":"修复-fiber-驱动无法返回文件的问题","link":"#修复-fiber-驱动无法返回文件的问题","children":[]},{"level":3,"title":"修复 Fiber 驱动全局中间件 panic 的问题","slug":"修复-fiber-驱动全局中间件-panic-的问题","link":"#修复-fiber-驱动全局中间件-panic-的问题","children":[]},{"level":3,"title":"修复 Fiber 驱动的 ContentType 设置与 Gin 驱动不同的问题","slug":"修复-fiber-驱动的-contenttype-设置与-gin-驱动不同的问题","link":"#修复-fiber-驱动的-contenttype-设置与-gin-驱动不同的问题","children":[]},{"level":3,"title":"修复模型自定义链接不生效","slug":"修复模型自定义链接不生效","link":"#修复模型自定义链接不生效","children":[]},{"level":3,"title":"修复 Mock Log 报错","slug":"修复-mock-log-报错","link":"#修复-mock-log-报错","children":[]},{"level":3,"title":"修复队列任务链非线性执行的问题","slug":"修复队列任务链非线性执行的问题","link":"#修复队列任务链非线性执行的问题","children":[]},{"level":3,"title":"修复使用不同 Guard 多次调用 facades.Auth().Parse() 数据被覆盖的问题","slug":"修复使用不同-guard-多次调用-facades-auth-parse-数据被覆盖的问题","link":"#修复使用不同-guard-多次调用-facades-auth-parse-数据被覆盖的问题","children":[]},{"level":3,"title":"修复使用 facades.Orm().WithContext() 设置 ctx 无法被正确传达到 event.Context() 的问题","slug":"修复使用-facades-orm-withcontext-设置-ctx-无法被正确传达到-event-context-的问题","link":"#修复使用-facades-orm-withcontext-设置-ctx-无法被正确传达到-event-context-的问题","children":[]},{"level":3,"title":"优化队列日志根据 APP_DEBUG 设置显示","slug":"优化队列日志根据-app-debug-设置显示","link":"#优化队列日志根据-app-debug-设置显示","children":[]},{"level":3,"title":"修复 Log 换行错误的问题","slug":"修复-log-换行错误的问题","link":"#修复-log-换行错误的问题","children":[]},{"level":3,"title":"修复 vendor:publish 命令无法发布多层文件夹的问题","slug":"修复-vendor-publish-命令无法发布多层文件夹的问题","link":"#修复-vendor-publish-命令无法发布多层文件夹的问题","children":[]},{"level":3,"title":"修复 Log 中 traces 错误的问题","slug":"修复-log-中-traces-错误的问题","link":"#修复-log-中-traces-错误的问题","children":[]},{"level":3,"title":"修复 orm event 中 GetAttribute 方法返回数据错误的问题","slug":"修复-orm-event-中-getattribute-方法返回数据错误的问题","link":"#修复-orm-event-中-getattribute-方法返回数据错误的问题","children":[]},{"level":3,"title":"ORM 新增 ToSql, ToRawSql 方法","slug":"orm-新增-tosql-torawsql-方法","link":"#orm-新增-tosql-torawsql-方法","children":[]}]}],"git":{},"filePathRelative":"zh/upgrade/v1.13.md","autoDesc":true}');export{E as comp,k as data};
