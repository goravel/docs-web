import{_ as p,c as u,b as n,e as a,f as s,a as r,d as l,r as o,o as m}from"./app-BkEuEyAJ.js";const v={},E={class:"table-of-contents"};function h(g,e){const t=o("router-link"),i=o("RouteLink"),d=o("CommentService");return m(),u("div",null,[e[36]||(e[36]=n("h1",{id:"从-v1-8-升级到-v1-9",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#从-v1-8-升级到-v1-9"},[n("span",null,"从 v1.8 升级到 v1.9")])],-1)),n("nav",E,[n("ul",null,[n("li",null,[a(t,{to:"#功能增强-🚀"},{default:s(()=>e[0]||(e[0]=[l("功能增强 🚀")])),_:1})]),n("li",null,[a(t,{to:"#破坏性变化-🛠"},{default:s(()=>e[1]||(e[1]=[l("破坏性变化 🛠")])),_:1})]),n("li",null,[a(t,{to:"#bug-修复-🐛"},{default:s(()=>e[2]||(e[2]=[l("Bug 修复 🐛")])),_:1})]),n("li",null,[a(t,{to:"#升级依赖-⬆️"},{default:s(()=>e[3]||(e[3]=[l("升级依赖 ⬆️")])),_:1})]),n("li",null,[a(t,{to:"#升级指南"},{default:s(()=>e[4]||(e[4]=[l("升级指南")])),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#更新依赖"},{default:s(()=>e[5]||(e[5]=[l("更新依赖")])),_:1})]),n("li",null,[a(t,{to:"#新增数据库读写分离"},{default:s(()=>e[6]||(e[6]=[l("新增数据库读写分离")])),_:1})]),n("li",null,[a(t,{to:"#新增数据库连接池配置"},{default:s(()=>e[7]||(e[7]=[l("新增数据库连接池配置")])),_:1})]),n("li",null,[a(t,{to:"#自定义-env-路径"},{default:s(()=>e[8]||(e[8]=[l("自定义 .env 路径")])),_:1})]),n("li",null,[a(t,{to:"#cache-新增-memory-驱动"},{default:s(()=>e[9]||(e[9]=[l("Cache 新增 Memory 驱动")])),_:1})]),n("li",null,[a(t,{to:"#orm-新增分页方法"},{default:s(()=>e[10]||(e[10]=[l("Orm 新增分页方法")])),_:1})]),n("li",null,[a(t,{to:"#新增-make-命令"},{default:s(()=>e[11]||(e[11]=[l("新增 make 命令")])),_:1})]),n("li",null,[a(t,{to:"#response-新增方法"},{default:s(()=>e[12]||(e[12]=[l("Response 新增方法")])),_:1})]),n("li",null,[a(t,{to:"#request-prepareforvalidation-方法新增-error-返回"},{default:s(()=>e[13]||(e[13]=[l("Request PrepareForValidation 方法新增 error 返回")])),_:1})]),n("li",null,[a(t,{to:"#file-获取错误的文件类型"},{default:s(()=>e[14]||(e[14]=[l("File 获取错误的文件类型")])),_:1})]),n("li",null,[a(t,{to:"#修复-make-event-和-make-listener-命令生成模板有误的问题"},{default:s(()=>e[15]||(e[15]=[l("修复 make:event 和 make:listener 命令生成模板有误的问题")])),_:1})]),n("li",null,[a(t,{to:"#修复保存文件时有些类型无法获取后缀的问题"},{default:s(()=>e[16]||(e[16]=[l("修复保存文件时有些类型无法获取后缀的问题")])),_:1})])])])])]),e[37]||(e[37]=r(`<h2 id="功能增强-🚀" tabindex="-1"><a class="header-anchor" href="#功能增强-🚀"><span>功能增强 🚀</span></a></h2><ul><li><a href="#%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB">新增数据库读写分离(1.9.0)</a></li><li><a href="#%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE">新增数据库连接池配置(1.9.0)</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-.env-%E8%B7%AF%E5%BE%84">自定义 .env 路径(1.9.0)</a></li><li><a href="#cache-%E6%96%B0%E5%A2%9E-memory-%E9%A9%B1%E5%8A%A8">Cache 新增 Memory 驱动(1.9.0)</a></li><li><a href="#orm-%E6%96%B0%E5%A2%9E%E5%88%86%E9%A1%B5%E6%96%B9%E6%B3%95">Orm 新增分页方法(1.9.0)</a></li><li><a href="#%E6%96%B0%E5%A2%9E-make-%E5%91%BD%E4%BB%A4">新增 make 命令(1.9.0)</a></li><li><a href="#response-%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95">Response 新增方法(1.9.0)</a></li></ul><h2 id="破坏性变化-🛠" tabindex="-1"><a class="header-anchor" href="#破坏性变化-🛠"><span>破坏性变化 🛠</span></a></h2><ul><li><a href="#Request-PrepareForValidation-%E6%96%B9%E6%B3%95%E6%96%B0%E5%A2%9E-error-%E8%BF%94%E5%9B%9E">Request PrepareForValidation 方法新增 error 返回(1.9.0)</a></li></ul><h2 id="bug-修复-🐛" tabindex="-1"><a class="header-anchor" href="#bug-修复-🐛"><span>Bug 修复 🐛</span></a></h2><ul><li><a href="#File-%E8%8E%B7%E5%8F%96%E9%94%99%E8%AF%AF%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B">File 获取错误的文件类型(1.9.0)</a></li><li><a href="#%E4%BF%AE%E5%A4%8D-make:event-%E5%92%8C-make:listener-%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF%E6%9C%89%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98">修复 make:event 和 make:listener 命令生成模板有误的问题(1.9.0)</a></li><li><a href="#%E4%BF%AE%E5%A4%8D%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6%E6%97%B6%E6%9C%89%E4%BA%9B%E7%B1%BB%E5%9E%8B%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96%E5%90%8E%E7%BC%80%E7%9A%84%E9%97%AE%E9%A2%98">修复保存文件时有些类型无法获取后缀的问题(1.9.1)</a></li></ul><h2 id="升级依赖-⬆️" tabindex="-1"><a class="header-anchor" href="#升级依赖-⬆️"><span>升级依赖 ⬆️</span></a></h2><ul><li>build(deps): bump github.com/gin-gonic/gin from v1.7.3 to v1.8.2</li></ul><h2 id="升级指南" tabindex="-1"><a class="header-anchor" href="#升级指南"><span>升级指南</span></a></h2><p><strong>预计升级时间：10 分钟</strong></p><h3 id="更新依赖" tabindex="-1"><a class="header-anchor" href="#更新依赖"><span>更新依赖</span></a></h3><p><code>go.mod</code> 中更新依赖：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">go get -u github.com/goravel/framework@v1.9.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="新增数据库读写分离" tabindex="-1"><a class="header-anchor" href="#新增数据库读写分离"><span>新增数据库读写分离</span></a></h3><p>Version: v1.9.0</p>`,15)),n("p",null,[e[18]||(e[18]=l("数据库支持读写分离配置，")),a(i,{to:"/zh/orm/getting-started.html#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB"},{default:s(()=>e[17]||(e[17]=[l("详见文档")])),_:1}),e[19]||(e[19]=l("。"))]),e[38]||(e[38]=r(`<h3 id="新增数据库连接池配置" tabindex="-1"><a class="header-anchor" href="#新增数据库连接池配置"><span>新增数据库连接池配置</span></a></h3><p>Version: v1.9.0</p><p>数据库配置文件 <code>config/database.go</code> 新增连接池配置 <code>pool</code>，<a href="https://github.com/goravel/goravel/blob/v1.9.x/config/database.go" target="_blank" rel="noopener noreferrer">详见文件</a>。</p><h3 id="自定义-env-路径" tabindex="-1"><a class="header-anchor" href="#自定义-env-路径"><span>自定义 .env 路径</span></a></h3><p>Version: v1.9.0</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">// 编译前</span>
<span class="line">go run . --env=../.env</span>
<span class="line"></span>
<span class="line">//编译后</span>
<span class="line">./main --env=../.env</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cache-新增-memory-驱动" tabindex="-1"><a class="header-anchor" href="#cache-新增-memory-驱动"><span>Cache 新增 Memory 驱动</span></a></h3><p>Version: v1.9.0</p><p><code>config/cache.go</code> 新增 <code>memory</code> 配置：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&quot;stores&quot;: map[string]any{</span>
<span class="line">  // 新增</span>
<span class="line">  &quot;memory&quot;: map[string]any{</span>
<span class="line">    &quot;driver&quot;: &quot;memory&quot;,</span>
<span class="line">  },</span>
<span class="line">},</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://github.com/goravel/goravel/blob/v1.9.x/config/cache.go" target="_blank" rel="noopener noreferrer">详见文件</a></p><h3 id="orm-新增分页方法" tabindex="-1"><a class="header-anchor" href="#orm-新增分页方法"><span>Orm 新增分页方法</span></a></h3><p>Version: v1.9.0</p>`,13)),n("p",null,[e[21]||(e[21]=n("code",null,"facades.Orm",-1)),e[22]||(e[22]=l(" 新增 ")),e[23]||(e[23]=n("code",null,"Paginate",-1)),e[24]||(e[24]=l(" 方法，")),a(i,{to:"/zh/orm/getting-started.html#%E5%88%86%E9%A1%B5"},{default:s(()=>e[20]||(e[20]=[l("详见文档")])),_:1}),e[25]||(e[25]=l("。"))]),e[39]||(e[39]=r(`<h3 id="新增-make-命令" tabindex="-1"><a class="header-anchor" href="#新增-make-命令"><span>新增 make 命令</span></a></h3><p>Version: v1.9.0</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">// 创建控制器</span>
<span class="line">go run . artisan make:controller UserController</span>
<span class="line"></span>
<span class="line">// 创建 HTTP 中间件</span>
<span class="line">go run . artisan make:middleware Cors</span>
<span class="line"></span>
<span class="line">// 创建模型</span>
<span class="line">go run . artisan make:model User</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="response-新增方法" tabindex="-1"><a class="header-anchor" href="#response-新增方法"><span>Response 新增方法</span></a></h3><p>Version: v1.9.0</p>`,5)),n("table",null,[e[30]||(e[30]=n("thead",null,[n("tr",null,[n("th",null,"方法名"),n("th",null,"作用")])],-1)),n("tbody",null,[n("tr",null,[e[27]||(e[27]=n("td",null,"Data",-1)),n("td",null,[a(i,{to:"/zh/the-basics/response.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%94%E5%9B%9E"},{default:s(()=>e[26]||(e[26]=[l("自定义返回")])),_:1})])]),n("tr",null,[e[29]||(e[29]=n("td",null,"Redirect",-1)),n("td",null,[a(i,{to:"/zh/the-basics/response.html#%E9%87%8D%E5%AE%9A%E5%90%91"},{default:s(()=>e[28]||(e[28]=[l("重定向")])),_:1})])])])]),e[40]||(e[40]=n("h3",{id:"request-prepareforvalidation-方法新增-error-返回",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#request-prepareforvalidation-方法新增-error-返回"},[n("span",null,"Request PrepareForValidation 方法新增 error 返回")])],-1)),e[41]||(e[41]=n("p",null,"Version: v1.9.0",-1)),n("p",null,[e[32]||(e[32]=l("如果您使用到了 ")),a(i,{to:"/zh/the-basics/validation.html#%E9%AA%8C%E8%AF%81%E5%89%8D%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%95%B0%E6%8D%AE"},{default:s(()=>e[31]||(e[31]=[l("表单验证中的 PrepareForValidation 方法")])),_:1}),e[33]||(e[33]=l("，请新增返回值：")),e[34]||(e[34]=n("code",null,"PrepareForValidation(data validation.Data) error",-1)),e[35]||(e[35]=l("。"))]),e[42]||(e[42]=r(`<h3 id="file-获取错误的文件类型" tabindex="-1"><a class="header-anchor" href="#file-获取错误的文件类型"><span>File 获取错误的文件类型</span></a></h3><p>Version: v1.9.0</p><p>修复 <code>.docx</code>, <code>.xlsx</code> 等类型错误的识别为 <code>.zip</code> 的问题。</p><h3 id="修复-make-event-和-make-listener-命令生成模板有误的问题" tabindex="-1"><a class="header-anchor" href="#修复-make-event-和-make-listener-命令生成模板有误的问题"><span>修复 make:event 和 make:listener 命令生成模板有误的问题</span></a></h3><p>Version: v1.9.0</p><p><code>import &quot;github.com/goravel/framework/contracts/events&quot;</code> 改为 <code>import &quot;github.com/goravel/framework/contracts/event&quot;</code></p><h3 id="修复保存文件时有些类型无法获取后缀的问题" tabindex="-1"><a class="header-anchor" href="#修复保存文件时有些类型无法获取后缀的问题"><span>修复保存文件时有些类型无法获取后缀的问题</span></a></h3><p>Version: v1.9.1</p><p>下面代码有些类型无法获取后缀:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">file<span class="token punctuation">,</span> err <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   </span>
<span class="line">file<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">&quot;upload&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,10)),a(d)])}const f=p(v,[["render",h],["__file","v1.9.html.vue"]]),b=JSON.parse('{"path":"/zh/upgrade/v1.9.html","title":"从 v1.8 升级到 v1.9","lang":"zh-CN","frontmatter":{"description":"从 v1.8 升级到 v1.9 功能增强 🚀 新增数据库读写分离(1.9.0) 新增数据库连接池配置(1.9.0) 自定义 .env 路径(1.9.0) Cache 新增 Memory 驱动(1.9.0) Orm 新增分页方法(1.9.0) 新增 make 命令(1.9.0) Response 新增方法(1.9.0) 破坏性变化 🛠 Request...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://goravel.dev/upgrade/v1.9.html"}],["meta",{"property":"og:url","content":"https://goravel.dev/zh/upgrade/v1.9.html"}],["meta",{"property":"og:site_name","content":"Goravel"}],["meta",{"property":"og:title","content":"/upgrade/v1.9.html"}],["meta",{"property":"og:description","content":"从 v1.8 升级到 v1.9 功能增强 🚀 新增数据库读写分离(1.9.0) 新增数据库连接池配置(1.9.0) 自定义 .env 路径(1.9.0) Cache 新增 Memory 驱动(1.9.0) Orm 新增分页方法(1.9.0) 新增 make 命令(1.9.0) Response 新增方法(1.9.0) 破坏性变化 🛠 Request..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"从 v1.8 升级到 v1.9\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"功能增强 🚀","slug":"功能增强-🚀","link":"#功能增强-🚀","children":[]},{"level":2,"title":"破坏性变化 🛠","slug":"破坏性变化-🛠","link":"#破坏性变化-🛠","children":[]},{"level":2,"title":"Bug 修复 🐛","slug":"bug-修复-🐛","link":"#bug-修复-🐛","children":[]},{"level":2,"title":"升级依赖 ⬆️","slug":"升级依赖-⬆️","link":"#升级依赖-⬆️","children":[]},{"level":2,"title":"升级指南","slug":"升级指南","link":"#升级指南","children":[{"level":3,"title":"更新依赖","slug":"更新依赖","link":"#更新依赖","children":[]},{"level":3,"title":"新增数据库读写分离","slug":"新增数据库读写分离","link":"#新增数据库读写分离","children":[]},{"level":3,"title":"新增数据库连接池配置","slug":"新增数据库连接池配置","link":"#新增数据库连接池配置","children":[]},{"level":3,"title":"自定义 .env 路径","slug":"自定义-env-路径","link":"#自定义-env-路径","children":[]},{"level":3,"title":"Cache 新增 Memory 驱动","slug":"cache-新增-memory-驱动","link":"#cache-新增-memory-驱动","children":[]},{"level":3,"title":"Orm 新增分页方法","slug":"orm-新增分页方法","link":"#orm-新增分页方法","children":[]},{"level":3,"title":"新增 make 命令","slug":"新增-make-命令","link":"#新增-make-命令","children":[]},{"level":3,"title":"Response 新增方法","slug":"response-新增方法","link":"#response-新增方法","children":[]},{"level":3,"title":"Request PrepareForValidation 方法新增 error 返回","slug":"request-prepareforvalidation-方法新增-error-返回","link":"#request-prepareforvalidation-方法新增-error-返回","children":[]},{"level":3,"title":"File 获取错误的文件类型","slug":"file-获取错误的文件类型","link":"#file-获取错误的文件类型","children":[]},{"level":3,"title":"修复 make:event 和 make:listener 命令生成模板有误的问题","slug":"修复-make-event-和-make-listener-命令生成模板有误的问题","link":"#修复-make-event-和-make-listener-命令生成模板有误的问题","children":[]},{"level":3,"title":"修复保存文件时有些类型无法获取后缀的问题","slug":"修复保存文件时有些类型无法获取后缀的问题","link":"#修复保存文件时有些类型无法获取后缀的问题","children":[]}]}],"git":{},"filePathRelative":"zh/upgrade/v1.9.md","autoDesc":true}');export{f as comp,b as data};
